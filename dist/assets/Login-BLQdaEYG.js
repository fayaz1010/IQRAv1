import{r as s,a4 as v,e as w,j as e,f as n,P as S,T as u,D as k,L as A}from"./index-NbX1JcnA.js";import{C}from"./Container-Xllwi1gj.js";import{m as D}from"./proxy-D2rYx3pK.js";import{A as G}from"./Alert-CmfgxPu4.js";import{T as h}from"./TextField-BvzYVYPy.js";import{B as p}from"./Button-BugPEW2g.js";import{G as I}from"./Google-L7PHq6xT.js";import{L as F}from"./Link-ByJX8nbe.js";import"./useThemeProps-DPqPURvD.js";import"./Close-BMBH_CLD.js";import"./Select-DoWYHUS9.js";import"./isMuiElement-CyZXsiQS.js";const z=()=>{const[l,x]=s.useState(""),[c,g]=s.useState(""),[d,a]=s.useState(""),[m,o]=s.useState(!1),i=v(),{login:f,loginWithGoogle:y}=w(),b=async r=>{r.preventDefault();try{a(""),o(!0);const t=await f(l,c);if(t.success)switch(t.user.role){case"admin":i("/admin",{replace:!0});break;case"teacher":i("/teacher",{replace:!0});break;default:i("/dashboard",{replace:!0})}else a(t.error||"Failed to sign in")}catch{a("Failed to sign in")}finally{o(!1)}},j=async r=>{r.preventDefault();try{a(""),o(!0);const t=await y();if(t.success)switch(t.user.role){case"admin":i("/admin",{replace:!0});break;case"teacher":i("/teacher",{replace:!0});break;default:i("/dashboard",{replace:!0})}else a(t.error||"Failed to sign in with Google")}catch(t){a(t.message||"Failed to sign in with Google")}finally{o(!1)}};return e.jsx(C,{component:"main",maxWidth:"xs",children:e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(n,{sx:{mt:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsxs(S,{elevation:3,sx:{p:4,width:"100%",borderRadius:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(u,{component:"h1",variant:"h4",gutterBottom:!0,children:"Sign in to IQRA"}),d&&e.jsx(G,{severity:"error",sx:{width:"100%",mb:2},children:d}),e.jsxs(n,{component:"form",onSubmit:b,sx:{mt:1,width:"100%"},children:[e.jsx(h,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:l,onChange:r=>x(r.target.value)}),e.jsx(h,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:c,onChange:r=>g(r.target.value)}),e.jsx(p,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:m,children:"Sign In"}),e.jsx(n,{sx:{width:"100%",textAlign:"center",my:2},children:e.jsx(k,{children:e.jsx(u,{color:"textSecondary",variant:"body2",children:"or"})})}),e.jsx(p,{fullWidth:!0,variant:"outlined",color:"primary",onClick:j,disabled:m,startIcon:e.jsx(I,{}),sx:{mt:2,mb:2},children:"Sign in with Google"}),e.jsx(n,{sx:{mt:2,textAlign:"center"},children:e.jsx(F,{component:A,to:"/register",variant:"body2",underline:"hover",children:"Don't have an account? Sign Up"})})]})]})})})})};export{z as default};
