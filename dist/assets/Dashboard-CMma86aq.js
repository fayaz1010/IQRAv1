import{Y as D,e as P,r as v,j as e,f as h,P as x,a2 as E,T as n,I as A,ag as N,a3 as d,w as T,i as w,x as g,y as r,z as j}from"./index-NbX1JcnA.js";import{C as O}from"./Container-Xllwi1gj.js";import{G as a}from"./Grid-D4usHc3i.js";import{C as Q,a as R}from"./CardContent-GC4ifVzl.js";import{m as $}from"./proxy-D2rYx3pK.js";import"./useThemeProps-DPqPURvD.js";const m=({title:t,value:s,icon:o,color:c})=>{const l=D();return e.jsx(Q,{component:$.div,whileHover:{scale:1.02},whileTap:{scale:.98},sx:{height:"100%",background:`linear-gradient(45deg, ${c}88 30%, ${c}44 90%)`,color:l.palette.mode==="dark"?"#fff":"#000"},children:e.jsx(R,{children:e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(h,{children:[e.jsx(n,{variant:"h6",component:"div",children:t}),e.jsx(n,{variant:"h4",children:s})]}),o]})})})},U=()=>{var l,y;const t=D(),{currentUser:s}=P(),[o,c]=v.useState({progress:0,classesToday:0,nextClass:"No classes",assignments:0});return v.useEffect(()=>{s&&(async()=>{try{const i=new Date;i.setHours(0,0,0,0);const p=new Date(i);p.setDate(p.getDate()+1);const f=T(w,"classes"),I=g(f,r("teacherId","==",s.uid),r("startTime",">=",i.toISOString()),r("startTime","<",p.toISOString())),u=(await j(I)).size,k=g(f,r("teacherId","==",s.uid),r("startTime",">=",new Date().toISOString())),S=await j(k);let C="No classes";if(!S.empty){const B=S.docs[0].data();C=new Date(B.startTime).toLocaleTimeString()}const z=T(w,"assignments"),H=g(z,r("teacherId","==",s.uid),r("status","==","pending")),b=(await j(H)).size;c({progress:Math.round(u/(u+b)*100)||0,classesToday:u,nextClass:C,assignments:b})}catch(i){console.error("Error fetching stats:",i)}})()},[s]),e.jsx(O,{maxWidth:"lg",sx:{mt:4,mb:4,minHeight:"100vh"},children:e.jsx(h,{sx:{mb:4},children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,children:e.jsxs(x,{sx:{p:2,display:"flex",alignItems:"center",backgroundColor:t.palette.background.paper,color:t.palette.text.primary},children:[e.jsx(E,{sx:{width:56,height:56,bgcolor:t.palette.primary.main,color:t.palette.primary.contrastText},children:((y=(l=s==null?void 0:s.email)==null?void 0:l[0])==null?void 0:y.toUpperCase())||"U"}),e.jsxs(h,{sx:{ml:2,flex:1},children:[e.jsx(n,{variant:"h5",children:s==null?void 0:s.email}),e.jsx(n,{variant:"subtitle1",color:"textSecondary",children:"Teacher"})]}),e.jsx(A,{children:e.jsx(N,{})})]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsx(m,{title:"Progress",value:`${o.progress}%`,icon:e.jsx(d,{sx:{fontSize:40}}),color:t.palette.primary.main})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsx(m,{title:"Classes Today",value:o.classesToday,icon:e.jsx(d,{sx:{fontSize:40}}),color:t.palette.secondary.main})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsx(m,{title:"Next Class",value:o.nextClass,icon:e.jsx(d,{sx:{fontSize:40}}),color:t.palette.success.main})}),e.jsx(a,{item:!0,xs:12,sm:6,md:3,children:e.jsx(m,{title:"Assignments",value:o.assignments,icon:e.jsx(d,{sx:{fontSize:40}}),color:t.palette.warning.main})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(x,{sx:{p:2,display:"flex",flexDirection:"column",minHeight:240,backgroundColor:t.palette.background.paper,color:t.palette.text.primary},children:e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Today's Schedule"})})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(x,{sx:{p:2,display:"flex",flexDirection:"column",minHeight:240,backgroundColor:t.palette.background.paper,color:t.palette.text.primary},children:e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Upcoming Classes"})})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(x,{sx:{p:2,display:"flex",flexDirection:"column",minHeight:240,backgroundColor:t.palette.background.paper,color:t.palette.text.primary},children:e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Student Progress"})})})]})})})};export{U as default};
