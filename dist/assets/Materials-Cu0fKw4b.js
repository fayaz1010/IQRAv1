import{d as R,j as e,Y as U,e as N,r as c,w as P,i as C,x as $,y as J,z as K,f as s,T as r,P as Q,I as l,am as X,a5 as Z,l as ee,h as F,C as te,E as se}from"./index-NbX1JcnA.js";import{C as ne}from"./Container-Xllwi1gj.js";import{B as j}from"./Button-BugPEW2g.js";import{A as ie}from"./Add-DJ7EsDaO.js";import{T as re,a as k}from"./Tabs-BFpWoaKh.js";import{G as a}from"./Grid-D4usHc3i.js";import{C as D,a as w}from"./CardContent-GC4ifVzl.js";import{m as T}from"./proxy-D2rYx3pK.js";import{W as I}from"./Edit-BL9613mr.js";import{C as S}from"./Delete-BBT7Eckp.js";import{Y as q,L as O}from"./YouTube-DOr2ko_V.js";import{D as le}from"./Dialog-DxCc320D.js";import{D as ae}from"./DialogTitle-D-CYvDlS.js";import{D as oe,a as ce}from"./DialogContent-BKdfl9fq.js";import{T as g}from"./TextField-BvzYVYPy.js";import"./useThemeProps-DPqPURvD.js";import"./KeyboardArrowRight-DO8ZDbbz.js";import"./Select-DoWYHUS9.js";import"./isMuiElement-CyZXsiQS.js";const de=R(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),z=({children:d,value:x,index:h,...B})=>e.jsx("div",{role:"tabpanel",hidden:x!==h,id:`material-tabpanel-${h}`,...B,children:x===h&&e.jsx(s,{sx:{p:3},children:d})}),Be=()=>{const d=U(),{currentUser:x}=N(),[h,B]=c.useState([]),[Y,A]=c.useState(!1),[f,M]=c.useState(null),[m,_]=c.useState(0),[n,o]=c.useState({title:"",description:"",type:"document",content:"",tags:[]}),[H,p]=c.useState("");c.useEffect(()=>{W()},[x]);const W=async()=>{try{const t=P(C,"materials"),i=$(t,J("teacherId","==",x.uid)),y=await K(i),V=[];y.forEach(L=>{V.push({id:L.id,...L.data()})}),B(V)}catch(t){console.error("Error fetching materials:",t),p("Failed to load materials")}},u=(t=null)=>{t?(M(t),o({title:t.title,description:t.description,type:t.type,content:t.content,tags:t.tags||[]})):(M(null),o({title:"",description:"",type:"document",content:"",tags:[]})),A(!0)},E=()=>{A(!1),M(null),p("")},G=async()=>{try{if(!n.title){p("Title is required");return}const t={...n,teacherId:x.uid,updatedAt:new Date().toISOString()};f?await ee(F(C,"materials",f.id),t):(t.createdAt=new Date().toISOString(),await te(P(C,"materials"),t)),E(),W()}catch(t){console.error("Error saving material:",t),p("Failed to save material")}},b=async t=>{try{await se(F(C,"materials",t)),W()}catch(i){console.error("Error deleting material:",i),p("Failed to delete material")}},v=t=>h.filter(i=>i.type===t);return e.jsxs(ne,{maxWidth:"lg",sx:{mt:4,mb:4,minHeight:"100vh",backgroundColor:d.palette.background.default,color:d.palette.text.primary},children:[e.jsxs(s,{sx:{mb:4},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[e.jsx(r,{variant:"h4",children:"Teaching Materials"}),e.jsx(j,{variant:"contained",startIcon:e.jsx(ie,{}),onClick:()=>u(),children:"Add Material"})]}),e.jsxs(Q,{sx:{width:"100%",bgcolor:"background.paper"},children:[e.jsxs(re,{value:m,onChange:(t,i)=>_(i),indicatorColor:"primary",textColor:"primary",centered:!0,children:[e.jsx(k,{label:"Documents"}),e.jsx(k,{label:"Videos"}),e.jsx(k,{label:"Links"}),e.jsx(k,{label:"Books"})]}),e.jsx(z,{value:m,index:0,children:e.jsx(a,{container:!0,spacing:3,children:v("document").map(t=>{var i;return e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(D,{component:T.div,whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs(w,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(de,{sx:{mr:1}}),e.jsx(r,{variant:"h6",children:t.title})]}),e.jsxs(s,{children:[e.jsx(l,{size:"small",onClick:()=>u(t),sx:{mr:1},children:e.jsx(I,{})}),e.jsx(l,{size:"small",onClick:()=>b(t.id),children:e.jsx(S,{})})]})]}),e.jsx(r,{color:"textSecondary",gutterBottom:!0,children:t.description}),((i=t.tags)==null?void 0:i.length)>0&&e.jsx(s,{sx:{mt:2},children:t.tags.map(y=>e.jsx(X,{label:y,size:"small",sx:{mr:1,mb:1}},y))})]})})},t.id)})})}),e.jsx(z,{value:m,index:1,children:e.jsx(a,{container:!0,spacing:3,children:v("video").map(t=>e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(D,{component:T.div,whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs(w,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(q,{sx:{mr:1}}),e.jsx(r,{variant:"h6",children:t.title})]}),e.jsxs(s,{children:[e.jsx(l,{size:"small",onClick:()=>u(t),sx:{mr:1},children:e.jsx(I,{})}),e.jsx(l,{size:"small",onClick:()=>b(t.id),children:e.jsx(S,{})})]})]}),e.jsx(r,{color:"textSecondary",gutterBottom:!0,children:t.description}),e.jsx(j,{variant:"outlined",startIcon:e.jsx(q,{}),href:t.content,target:"_blank",sx:{mt:2},children:"Watch Video"})]})})},t.id))})}),e.jsx(z,{value:m,index:2,children:e.jsx(a,{container:!0,spacing:3,children:v("link").map(t=>e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(D,{component:T.div,whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs(w,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(O,{sx:{mr:1}}),e.jsx(r,{variant:"h6",children:t.title})]}),e.jsxs(s,{children:[e.jsx(l,{size:"small",onClick:()=>u(t),sx:{mr:1},children:e.jsx(I,{})}),e.jsx(l,{size:"small",onClick:()=>b(t.id),children:e.jsx(S,{})})]})]}),e.jsx(r,{color:"textSecondary",gutterBottom:!0,children:t.description}),e.jsx(j,{variant:"outlined",startIcon:e.jsx(O,{}),href:t.content,target:"_blank",sx:{mt:2},children:"Visit Link"})]})})},t.id))})}),e.jsx(z,{value:m,index:3,children:e.jsx(a,{container:!0,spacing:3,children:v("book").map(t=>e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(D,{component:T.div,whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs(w,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Z,{sx:{mr:1}}),e.jsx(r,{variant:"h6",children:t.title})]}),e.jsxs(s,{children:[e.jsx(l,{size:"small",onClick:()=>u(t),sx:{mr:1},children:e.jsx(I,{})}),e.jsx(l,{size:"small",onClick:()=>b(t.id),children:e.jsx(S,{})})]})]}),e.jsx(r,{color:"textSecondary",gutterBottom:!0,children:t.description})]})})},t.id))})})]})]}),e.jsxs(le,{open:Y,onClose:E,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:d.palette.background.paper,color:d.palette.text.primary}},children:[e.jsx(ae,{children:f?"Edit Material":"Add New Material"}),e.jsx(oe,{children:e.jsxs(s,{sx:{mt:2},children:[H&&e.jsx(r,{color:"error",sx:{mb:2},children:H}),e.jsx(g,{fullWidth:!0,label:"Title",value:n.title,onChange:t=>o({...n,title:t.target.value}),sx:{mb:2}}),e.jsx(g,{fullWidth:!0,label:"Description",value:n.description,onChange:t=>o({...n,description:t.target.value}),multiline:!0,rows:3,sx:{mb:2}}),e.jsxs(g,{select:!0,fullWidth:!0,label:"Type",value:n.type,onChange:t=>o({...n,type:t.target.value}),sx:{mb:2},SelectProps:{native:!0},children:[e.jsx("option",{value:"document",children:"Document"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"link",children:"Link"}),e.jsx("option",{value:"book",children:"Book"})]}),e.jsx(g,{fullWidth:!0,label:"Content",value:n.content,onChange:t=>o({...n,content:t.target.value}),multiline:n.type==="document",rows:n.type==="document"?4:1,sx:{mb:2}}),e.jsx(g,{fullWidth:!0,label:"Tags (comma-separated)",value:n.tags.join(", "),onChange:t=>o({...n,tags:t.target.value.split(",").map(i=>i.trim()).filter(Boolean)})})]})}),e.jsxs(ce,{children:[e.jsx(j,{onClick:E,children:"Cancel"}),e.jsx(j,{onClick:G,variant:"contained",children:f?"Update":"Add"})]})]})]})};export{Be as default};
