import{d as Me,j as o,g as ae,a as re,s as $,n as Mo,o as Ee,m as Be,p as We,q as Ft,r as f,u as Ve,c as Q,b as ne,t as Po,v as Vt,w as je,i as fe,x as Re,y as Oe,z as $e,h as nt,k as eo,C as Nt,l as wt,E as Io,_ as pe,F as S,I as Le,T as te,G as Ro,H as Lo,M as to,J as Fe,K as oo,N as so,O as Ze,Q as kt,D as no,R as ht,V as Fo,e as ao,P as ft,f as J,W as Vo,X as No,Y as Oo,Z as $o,$ as Ot,a0 as Ao,a1 as $t,a2 as Eo,a3 as Wo}from"./index-NbX1JcnA.js";import{C as ro}from"./Container-Xllwi1gj.js";import{A as bt}from"./Alert-CmfgxPu4.js";import{B as ve}from"./Button-BugPEW2g.js";import{u as zo,f as Bo,F as At,I as Et,S as Wt}from"./Select-DoWYHUS9.js";import{S as _o,F as Uo}from"./FormControlLabel-HFRxpfyI.js";import{T as qe}from"./TextField-BvzYVYPy.js";import{u as de,a as Pe,b as Ie,f as Ce,s as Se,S as Ho,g as qo,P as Dt,c as Go,d as jt,e as Mt,h as Pt,i as It,j as et,k as at,D as io,l as tt,M as Ue,v as Ko,m as Yo,n as Qo,o as Jo,p as Xo,q as Zo,r as es,t as ts,w as os,x as Ge,y as zt,z as Bt,A as ot,B as He,C as ss,T as ns,E as as,F as rs,G as is,H as ls,I as _t,J as cs,K as ds,L as Qe,N as us,O as Ae,Q as ms,R as lo,U as ps,V as co,W as i,X as uo,Y as hs,Z as fs,_ as bs,$ as xt,a0 as gt}from"./useMobilePicker-B2Px0QAN.js";import{T as mo,t as xs,a as st}from"./Tabs-BFpWoaKh.js";import{W as Ut}from"./Edit-BL9613mr.js";import{V as po}from"./VideoCall-C1pAmZ6U.js";import{C as gs}from"./Delete-BBT7Eckp.js";import{D as vt}from"./Dialog-DxCc320D.js";import{D as Ct}from"./DialogTitle-D-CYvDlS.js";import{D as yt,a as vs}from"./DialogContent-BKdfl9fq.js";import{A as Cs}from"./Add-DJ7EsDaO.js";import{L as Ht}from"./ListItem-CES74IAT.js";import{L as ys}from"./ListItemAvatar-B8BjRCRl.js";import{T as Ss,a as Ts,b as ws,c as qt,d as Je,e as ks}from"./TableRow-Msm3W_uR.js";import"./useThemeProps-DPqPURvD.js";import"./Close-BMBH_CLD.js";import"./isMuiElement-CyZXsiQS.js";import"./visuallyHidden-Dan1xhjv.js";import"./KeyboardArrowRight-DO8ZDbbz.js";const Ds=Me(o.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),js=Me(o.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Ms=Me(o.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Ps(e){return re("MuiCheckbox",e)}const lt=ae("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Is=e=>{const{classes:t,indeterminate:n,color:s,size:a}=e,r={root:["root",n&&"indeterminate",`color${Ee(s)}`,`size${Ee(a)}`]},l=ne(r,Ps,t);return{...t,...l}},Rs=$(_o,{shouldForwardProp:e=>Mo(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${Ee(n.size)}`],n.color!=="default"&&t[`color${Ee(n.color)}`]]}})(Be(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:We(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(Ft()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:We(e.palette[t].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(Ft()).map(([t])=>({props:{color:t},style:{[`&.${lt.checked}, &.${lt.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${lt.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Ls=o.jsx(js,{}),Fs=o.jsx(Ds,{}),Vs=o.jsx(Ms,{}),Ns=f.forwardRef(function(t,n){const s=Ve({props:t,name:"MuiCheckbox"}),{checkedIcon:a=Ls,color:r="primary",icon:l=Fs,indeterminate:d=!1,indeterminateIcon:c=Vs,inputProps:m,size:p="medium",disableRipple:u=!1,className:b,...x}=s,g=d?c:l,y=d?c:a,R={...s,disableRipple:u,color:r,indeterminate:d,size:p},M=Is(R);return o.jsx(Rs,{type:"checkbox",inputProps:{"data-indeterminate":d,...m},icon:f.cloneElement(g,{fontSize:g.props.fontSize??p}),checkedIcon:f.cloneElement(y,{fontSize:y.props.fontSize??p}),ownerState:R,ref:n,className:Q(M.root,b),disableRipple:u,...x,classes:M})});function Os(e){return re("MuiFormGroup",e)}ae("MuiFormGroup",["root","row","error"]);const $s=e=>{const{classes:t,row:n,error:s}=e;return ne({root:["root",n&&"row",s&&"error"]},Os,t)},As=$("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),Es=f.forwardRef(function(t,n){const s=Ve({props:t,name:"MuiFormGroup"}),{className:a,row:r=!1,...l}=s,d=zo(),c=Bo({props:s,muiFormControl:d,states:["error"]}),m={...s,row:r,error:c.error},p=$s(m);return o.jsx(As,{className:Q(p.root,a),ownerState:m,ref:n,...l})}),rt=f.createContext({}),Rt=f.createContext({});function Ws(e){return re("MuiStep",e)}ae("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const zs=e=>{const{classes:t,orientation:n,alternativeLabel:s,completed:a}=e;return ne({root:["root",n,s&&"alternativeLabel",a&&"completed"]},Ws,t)},Bs=$("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),_s=f.forwardRef(function(t,n){const s=Ve({props:t,name:"MuiStep"}),{active:a,children:r,className:l,component:d="div",completed:c,disabled:m,expanded:p=!1,index:u,last:b,...x}=s,{activeStep:g,connector:y,alternativeLabel:R,orientation:M,nonLinear:N}=f.useContext(rt);let[T=!1,w=!1,P=!1]=[a,c,m];g===u?T=a!==void 0?a:!0:!N&&g>u?w=c!==void 0?c:!0:!N&&g<u&&(P=m!==void 0?m:!0);const E=f.useMemo(()=>({index:u,last:b,expanded:p,icon:u+1,active:T,completed:w,disabled:P}),[u,b,p,T,w,P]),v={...s,active:T,orientation:M,alternativeLabel:R,completed:w,disabled:P,expanded:p,component:d},h=zs(v),k=o.jsxs(Bs,{as:d,className:Q(h.root,l),ref:n,ownerState:v,...x,children:[y&&R&&u!==0?y:null,r]});return o.jsx(Rt.Provider,{value:E,children:y&&!R&&u!==0?o.jsxs(f.Fragment,{children:[y,k]}):k})}),Us=Me(o.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Hs=Me(o.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function qs(e){return re("MuiStepIcon",e)}const ct=ae("MuiStepIcon",["root","active","completed","error","text"]);var Gt;const Gs=e=>{const{classes:t,active:n,completed:s,error:a}=e;return ne({root:["root",n&&"active",s&&"completed",a&&"error"],text:["text"]},qs,t)},dt=$(Po,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(Be(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${ct.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${ct.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${ct.error}`]:{color:(e.vars||e).palette.error.main}}))),Ks=$("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(Be(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily}))),Ys=f.forwardRef(function(t,n){const s=Ve({props:t,name:"MuiStepIcon"}),{active:a=!1,className:r,completed:l=!1,error:d=!1,icon:c,...m}=s,p={...s,active:a,completed:l,error:d},u=Gs(p);if(typeof c=="number"||typeof c=="string"){const b=Q(r,u.root);return d?o.jsx(dt,{as:Hs,className:b,ref:n,ownerState:p,...m}):l?o.jsx(dt,{as:Us,className:b,ref:n,ownerState:p,...m}):o.jsxs(dt,{className:b,ref:n,ownerState:p,...m,children:[Gt||(Gt=o.jsx("circle",{cx:"12",cy:"12",r:"12"})),o.jsx(Ks,{className:u.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:p,children:c})]})}return c});function Qs(e){return re("MuiStepLabel",e)}const De=ae("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Js=e=>{const{classes:t,orientation:n,active:s,completed:a,error:r,disabled:l,alternativeLabel:d}=e;return ne({root:["root",n,r&&"error",l&&"disabled",d&&"alternativeLabel"],label:["label",s&&"active",a&&"completed",r&&"error",l&&"disabled",d&&"alternativeLabel"],iconContainer:["iconContainer",s&&"active",a&&"completed",r&&"error",l&&"disabled",d&&"alternativeLabel"],labelContainer:["labelContainer",d&&"alternativeLabel"]},Qs,t)},Xs=$("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})({display:"flex",alignItems:"center",[`&.${De.alternativeLabel}`]:{flexDirection:"column"},[`&.${De.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),Zs=$("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(Be(({theme:e})=>({...e.typography.body2,display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${De.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${De.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${De.alternativeLabel}`]:{marginTop:16},[`&.${De.error}`]:{color:(e.vars||e).palette.error.main}}))),en=$("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})({flexShrink:0,display:"flex",paddingRight:8,[`&.${De.alternativeLabel}`]:{paddingRight:0}}),tn=$("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(Be(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${De.alternativeLabel}`]:{textAlign:"center"}}))),ho=f.forwardRef(function(t,n){const s=Ve({props:t,name:"MuiStepLabel"}),{children:a,className:r,componentsProps:l={},error:d=!1,icon:c,optional:m,slots:p={},slotProps:u={},StepIconComponent:b,StepIconProps:x,...g}=s,{alternativeLabel:y,orientation:R}=f.useContext(rt),{active:M,disabled:N,completed:T,icon:w}=f.useContext(Rt),P=c||w;let E=b;P&&!E&&(E=Ys);const v={...s,active:M,alternativeLabel:y,completed:T,disabled:N,error:d,orientation:R},h=Js(v),k={slots:p,slotProps:{stepIcon:x,...l,...u}},[C,D]=Vt("label",{elementType:Zs,externalForwardedProps:k,ownerState:v}),[q,Y]=Vt("stepIcon",{elementType:E,externalForwardedProps:k,ownerState:v});return o.jsxs(Xs,{className:Q(h.root,r),ref:n,ownerState:v,...g,children:[P||q?o.jsx(en,{className:h.iconContainer,ownerState:v,children:o.jsx(q,{completed:T,active:M,error:d,icon:P,...Y})}):null,o.jsxs(tn,{className:h.labelContainer,ownerState:v,children:[a?o.jsx(C,{...D,className:Q(h.label,D==null?void 0:D.className),children:a}):null,m]})]})});ho.muiName="StepLabel";function on(e){return re("MuiStepConnector",e)}ae("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const sn=e=>{const{classes:t,orientation:n,alternativeLabel:s,active:a,completed:r,disabled:l}=e,d={root:["root",n,s&&"alternativeLabel",a&&"active",r&&"completed",l&&"disabled"],line:["line",`line${Ee(n)}`]};return ne(d,on,t)},nn=$("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),an=$("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t[`line${Ee(n.orientation)}`]]}})(Be(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600];return{display:"block",borderColor:e.vars?e.vars.palette.StepConnector.border:t,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),rn=f.forwardRef(function(t,n){const s=Ve({props:t,name:"MuiStepConnector"}),{className:a,...r}=s,{alternativeLabel:l,orientation:d="horizontal"}=f.useContext(rt),{active:c,disabled:m,completed:p}=f.useContext(Rt),u={...s,alternativeLabel:l,orientation:d,active:c,completed:p,disabled:m},b=sn(u);return o.jsx(nn,{className:Q(b.root,a),ref:n,ownerState:u,...r,children:o.jsx(an,{className:b.line,ownerState:u})})});function ln(e){return re("MuiStepper",e)}ae("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const cn=e=>{const{orientation:t,nonLinear:n,alternativeLabel:s,classes:a}=e;return ne({root:["root",t,n&&"nonLinear",s&&"alternativeLabel"]},ln,a)},dn=$("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.nonLinear&&t.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),un=o.jsx(rn,{}),mn=f.forwardRef(function(t,n){const s=Ve({props:t,name:"MuiStepper"}),{activeStep:a=0,alternativeLabel:r=!1,children:l,className:d,component:c="div",connector:m=un,nonLinear:p=!1,orientation:u="horizontal",...b}=s,x={...s,nonLinear:p,alternativeLabel:r,orientation:u,component:c},g=cn(x),y=f.Children.toArray(l).filter(Boolean),R=y.map((N,T)=>f.cloneElement(N,{index:T,last:T+1===y.length,...N.props})),M=f.useMemo(()=>({activeStep:a,alternativeLabel:r,connector:m,nonLinear:p,orientation:u}),[a,r,m,p,u]);return o.jsx(rt.Provider,{value:M,children:o.jsx(dn,{as:c,ownerState:x,className:Q(g.root,d),ref:n,...b,children:R})})}),pn=Me(o.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft"),hn=Me(o.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),fn=Me(o.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),bn=async e=>(console.log("Calendar event to be created:",e),{eventId:`temp_${Date.now()}`,meetLink:`https://meet.google.com/placeholder-${Date.now()}`}),xn=async(e,t)=>(console.log("Calendar event to be updated:",{eventId:e,updates:t}),!0),gn=async e=>{try{const{classId:t,startDate:n,recurrencePattern:s,daysOfWeek:a,duration:r,timeSlots:l}=e,d=nt(fe,"classes",t),c=await eo(d);if(!c.exists())throw new Error("Class not found");const m=c.data(),p=await Nt(je(fe,"schedules"),{classId:t,teacherId:m.teacherId,startDate:n.toISOString(),recurrencePattern:s,daysOfWeek:a,duration:r,timeSlots:Object.fromEntries(Object.entries(l).map(([x,g])=>[x,g.toISOString()])),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),u=[],b=12;for(let x=0;x<b;x++)for(const g of a){const y=new Date(l[g]);y.setDate(y.getDate()+x*7);const R={title:`${m.name} - Class Session`,description:`Regular class session for ${m.name}`,startTime:y.toISOString(),endTime:new Date(y.getTime()+r*6e4).toISOString(),attendees:m.studentIds||[]},{eventId:M,meetLink:N}=await bn(R),T=await Nt(je(fe,"sessions"),{scheduleId:p.id,classId:t,teacherId:m.teacherId,date:y.toISOString(),duration:r,status:"scheduled",eventId:M,meetLink:N,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});u.push(T.id)}return await wt(p,{sessionIds:u}),{scheduleId:p.id,sessions:u}}catch(t){throw console.error("Error creating schedule:",t),t}},vn=async(e,t)=>{try{const n=je(fe,"schedules");let s;if(t==="teacher")s=Re(n,Oe("teacherId","==",e));else if(t==="student"){const l=je(fe,"classes"),d=Re(l,Oe("studentIds","array-contains",e)),c=await $e(d),m=[];if(c.forEach(p=>m.push(p.id)),m.length===0)return[];s=Re(n,Oe("classId","in",m))}else if(t==="admin")s=Re(n);else throw new Error("Invalid user role");const a=await $e(s),r=[];return a.forEach(l=>{r.push({id:l.id,...l.data()})}),r}catch(n){throw console.error("Error fetching schedules:",n),n}},Cn=async(e,t)=>{try{const n=nt(fe,"schedules",e);return await wt(n,{...t,updatedAt:new Date().toISOString()}),!0}catch(n){throw console.error("Error updating schedule:",n),n}},yn=async(e,t,n)=>{var s;try{const a=nt(fe,"schedules",e),r=await eo(a);if(!r.exists())throw new Error("Schedule not found");const l=r.data(),d={...l.timeSlots};return n.timeSlot&&(d[t]=n.timeSlot.toISOString()),await wt(a,{timeSlots:d,updatedAt:new Date().toISOString()}),(s=l.eventIds)!=null&&s[t]&&await xn(l.eventIds[t],{startTime:n.timeSlot.toISOString(),endTime:new Date(n.timeSlot.getTime()+l.duration*6e4).toISOString()}),!0}catch(a){throw console.error("Error updating session:",a),a}},Sn=async e=>{try{const t=nt(fe,"schedules",e);return await Io(t),!0}catch(t){throw console.error("Error deleting schedule:",t),t}};function Tn(e){return re("MuiTimeClock",e)}ae("MuiTimeClock",["root","arrowSwitcher"]);const ze=220,ye=36,Ke={x:ze/2,y:ze/2},fo={x:Ke.x,y:0},wn=fo.x-Ke.x,kn=fo.y-Ke.y,Dn=e=>e*(180/Math.PI),bo=(e,t,n)=>{const s=t-Ke.x,a=n-Ke.y,r=Math.atan2(wn,kn)-Math.atan2(s,a);let l=Dn(r);l=Math.round(l/e)*e,l%=360;const d=Math.floor(l/e)||0,c=s**2+a**2,m=Math.sqrt(c);return{value:d,distance:m}},jn=(e,t,n=1)=>{const s=n*6;let{value:a}=bo(s,e,t);return a=a*n%60,a},Mn=(e,t,n)=>{const{value:s,distance:a}=bo(30,e,t);let r=s||12;return n?r%=12:a<ze/2-ye&&(r+=12,r%=24),r};function Pn(e){return re("MuiClockPointer",e)}ae("MuiClockPointer",["root","thumb"]);const In=["className","hasSelected","isInner","type","viewValue"],Rn=e=>{const{classes:t}=e;return ne({root:["root"],thumb:["thumb"]},Pn,t)},Ln=$("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px",variants:[{props:{shouldAnimate:!0},style:{transition:e.transitions.create(["transform","height"])}}]})),Fn=$("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:`calc(50% - ${ye/2}px)`,border:`${(ye-4)/2}px solid ${(e.vars||e).palette.primary.main}`,boxSizing:"content-box",variants:[{props:{hasSelected:!0},style:{backgroundColor:(e.vars||e).palette.primary.main}}]}));function Vn(e){const t=de({props:e,name:"MuiClockPointer"}),{className:n,isInner:s,type:a,viewValue:r}=t,l=pe(t,In),d=f.useRef(a);f.useEffect(()=>{d.current=a},[a]);const c=S({},t,{shouldAnimate:d.current!==a}),m=Rn(c),p=()=>{let b=360/(a==="hours"?12:60)*r;return a==="hours"&&r>12&&(b-=360),{height:Math.round((s?.26:.4)*ze),transform:`rotateZ(${b}deg)`}};return o.jsx(Ln,S({style:p(),className:Q(m.root,n),ownerState:c},l,{children:o.jsx(Fn,{ownerState:c,className:m.thumb})}))}function Nn(e){return re("MuiClock",e)}ae("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText","selected"]);const On=e=>{const{classes:t,meridiemMode:n}=e;return ne({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton",n==="am"&&"selected"],pmButton:["pmButton",n==="pm"&&"selected"],meridiemText:["meridiemText"]},Nn,t)},$n=$("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)})),An=$("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),En=$("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),Wn=$("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none",variants:[{props:{disabled:!1},style:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}}]}),zn=$("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})(({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})),xo=(e,t)=>({zIndex:1,bottom:8,paddingLeft:4,paddingRight:4,width:ye,variants:[{props:{meridiemMode:t},style:{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}}]}),Bn=$(Le,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})(({theme:e})=>S({},xo(e,"am"),{position:"absolute",left:8})),_n=$(Le,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})(({theme:e})=>S({},xo(e,"pm"),{position:"absolute",right:8})),Kt=$(te,{name:"MuiClock",slot:"meridiemText",overridesResolver:(e,t)=>t.meridiemText})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function Un(e){const t=de({props:e,name:"MuiClock"}),{ampm:n,ampmInClock:s,autoFocus:a,children:r,value:l,handleMeridiemChange:d,isTimeDisabled:c,meridiemMode:m,minutesStep:p=1,onChange:u,selectedId:b,type:x,viewValue:g,viewRange:[y,R],disabled:M=!1,readOnly:N,className:T}=t,w=t,P=Pe(),E=Ie(),v=f.useRef(!1),h=On(w),k=c(g,x),C=!n&&x==="hours"&&(g<1||g>12),D=(L,U)=>{M||N||c(L,x)||u(L,U)},q=(L,U)=>{let{offsetX:ie,offsetY:K}=L;if(ie===void 0){const Z=L.target.getBoundingClientRect();ie=L.changedTouches[0].clientX-Z.left,K=L.changedTouches[0].clientY-Z.top}const ue=x==="seconds"||x==="minutes"?jn(ie,K,p):Mn(ie,K,!!n);D(ue,U)},Y=L=>{v.current=!0,q(L,"shallow")},he=L=>{v.current&&(q(L,"finish"),v.current=!1),L.preventDefault()},B=L=>{L.buttons>0&&q(L.nativeEvent,"shallow")},A=L=>{v.current&&(v.current=!1),q(L.nativeEvent,"finish")},I=f.useMemo(()=>x==="hours"?!0:g%5===0,[x,g]),_=x==="minutes"?p:1,G=f.useRef(null);Ro(()=>{a&&G.current.focus()},[a]);const O=L=>Math.max(y,Math.min(R,L)),W=L=>(L+(R+1))%(R+1),X=L=>{if(!v.current)switch(L.key){case"Home":D(y,"partial"),L.preventDefault();break;case"End":D(R,"partial"),L.preventDefault();break;case"ArrowUp":D(W(g+_),"partial"),L.preventDefault();break;case"ArrowDown":D(W(g-_),"partial"),L.preventDefault();break;case"PageUp":D(O(g+5),"partial"),L.preventDefault();break;case"PageDown":D(O(g-5),"partial"),L.preventDefault();break;case"Enter":case" ":D(g,"finish"),L.preventDefault();break}};return o.jsxs($n,{className:Q(h.root,T),children:[o.jsxs(An,{className:h.clock,children:[o.jsx(Wn,{onTouchMove:Y,onTouchStart:Y,onTouchEnd:he,onMouseUp:A,onMouseMove:B,ownerState:{disabled:M},className:h.squareMask}),!k&&o.jsxs(f.Fragment,{children:[o.jsx(zn,{className:h.pin}),l!=null&&o.jsx(Vn,{type:x,viewValue:g,isInner:C,hasSelected:I})]}),o.jsx(En,{"aria-activedescendant":b,"aria-label":E.clockLabelText(x,l,P,l==null?null:P.format(l,"fullTime")),ref:G,role:"listbox",onKeyDown:X,tabIndex:0,className:h.wrapper,children:r})]}),n&&s&&o.jsxs(f.Fragment,{children:[o.jsx(Bn,{onClick:N?void 0:()=>d("am"),disabled:M||m===null,ownerState:w,className:h.amButton,title:Ce(P,"am"),children:o.jsx(Kt,{variant:"caption",className:h.meridiemText,children:Ce(P,"am")})}),o.jsx(_n,{disabled:M||m===null,onClick:N?void 0:()=>d("pm"),ownerState:w,className:h.pmButton,title:Ce(P,"pm"),children:o.jsx(Kt,{variant:"caption",className:h.meridiemText,children:Ce(P,"pm")})})]})]})}function Hn(e){return re("MuiClockNumber",e)}const Xe=ae("MuiClockNumber",["root","selected","disabled"]),qn=["className","disabled","index","inner","label","selected"],Gn=e=>{const{classes:t,selected:n,disabled:s}=e;return ne({root:["root",n&&"selected",s&&"disabled"]},Hn,t)},Kn=$("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${Xe.disabled}`]:t.disabled},{[`&.${Xe.selected}`]:t.selected}]})(({theme:e})=>({height:ye,width:ye,position:"absolute",left:`calc((100% - ${ye}px) / 2)`,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},[`&.${Xe.selected}`]:{color:(e.vars||e).palette.primary.contrastText},[`&.${Xe.disabled}`]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled},variants:[{props:{inner:!0},style:S({},e.typography.body2,{color:(e.vars||e).palette.text.secondary})}]}));function go(e){const t=de({props:e,name:"MuiClockNumber"}),{className:n,disabled:s,index:a,inner:r,label:l,selected:d}=t,c=pe(t,qn),m=t,p=Gn(m),u=a%12/12*Math.PI*2-Math.PI/2,b=(ze-ye-2)/2*(r?.65:1),x=Math.round(Math.cos(u)*b),g=Math.round(Math.sin(u)*b);return o.jsx(Kn,S({className:Q(p.root,n),"aria-disabled":s?!0:void 0,"aria-selected":d?!0:void 0,role:"option",style:{transform:`translate(${x}px, ${g+(ze-ye)/2}px`},ownerState:m},c,{children:l}))}const Yn=({ampm:e,value:t,getClockNumberText:n,isDisabled:s,selectedId:a,utils:r})=>{const l=t?r.getHours(t):null,d=[],c=e?1:0,m=e?12:23,p=u=>l===null?!1:e?u===12?l===12||l===0:l===u||l-12===u:l===u;for(let u=c;u<=m;u+=1){let b=u.toString();u===0&&(b="00");const x=!e&&(u===0||u>12);b=r.formatNumber(b);const g=p(u);d.push(o.jsx(go,{id:g?a:void 0,index:u,inner:x,selected:g,disabled:s(u),label:b,"aria-label":n(b)},u))}return d},Yt=({utils:e,value:t,isDisabled:n,getClockNumberText:s,selectedId:a})=>{const r=e.formatNumber;return[[5,r("05")],[10,r("10")],[15,r("15")],[20,r("20")],[25,r("25")],[30,r("30")],[35,r("35")],[40,r("40")],[45,r("45")],[50,r("50")],[55,r("55")],[0,r("00")]].map(([l,d],c)=>{const m=l===t;return o.jsx(go,{label:d,id:m?a:void 0,index:c+1,inner:!1,disabled:n(l),selected:m,"aria-label":s(d)},l)})},Lt=({value:e,referenceDate:t,utils:n,props:s,timezone:a})=>{const r=f.useMemo(()=>Se.getInitialReferenceValue({value:e,utils:n,props:s,referenceDate:t,granularity:Ho.day,timezone:a,getTodayDate:()=>qo(n,a,"date")}),[]);return e??r},Qn=["ampm","ampmInClock","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","timezone"],Jn=e=>{const{classes:t}=e;return ne({root:["root"],arrowSwitcher:["arrowSwitcher"]},Tn,t)},Xn=$(Dt,{name:"MuiTimeClock",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",position:"relative"}),Zn=$(Go,{name:"MuiTimeClock",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15}),ea=["hours","minutes"],ta=f.forwardRef(function(t,n){const s=Pe(),a=de({props:t,name:"MuiTimeClock"}),{ampm:r=s.is12HourCycleInCurrentLocale(),ampmInClock:l=!1,autoFocus:d,slots:c,slotProps:m,value:p,defaultValue:u,referenceDate:b,disableIgnoringDatePartForTimeValidation:x=!1,maxTime:g,minTime:y,disableFuture:R,disablePast:M,minutesStep:N=1,shouldDisableTime:T,showViewSwitcher:w,onChange:P,view:E,views:v=ea,openTo:h,onViewChange:k,focusedView:C,onFocusedViewChange:D,className:q,disabled:Y,readOnly:he,timezone:B}=a,A=pe(a,Qn),{value:I,handleValueChange:_,timezone:G}=jt({name:"TimeClock",timezone:B,value:p,defaultValue:u,referenceDate:b,onChange:P,valueManager:Se}),O=Lt({value:I,referenceDate:b,utils:s,props:a,timezone:G}),W=Ie(),X=Mt(G),{view:L,setView:U,previousView:ie,nextView:K,setValueAndGoToNextView:ue}=Pt({view:E,views:v,openTo:h,onViewChange:k,onChange:_,focusedView:C,onFocusedViewChange:D}),{meridiemMode:Z,handleMeridiemChange:ce}=It(O,r,ue),ge=f.useCallback((ee,oe)=>{const j=at(x,s),H=oe==="hours"||oe==="minutes"&&v.includes("seconds"),F=({start:z,end:me})=>!(y&&j(y,me)||g&&j(z,g)||R&&j(z,X)||M&&j(X,H?me:z)),V=(z,me=1)=>{if(z%me!==0)return!1;if(T)switch(oe){case"hours":return!T(s.setHours(O,z),"hours");case"minutes":return!T(s.setMinutes(O,z),"minutes");case"seconds":return!T(s.setSeconds(O,z),"seconds");default:return!1}return!0};switch(oe){case"hours":{const z=et(ee,Z,r),me=s.setHours(O,z);if(s.getHours(me)!==z)return!0;const we=s.setSeconds(s.setMinutes(me,0),0),_e=s.setSeconds(s.setMinutes(me,59),59);return!F({start:we,end:_e})||!V(z)}case"minutes":{const z=s.setMinutes(O,ee),me=s.setSeconds(z,0),we=s.setSeconds(z,59);return!F({start:me,end:we})||!V(ee,N)}case"seconds":{const z=s.setSeconds(O,ee);return!F({start:z,end:z})||!V(ee)}default:throw new Error("not supported")}},[r,O,x,g,Z,y,N,T,s,R,M,X,v]),le=Lo(),Ne=f.useMemo(()=>{switch(L){case"hours":{const ee=(H,F)=>{const V=et(H,Z,r);ue(s.setHours(O,V),F,"hours")},oe=s.getHours(O);let j;return r?oe>12?j=[12,23]:j=[0,11]:j=[0,23],{onChange:ee,viewValue:oe,children:Yn({value:I,utils:s,ampm:r,onChange:ee,getClockNumberText:W.hoursClockNumberText,isDisabled:H=>Y||ge(H,"hours"),selectedId:le}),viewRange:j}}case"minutes":{const ee=s.getMinutes(O),oe=(j,H)=>{ue(s.setMinutes(O,j),H,"minutes")};return{viewValue:ee,onChange:oe,children:Yt({utils:s,value:ee,onChange:oe,getClockNumberText:W.minutesClockNumberText,isDisabled:j=>Y||ge(j,"minutes"),selectedId:le}),viewRange:[0,59]}}case"seconds":{const ee=s.getSeconds(O),oe=(j,H)=>{ue(s.setSeconds(O,j),H,"seconds")};return{viewValue:ee,onChange:oe,children:Yt({utils:s,value:ee,onChange:oe,getClockNumberText:W.secondsClockNumberText,isDisabled:j=>Y||ge(j,"seconds"),selectedId:le}),viewRange:[0,59]}}default:throw new Error("You must provide the type for ClockView")}},[L,s,I,r,W.hoursClockNumberText,W.minutesClockNumberText,W.secondsClockNumberText,Z,ue,O,ge,le,Y]),be=a,Te=Jn(be);return o.jsxs(Xn,S({ref:n,className:Q(Te.root,q),ownerState:be},A,{children:[o.jsx(Un,S({autoFocus:d??!!C,ampmInClock:l&&v.includes("hours"),value:I,type:L,ampm:r,minutesStep:N,isTimeDisabled:ge,meridiemMode:Z,handleMeridiemChange:ce,selectedId:le,disabled:Y,readOnly:he},Ne)),w&&o.jsx(Zn,{className:Te.arrowSwitcher,slots:c,slotProps:m,onGoToPrevious:()=>U(ie),isPreviousDisabled:!ie,previousLabel:W.openPreviousView,onGoToNext:()=>U(K),isNextDisabled:!K,nextLabel:W.openNextView,ownerState:be})]}))});function oa(e){return re("MuiDigitalClock",e)}const sa=ae("MuiDigitalClock",["root","list","item"]),na=["ampm","timeStep","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","views","skipDisabled","timezone"],aa=e=>{const{classes:t}=e;return ne({root:["root"],list:["list"],item:["item"]},oa,t)},ra=$(Dt,{name:"MuiDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})({overflowY:"auto",width:"100%","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},maxHeight:io,variants:[{props:{alreadyRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]}),ia=$(to,{name:"MuiDigitalClock",slot:"List",overridesResolver:(e,t)=>t.list})({padding:0}),la=$(Fe,{name:"MuiDigitalClock",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:"8px 16px",margin:"2px 4px","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:We(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:We(e.palette.primary.main,e.palette.action.focusOpacity)}})),ca=f.forwardRef(function(t,n){const s=Pe(),a=f.useRef(null),r=oo(n,a),l=f.useRef(null),d=de({props:t,name:"MuiDigitalClock"}),{ampm:c=s.is12HourCycleInCurrentLocale(),timeStep:m=30,autoFocus:p,slots:u,slotProps:b,value:x,defaultValue:g,referenceDate:y,disableIgnoringDatePartForTimeValidation:R=!1,maxTime:M,minTime:N,disableFuture:T,disablePast:w,minutesStep:P=1,shouldDisableTime:E,onChange:v,view:h,openTo:k,onViewChange:C,focusedView:D,onFocusedViewChange:q,className:Y,disabled:he,readOnly:B,views:A=["hours"],skipDisabled:I=!1,timezone:_}=d,G=pe(d,na),{value:O,handleValueChange:W,timezone:X}=jt({name:"DigitalClock",timezone:_,value:x,defaultValue:g,referenceDate:y,onChange:v,valueManager:Se}),L=Ie(),U=Mt(X),ie=f.useMemo(()=>S({},d,{alreadyRendered:!!a.current}),[d]),K=aa(ie),ue=(u==null?void 0:u.digitalClockItem)??la,Z=so({elementType:ue,externalSlotProps:b==null?void 0:b.digitalClockItem,ownerState:{},className:K.item}),ce=Lt({value:O,referenceDate:y,utils:s,props:d,timezone:X}),ge=Ze(j=>W(j,"finish","hours")),{setValueAndGoToNextView:le}=Pt({view:h,views:A,openTo:k,onViewChange:C,onChange:ge,focusedView:D,onFocusedViewChange:q}),Ne=Ze(j=>{le(j,"finish")});f.useEffect(()=>{if(a.current===null)return;const j=a.current.querySelector('[role="listbox"] [role="option"][tabindex="0"], [role="listbox"] [role="option"][aria-selected="true"]');if(!j)return;const H=j.offsetTop;(p||D)&&j.focus(),a.current.scrollTop=H-4});const be=f.useCallback(j=>{const H=at(R,s),F=()=>!(N&&H(N,j)||M&&H(j,M)||T&&H(j,U)||w&&H(U,j)),V=()=>s.getMinutes(j)%P!==0?!1:E?!E(j,"hours"):!0;return!F()||!V()},[R,s,N,M,T,U,w,P,E]),Te=f.useMemo(()=>{const j=[];let F=s.startOfDay(ce);for(;s.isSameDay(ce,F);)j.push(F),F=s.addMinutes(F,m);return j},[ce,m,s]),ee=Te.findIndex(j=>s.isEqual(j,ce)),oe=j=>{switch(j.key){case"PageUp":{const H=tt(l.current)-5,F=l.current.children,V=Math.max(0,H),z=F[V];z&&z.focus(),j.preventDefault();break}case"PageDown":{const H=tt(l.current)+5,F=l.current.children,V=Math.min(F.length-1,H),z=F[V];z&&z.focus(),j.preventDefault();break}}};return o.jsx(ra,S({ref:r,className:Q(K.root,Y),ownerState:ie},G,{children:o.jsx(ia,{ref:l,role:"listbox","aria-label":L.timePickerToolbarTitle,className:K.list,onKeyDown:oe,children:Te.map((j,H)=>{if(I&&be(j))return null;const F=s.isEqual(j,O),V=s.format(j,c?"fullTime12h":"fullTime24h"),z=ee===H||ee===-1&&H===0?0:-1;return o.jsx(ue,S({onClick:()=>!B&&Ne(j),selected:F,disabled:he||be(j),disableRipple:B,role:"option","aria-disabled":B,"aria-selected":F,tabIndex:z},Z,{children:V}),`${j.valueOf()}-${V}`)})})}))});function da(e){return re("MuiMultiSectionDigitalClock",e)}const Qt=ae("MuiMultiSectionDigitalClock",["root"]);function ua(e){return re("MuiMultiSectionDigitalClockSection",e)}const ma=ae("MuiMultiSectionDigitalClockSection",["root","item"]),pa=["autoFocus","onChange","className","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],ha=e=>{const{classes:t}=e;return ne({root:["root"],item:["item"]},ua,t)},fa=$(to,{name:"MuiMultiSectionDigitalClockSection",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({maxHeight:io,width:56,padding:0,overflow:"hidden","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"auto"},"@media (pointer: fine)":{"&:hover":{overflowY:"auto"}},"@media (pointer: none), (pointer: coarse)":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},"&::after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"},variants:[{props:{alreadyRendered:!0},style:{"@media (prefers-reduced-motion: no-preference)":{scrollBehavior:"smooth"}}}]})),ba=$(Fe,{name:"MuiMultiSectionDigitalClockSection",slot:"Item",overridesResolver:(e,t)=>t.item})(({theme:e})=>({padding:8,margin:"2px 4px",width:Ue,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:We(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:We(e.palette.primary.main,e.palette.action.focusOpacity)}})),xa=f.forwardRef(function(t,n){const s=f.useRef(null),a=oo(n,s),r=f.useRef(null),l=de({props:t,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:d,onChange:c,className:m,disabled:p,readOnly:u,items:b,active:x,slots:g,slotProps:y,skipDisabled:R}=l,M=pe(l,pa),N=f.useMemo(()=>S({},l,{alreadyRendered:!!s.current}),[l]),T=ha(N),w=(g==null?void 0:g.digitalClockSectionItem)??ba;f.useEffect(()=>{if(s.current===null)return;const v=s.current.querySelector('[role="option"][tabindex="0"], [role="option"][aria-selected="true"]');if(x&&d&&v&&v.focus(),!v||r.current===v)return;r.current=v;const h=v.offsetTop;s.current.scrollTop=h-4});const P=b.findIndex(v=>v.isFocused(v.value)),E=v=>{switch(v.key){case"PageUp":{const h=tt(s.current)-5,k=s.current.children,C=Math.max(0,h),D=k[C];D&&D.focus(),v.preventDefault();break}case"PageDown":{const h=tt(s.current)+5,k=s.current.children,C=Math.min(k.length-1,h),D=k[C];D&&D.focus(),v.preventDefault();break}}};return o.jsx(fa,S({ref:a,className:Q(T.root,m),ownerState:N,autoFocusItem:d&&x,role:"listbox",onKeyDown:E},M,{children:b.map((v,h)=>{var Y;const k=(Y=v.isDisabled)==null?void 0:Y.call(v,v.value),C=p||k;if(R&&C)return null;const D=v.isSelected(v.value),q=P===h||P===-1&&h===0?0:-1;return o.jsx(w,S({onClick:()=>!u&&c(v.value),selected:D,disabled:C,disableRipple:u,role:"option","aria-disabled":u||C||void 0,"aria-label":v.ariaLabel,"aria-selected":D,tabIndex:q,className:T.item},y==null?void 0:y.digitalClockSectionItem,{children:v.label}),v.label)})}))}),ga=({now:e,value:t,utils:n,ampm:s,isDisabled:a,resolveAriaLabel:r,timeStep:l,valueOrReferenceDate:d})=>{const c=t?n.getHours(t):null,m=[],p=(x,g)=>{const y=g??c;return y===null?!1:s?x===12?y===12||y===0:y===x||y-12===x:y===x},u=x=>p(x,n.getHours(d)),b=s?11:23;for(let x=0;x<=b;x+=l){let g=n.format(n.setHours(e,x),s?"hours12h":"hours24h");const y=r(parseInt(g,10).toString());g=n.formatNumber(g),m.push({value:x,label:g,isSelected:p,isDisabled:a,isFocused:u,ariaLabel:y})}return m},Jt=({value:e,utils:t,isDisabled:n,timeStep:s,resolveLabel:a,resolveAriaLabel:r,hasValue:l=!0})=>{const d=m=>e===null?!1:l&&e===m,c=m=>e===m;return[...Array.from({length:Math.ceil(60/s)},(m,p)=>{const u=s*p;return{value:u,label:t.formatNumber(a(u)),isDisabled:n,isSelected:d,isFocused:c,ariaLabel:r(u.toString())}})]},va=["ampm","timeSteps","autoFocus","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","skipDisabled","timezone"],Ca=e=>{const{classes:t}=e;return ne({root:["root"]},da,t)},ya=$(Dt,{name:"MuiMultiSectionDigitalClock",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",flexDirection:"row",width:"100%",borderBottom:`1px solid ${(e.vars||e).palette.divider}`})),Sa=f.forwardRef(function(t,n){const s=Pe(),a=kt(),r=de({props:t,name:"MuiMultiSectionDigitalClock"}),{ampm:l=s.is12HourCycleInCurrentLocale(),timeSteps:d,autoFocus:c,slots:m,slotProps:p,value:u,defaultValue:b,referenceDate:x,disableIgnoringDatePartForTimeValidation:g=!1,maxTime:y,minTime:R,disableFuture:M,disablePast:N,minutesStep:T=1,shouldDisableTime:w,onChange:P,view:E,views:v=["hours","minutes"],openTo:h,onViewChange:k,focusedView:C,onFocusedViewChange:D,className:q,disabled:Y,readOnly:he,skipDisabled:B=!1,timezone:A}=r,I=pe(r,va),{value:_,handleValueChange:G,timezone:O}=jt({name:"MultiSectionDigitalClock",timezone:A,value:u,defaultValue:b,referenceDate:x,onChange:P,valueManager:Se}),W=Ie(),X=Mt(O),L=f.useMemo(()=>S({hours:1,minutes:5,seconds:5},d),[d]),U=Lt({value:_,referenceDate:x,utils:s,props:r,timezone:O}),ie=Ze((F,V,z)=>G(F,V,z)),K=f.useMemo(()=>!l||!v.includes("hours")||v.includes("meridiem")?v:[...v,"meridiem"],[l,v]),{view:ue,setValueAndGoToNextView:Z,focusedView:ce}=Pt({view:E,views:K,openTo:h,onViewChange:k,onChange:ie,focusedView:C,onFocusedViewChange:D}),ge=Ze(F=>{Z(F,"finish","meridiem")}),{meridiemMode:le,handleMeridiemChange:Ne}=It(U,l,ge,"finish"),be=f.useCallback((F,V)=>{const z=at(g,s),me=V==="hours"||V==="minutes"&&K.includes("seconds"),we=({start:se,end:xe})=>!(R&&z(R,xe)||y&&z(se,y)||M&&z(se,X)||N&&z(X,me?xe:se)),_e=(se,xe=1)=>{if(se%xe!==0)return!1;if(w)switch(V){case"hours":return!w(s.setHours(U,se),"hours");case"minutes":return!w(s.setMinutes(U,se),"minutes");case"seconds":return!w(s.setSeconds(U,se),"seconds");default:return!1}return!0};switch(V){case"hours":{const se=et(F,le,l),xe=s.setHours(U,se);if(s.getHours(xe)!==se)return!0;const Ye=s.setSeconds(s.setMinutes(xe,0),0),jo=s.setSeconds(s.setMinutes(xe,59),59);return!we({start:Ye,end:jo})||!_e(se)}case"minutes":{const se=s.setMinutes(U,F),xe=s.setSeconds(se,0),Ye=s.setSeconds(se,59);return!we({start:xe,end:Ye})||!_e(F,T)}case"seconds":{const se=s.setSeconds(U,F);return!we({start:se,end:se})||!_e(F)}default:throw new Error("not supported")}},[l,U,g,y,le,R,T,w,s,M,N,X,K]),Te=f.useCallback(F=>{switch(F){case"hours":return{onChange:V=>{const z=et(V,le,l);Z(s.setHours(U,z),"finish","hours")},items:ga({now:X,value:_,ampm:l,utils:s,isDisabled:V=>be(V,"hours"),timeStep:L.hours,resolveAriaLabel:W.hoursClockNumberText,valueOrReferenceDate:U})};case"minutes":return{onChange:V=>{Z(s.setMinutes(U,V),"finish","minutes")},items:Jt({value:s.getMinutes(U),utils:s,isDisabled:V=>be(V,"minutes"),resolveLabel:V=>s.format(s.setMinutes(X,V),"minutes"),timeStep:L.minutes,hasValue:!!_,resolveAriaLabel:W.minutesClockNumberText})};case"seconds":return{onChange:V=>{Z(s.setSeconds(U,V),"finish","seconds")},items:Jt({value:s.getSeconds(U),utils:s,isDisabled:V=>be(V,"seconds"),resolveLabel:V=>s.format(s.setSeconds(X,V),"seconds"),timeStep:L.seconds,hasValue:!!_,resolveAriaLabel:W.secondsClockNumberText})};case"meridiem":{const V=Ce(s,"am"),z=Ce(s,"pm");return{onChange:Ne,items:[{value:"am",label:V,isSelected:()=>!!_&&le==="am",isFocused:()=>!!U&&le==="am",ariaLabel:V},{value:"pm",label:z,isSelected:()=>!!_&&le==="pm",isFocused:()=>!!U&&le==="pm",ariaLabel:z}]}}default:throw new Error(`Unknown view: ${F} found.`)}},[X,_,l,s,L.hours,L.minutes,L.seconds,W.hoursClockNumberText,W.minutesClockNumberText,W.secondsClockNumberText,le,Z,U,be,Ne]),ee=f.useMemo(()=>{if(!a)return K;const F=K.filter(V=>V!=="meridiem");return F.reverse(),K.includes("meridiem")&&F.push("meridiem"),F},[a,K]),oe=f.useMemo(()=>K.reduce((F,V)=>S({},F,{[V]:Te(V)}),{}),[K,Te]),j=r,H=Ca(j);return o.jsx(ya,S({ref:n,className:Q(H.root,q),ownerState:j,role:"group"},I,{children:ee.map(F=>o.jsx(xa,{items:oe[F].items,onChange:oe[F].onChange,active:ue===F,autoFocus:c??ce===F,disabled:Y,readOnly:he,slots:m,slotProps:p,skipDisabled:B,"aria-label":W.selectViewText(F)},F))}))}),vo=({adapter:e,value:t,timezone:n,props:s})=>{if(t===null)return null;const{minTime:a,maxTime:r,minutesStep:l,shouldDisableTime:d,disableIgnoringDatePartForTimeValidation:c=!1,disablePast:m,disableFuture:p}=s,u=e.utils.date(void 0,n),b=at(c,e.utils);switch(!0){case!e.utils.isValid(t):return"invalidDate";case!!(a&&b(a,t)):return"minTime";case!!(r&&b(t,r)):return"maxTime";case!!(p&&e.utils.isAfter(t,u)):return"disableFuture";case!!(m&&e.utils.isBefore(t,u)):return"disablePast";case!!(d&&d(t,"hours")):return"shouldDisableTime-hours";case!!(d&&d(t,"minutes")):return"shouldDisableTime-minutes";case!!(d&&d(t,"seconds")):return"shouldDisableTime-seconds";case!!(l&&e.utils.getMinutes(t)%l!==0):return"minutesStep";default:return null}};vo.valueManager=Se;const it=({adapter:e,value:t,timezone:n,props:s})=>{const a=Ko({adapter:e,value:t,timezone:n,props:s});return a!==null?a:vo({adapter:e,value:t,timezone:n,props:s})};it.valueManager=Se;const Ta=e=>{const t=Yo(e),{forwardedProps:n,internalProps:s}=Qo(t,"date-time");return Jo({forwardedProps:n,internalProps:s,valueManager:Se,fieldValueManager:Xo,validator:it,valueType:"date-time"})},wa=["slots","slotProps","InputProps","inputProps"],Co=f.forwardRef(function(t,n){const s=de({props:t,name:"MuiDateTimeField"}),{slots:a,slotProps:r,InputProps:l,inputProps:d}=s,c=pe(s,wa),m=s,p=(a==null?void 0:a.textField)??(t.enableAccessibleFieldDOMStructure?Zo:qe),u=so({elementType:p,externalSlotProps:r==null?void 0:r.textField,externalForwardedProps:c,ownerState:m,additionalProps:{ref:n}});u.inputProps=S({},d,u.inputProps),u.InputProps=S({},l,u.InputProps);const b=Ta(u),x=es(b),g=ts(S({},x,{slots:a,slotProps:r}));return o.jsx(p,S({},g))});function ka(e){return re("MuiPickersToolbarText",e)}const St=ae("MuiPickersToolbarText",["root","selected"]),Da=["className","selected","value"],ja=e=>{const{classes:t,selected:n}=e;return ne({root:["root",n&&"selected"]},ka,t)},Ma=$(te,{name:"MuiPickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${St.selected}`]:t.selected}]})(({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,[`&.${St.selected}`]:{color:(e.vars||e).palette.text.primary}})),yo=f.forwardRef(function(t,n){const s=de({props:t,name:"MuiPickersToolbarText"}),{className:a,value:r}=s,l=pe(s,Da),d=ja(s);return o.jsx(Ma,S({ref:n,className:Q(d.root,a),component:"span"},l,{children:r}))}),Pa=["align","className","selected","typographyClassName","value","variant","width"],Ia=e=>{const{classes:t}=e;return ne({root:["root"]},os,t)},Ra=$(ve,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),ke=f.forwardRef(function(t,n){const s=de({props:t,name:"MuiPickersToolbarButton"}),{align:a,className:r,selected:l,typographyClassName:d,value:c,variant:m,width:p}=s,u=pe(s,Pa),b=Ia(s);return o.jsx(Ra,S({variant:"text",ref:n,className:Q(b.root,r)},p?{sx:{width:p}}:{},u,{children:o.jsx(yo,{align:a,className:d,variant:m,value:c,selected:l})}))}),ut=({view:e,onViewChange:t,focusedView:n,onFocusedViewChange:s,views:a,value:r,defaultValue:l,referenceDate:d,onChange:c,className:m,classes:p,disableFuture:u,disablePast:b,minTime:x,maxTime:g,shouldDisableTime:y,minutesStep:R,ampm:M,ampmInClock:N,slots:T,slotProps:w,readOnly:P,disabled:E,sx:v,autoFocus:h,showViewSwitcher:k,disableIgnoringDatePartForTimeValidation:C,timezone:D})=>o.jsx(ta,{view:e,onViewChange:t,focusedView:n&&Ge(n)?n:null,onFocusedViewChange:s,views:a.filter(Ge),value:r,defaultValue:l,referenceDate:d,onChange:c,className:m,classes:p,disableFuture:u,disablePast:b,minTime:x,maxTime:g,shouldDisableTime:y,minutesStep:R,ampm:M,ampmInClock:N,slots:T,slotProps:w,readOnly:P,disabled:E,sx:v,autoFocus:h,showViewSwitcher:k,disableIgnoringDatePartForTimeValidation:C,timezone:D}),La=({view:e,onViewChange:t,focusedView:n,onFocusedViewChange:s,views:a,value:r,defaultValue:l,referenceDate:d,onChange:c,className:m,classes:p,disableFuture:u,disablePast:b,minTime:x,maxTime:g,shouldDisableTime:y,minutesStep:R,ampm:M,slots:N,slotProps:T,readOnly:w,disabled:P,sx:E,autoFocus:v,disableIgnoringDatePartForTimeValidation:h,timeSteps:k,skipDisabled:C,timezone:D})=>o.jsx(ca,{view:e,onViewChange:t,focusedView:n,onFocusedViewChange:s,views:a.filter(Ge),value:r,defaultValue:l,referenceDate:d,onChange:c,className:m,classes:p,disableFuture:u,disablePast:b,minTime:x,maxTime:g,shouldDisableTime:y,minutesStep:R,ampm:M,slots:N,slotProps:T,readOnly:w,disabled:P,sx:E,autoFocus:v,disableIgnoringDatePartForTimeValidation:h,timeStep:k==null?void 0:k.minutes,skipDisabled:C,timezone:D}),Xt=({view:e,onViewChange:t,focusedView:n,onFocusedViewChange:s,views:a,value:r,defaultValue:l,referenceDate:d,onChange:c,className:m,classes:p,disableFuture:u,disablePast:b,minTime:x,maxTime:g,shouldDisableTime:y,minutesStep:R,ampm:M,slots:N,slotProps:T,readOnly:w,disabled:P,sx:E,autoFocus:v,disableIgnoringDatePartForTimeValidation:h,timeSteps:k,skipDisabled:C,timezone:D})=>o.jsx(Sa,{view:e,onViewChange:t,focusedView:n,onFocusedViewChange:s,views:a.filter(Ge),value:r,defaultValue:l,referenceDate:d,onChange:c,className:m,classes:p,disableFuture:u,disablePast:b,minTime:x,maxTime:g,shouldDisableTime:y,minutesStep:R,ampm:M,slots:N,slotProps:T,readOnly:w,disabled:P,sx:E,autoFocus:v,disableIgnoringDatePartForTimeValidation:h,timeSteps:k,skipDisabled:C,timezone:D}),Fa=["views","format"],So=(e,t,n)=>{let{views:s,format:a}=t,r=pe(t,Fa);if(a)return a;const l=[],d=[];if(s.forEach(p=>{Ge(p)?d.push(p):ot(p)&&l.push(p)}),d.length===0)return zt(e,S({views:l},r),!1);if(l.length===0)return Bt(e,S({views:d},r));const c=Bt(e,S({views:d},r));return`${zt(e,S({views:l},r),!1)} ${c}`},Va=(e,t,n)=>n?t.filter(s=>!He(s)||s==="hours"):e?[...t,"meridiem"]:t,Na=(e,t)=>24*60/((e.hours??1)*(e.minutes??5))<=t;function Oa({thresholdToRenderTimeInASingleColumn:e,ampm:t,timeSteps:n,views:s}){const a=e??24,r=S({hours:1,minutes:5,seconds:5},n),l=Na(r,a);return{thresholdToRenderTimeInASingleColumn:a,timeSteps:r,shouldRenderTimeInASingleColumn:l,views:Va(t,s,l)}}function $a(e){return re("MuiDateTimePickerTabs",e)}ae("MuiDateTimePickerTabs",["root"]);const Aa=e=>ot(e)?"date":"time",Ea=e=>e==="date"?"day":"hours",Wa=e=>{const{classes:t}=e;return ne({root:["root"]},$a,t)},za=$(mo,{name:"MuiDateTimePickerTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({boxShadow:`0 -1px 0 0 inset ${(e.vars||e).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(e.vars||e).palette.divider}`,[`& .${xs.indicator}`]:{bottom:"auto",top:0}}})),Ba=function(t){const n=de({props:t,name:"MuiDateTimePickerTabs"}),{dateIcon:s=o.jsx(ss,{}),onViewChange:a,timeIcon:r=o.jsx(ns,{}),view:l,hidden:d=typeof window>"u"||window.innerHeight<667,className:c,sx:m}=n,p=Ie(),u=Wa(n),b=(x,g)=>{a(Ea(g))};return d?null:o.jsxs(za,{ownerState:n,variant:"fullWidth",value:Aa(l),onChange:b,className:Q(c,u.root),sx:m,children:[o.jsx(st,{value:"date","aria-label":p.dateTableLabel,icon:o.jsx(f.Fragment,{children:s})}),o.jsx(st,{value:"time","aria-label":p.timeTableLabel,icon:o.jsx(f.Fragment,{children:r})})]})};function _a(e){return re("MuiDateTimePickerToolbar",e)}const mt=ae("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),Ua=["ampm","ampmInClock","value","onChange","view","isLandscape","onViewChange","toolbarFormat","toolbarPlaceholder","views","disabled","readOnly","toolbarVariant","toolbarTitle","className"],Ha=e=>{const{classes:t,isLandscape:n,isRtl:s}=e;return ne({root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer",s&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer",s&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",n&&"ampmLandscape"],ampmLabel:["ampmLabel"]},_a,t)},qa=$(as,{name:"MuiDateTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({paddingLeft:16,paddingRight:16,justifyContent:"space-around",position:"relative",variants:[{props:{toolbarVariant:"desktop"},style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,[`& .${rs.content} .${St.selected}`]:{color:(e.vars||e).palette.primary.main,fontWeight:e.typography.fontWeightBold}}},{props:{toolbarVariant:"desktop",isLandscape:!0},style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:{toolbarVariant:"desktop",isLandscape:!1},style:{paddingLeft:24,paddingRight:0}}]})),Ga=$("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer",overridesResolver:(e,t)=>t.dateContainer})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),Ka=$("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",overridesResolver:(e,t)=>t.timeContainer})({display:"flex",flexDirection:"row",variants:[{props:{isRtl:!0},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop",isLandscape:!1},style:{gap:9,marginRight:4,alignSelf:"flex-end"}},{props:({isLandscape:e,toolbarVariant:t})=>e&&t!=="desktop",style:{flexDirection:"column"}},{props:({isLandscape:e,toolbarVariant:t,isRtl:n})=>e&&t!=="desktop"&&n,style:{flexDirection:"column-reverse"}}]}),Ya=$("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",overridesResolver:(e,t)=>t.timeDigitsContainer})({display:"flex",variants:[{props:{isRtl:!0},style:{flexDirection:"row-reverse"}},{props:{toolbarVariant:"desktop"},style:{gap:1.5}}]}),Zt=$(yo,{name:"MuiDateTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})({margin:"0 4px 0 2px",cursor:"default",variants:[{props:{toolbarVariant:"desktop"},style:{margin:0}}]}),Qa=$("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,t)=>[{[`.${mt.ampmLabel}`]:t.ampmLabel},{[`&.${mt.ampmLandscape}`]:t.ampmLandscape},t.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${mt.ampmLabel}`]:{fontSize:17},variants:[{props:{isLandscape:!0},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"}}]});function Ja(e){const t=de({props:e,name:"MuiDateTimePickerToolbar"}),{ampm:n,ampmInClock:s,value:a,onChange:r,view:l,isLandscape:d,onViewChange:c,toolbarFormat:m,toolbarPlaceholder:p="––",views:u,disabled:b,readOnly:x,toolbarVariant:g="mobile",toolbarTitle:y,className:R}=t,M=pe(t,Ua),N=kt(),T=S({},t,{isRtl:N}),w=Pe(),{meridiemMode:P,handleMeridiemChange:E}=It(a,n,r),v=!!(n&&!s),h=g==="desktop",k=Ie(),C=Ha(T),D=y??k.dateTimePickerToolbarTitle,q=he=>n?w.format(he,"hours12h"):w.format(he,"hours24h"),Y=f.useMemo(()=>a?m?w.formatByString(a,m):w.format(a,"shortDate"):p,[a,m,p,w]);return o.jsxs(qa,S({isLandscape:d,className:Q(C.root,R),toolbarTitle:D},M,{ownerState:T,children:[o.jsxs(Ga,{className:C.dateContainer,ownerState:T,children:[u.includes("year")&&o.jsx(ke,{tabIndex:-1,variant:"subtitle1",onClick:()=>c("year"),selected:l==="year",value:a?w.format(a,"year"):"–"}),u.includes("day")&&o.jsx(ke,{tabIndex:-1,variant:h?"h5":"h4",onClick:()=>c("day"),selected:l==="day",value:Y})]}),o.jsxs(Ka,{className:C.timeContainer,ownerState:T,children:[o.jsxs(Ya,{className:C.timeDigitsContainer,ownerState:T,children:[u.includes("hours")&&o.jsxs(f.Fragment,{children:[o.jsx(ke,{variant:h?"h5":"h3",width:h&&!d?Ue:void 0,onClick:()=>c("hours"),selected:l==="hours",value:a?q(a):"--"}),o.jsx(Zt,{variant:h?"h5":"h3",value:":",className:C.separator,ownerState:T}),o.jsx(ke,{variant:h?"h5":"h3",width:h&&!d?Ue:void 0,onClick:()=>c("minutes"),selected:l==="minutes"||!u.includes("minutes")&&l==="hours",value:a?w.format(a,"minutes"):"--",disabled:!u.includes("minutes")})]}),u.includes("seconds")&&o.jsxs(f.Fragment,{children:[o.jsx(Zt,{variant:h?"h5":"h3",value:":",className:C.separator,ownerState:T}),o.jsx(ke,{variant:h?"h5":"h3",width:h&&!d?Ue:void 0,onClick:()=>c("seconds"),selected:l==="seconds",value:a?w.format(a,"seconds"):"--"})]})]}),v&&!h&&o.jsxs(Qa,{className:C.ampmSelection,ownerState:T,children:[o.jsx(ke,{variant:"subtitle2",selected:P==="am",typographyClassName:C.ampmLabel,value:Ce(w,"am"),onClick:x?void 0:()=>E("am"),disabled:b}),o.jsx(ke,{variant:"subtitle2",selected:P==="pm",typographyClassName:C.ampmLabel,value:Ce(w,"pm"),onClick:x?void 0:()=>E("pm"),disabled:b})]}),n&&h&&o.jsx(ke,{variant:"h5",onClick:()=>c("meridiem"),selected:l==="meridiem",value:a&&P?Ce(w,P):"--",width:Ue})]})]}))}function To(e,t){var d;const n=Pe(),s=is(),a=de({props:e,name:t}),r=a.ampm??n.is12HourCycleInCurrentLocale(),l=f.useMemo(()=>{var c;return((c=a.localeText)==null?void 0:c.toolbarTitle)==null?a.localeText:S({},a.localeText,{dateTimePickerToolbarTitle:a.localeText.toolbarTitle})},[a.localeText]);return S({},a,ls({views:a.views,openTo:a.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{ampm:r,localeText:l,orientation:a.orientation??"portrait",disableIgnoringDatePartForTimeValidation:a.disableIgnoringDatePartForTimeValidation??!!(a.minDateTime||a.maxDateTime||a.disablePast||a.disableFuture),disableFuture:a.disableFuture??!1,disablePast:a.disablePast??!1,minDate:_t(n,a.minDateTime??a.minDate,s.minDate),maxDate:_t(n,a.maxDateTime??a.maxDate,s.maxDate),minTime:a.minDateTime??a.minTime,maxTime:a.maxDateTime??a.maxTime,slots:S({toolbar:Ja,tabs:Ba},a.slots),slotProps:S({},a.slotProps,{toolbar:S({ampm:r},(d=a.slotProps)==null?void 0:d.toolbar)})})}const Xa=f.forwardRef(function(t,n){var y;const s=kt(),{toolbar:a,tabs:r,content:l,actionBar:d,shortcuts:c}=cs(t),{sx:m,className:p,isLandscape:u,classes:b}=t,x=d&&(((y=d.props.actions)==null?void 0:y.length)??0)>0,g=S({},t,{isRtl:s});return o.jsxs(ds,{ref:n,className:Q(Qe.root,b==null?void 0:b.root,p),sx:[{[`& .${Qe.tabs}`]:{gridRow:4,gridColumn:"1 / 4"},[`& .${Qe.actionBar}`]:{gridRow:5}},...Array.isArray(m)?m:[m]],ownerState:g,children:[u?c:a,u?a:c,o.jsxs(us,{className:Q(Qe.contentWrapper,b==null?void 0:b.contentWrapper),sx:{display:"grid"},children:[l,r,x&&o.jsx(no,{sx:{gridRow:3,gridColumn:"1 / 4"}})]}),d]})}),Za=["openTo","focusedView","timeViewsCount"],er=function(t,n,s){var p,u;const{openTo:a,focusedView:r,timeViewsCount:l}=s,d=pe(s,Za),c=S({},d,{focusedView:null,sx:[{[`&.${Qt.root}`]:{borderBottom:0},[`&.${Qt.root}, .${ma.root}, &.${sa.root}`]:{maxHeight:hs}}]}),m=He(n);return o.jsxs(f.Fragment,{children:[(p=t[m?"day":n])==null?void 0:p.call(t,S({},s,{view:m?"day":n,focusedView:r&&ot(r)?r:null,views:s.views.filter(ot),sx:[{gridColumn:1},...c.sx]})),l>0&&o.jsxs(f.Fragment,{children:[o.jsx(no,{orientation:"vertical",sx:{gridColumn:2}}),(u=t[m?n:"hours"])==null?void 0:u.call(t,S({},c,{view:m?n:"hours",focusedView:r&&He(r)?r:null,openTo:He(a)?a:"hours",views:s.views.filter(He),sx:[{gridColumn:3},...c.sx]}))]})]})},wo=f.forwardRef(function(t,n){var N,T,w,P;const s=Ie(),a=Pe(),r=To(t,"MuiDesktopDateTimePicker"),{shouldRenderTimeInASingleColumn:l,thresholdToRenderTimeInASingleColumn:d,views:c,timeSteps:m}=Oa(r),p=l?La:Xt,u=S({day:Ae,month:Ae,year:Ae,hours:p,minutes:p,seconds:p,meridiem:p},r.viewRenderers),b=r.ampmInClock??!0,g=((N=u.hours)==null?void 0:N.name)===Xt.name?c:c.filter(E=>E!=="meridiem"),y=l?[]:["accept"],R=S({},r,{viewRenderers:u,format:So(a,r),views:g,yearsPerRow:r.yearsPerRow??4,ampmInClock:b,timeSteps:m,thresholdToRenderTimeInASingleColumn:d,shouldRenderTimeInASingleColumn:l,slots:S({field:Co,layout:Xa,openPickerIcon:ms},r.slots),slotProps:S({},r.slotProps,{field:E=>{var v;return S({},ht((v=r.slotProps)==null?void 0:v.field,E),lo(r),{ref:n})},toolbar:S({hidden:!0,ampmInClock:b,toolbarVariant:"desktop"},(T=r.slotProps)==null?void 0:T.toolbar),tabs:S({hidden:!0},(w=r.slotProps)==null?void 0:w.tabs),actionBar:E=>{var v;return S({actions:y},ht((v=r.slotProps)==null?void 0:v.actionBar,E))}})}),{renderPicker:M}=ps({props:R,valueManager:Se,valueType:"date-time",getOpenDialogAriaText:co({utils:a,formatKey:"fullDate",contextTranslation:s.openDatePickerDialogue,propsTranslation:(P=R.localeText)==null?void 0:P.openDatePickerDialogue}),validator:it,rendererInterceptor:er});return M()});wo.propTypes={ampm:i.bool,ampmInClock:i.bool,autoFocus:i.bool,className:i.string,closeOnSelect:i.bool,dayOfWeekFormatter:i.func,defaultValue:i.object,disabled:i.bool,disableFuture:i.bool,disableHighlightToday:i.bool,disableIgnoringDatePartForTimeValidation:i.bool,disableOpenPicker:i.bool,disablePast:i.bool,displayWeekNumber:i.bool,enableAccessibleFieldDOMStructure:i.any,fixedWeekNumber:i.number,format:i.string,formatDensity:i.oneOf(["dense","spacious"]),inputRef:uo,label:i.node,loading:i.bool,localeText:i.object,maxDate:i.object,maxDateTime:i.object,maxTime:i.object,minDate:i.object,minDateTime:i.object,minTime:i.object,minutesStep:i.number,monthsPerRow:i.oneOf([3,4]),name:i.string,onAccept:i.func,onChange:i.func,onClose:i.func,onError:i.func,onMonthChange:i.func,onOpen:i.func,onSelectedSectionsChange:i.func,onViewChange:i.func,onYearChange:i.func,open:i.bool,openTo:i.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),orientation:i.oneOf(["landscape","portrait"]),readOnly:i.bool,reduceAnimations:i.bool,referenceDate:i.object,renderLoading:i.func,selectedSections:i.oneOfType([i.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),i.number]),shouldDisableDate:i.func,shouldDisableMonth:i.func,shouldDisableTime:i.func,shouldDisableYear:i.func,showDaysOutsideCurrentMonth:i.bool,skipDisabled:i.bool,slotProps:i.object,slots:i.object,sx:i.oneOfType([i.arrayOf(i.oneOfType([i.func,i.object,i.bool])),i.func,i.object]),thresholdToRenderTimeInASingleColumn:i.number,timeSteps:i.shape({hours:i.number,minutes:i.number,seconds:i.number}),timezone:i.string,value:i.object,view:i.oneOf(["day","hours","meridiem","minutes","month","seconds","year"]),viewRenderers:i.shape({day:i.func,hours:i.func,meridiem:i.func,minutes:i.func,month:i.func,seconds:i.func,year:i.func}),views:i.arrayOf(i.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:i.oneOf(["asc","desc"]),yearsPerRow:i.oneOf([3,4])};const ko=f.forwardRef(function(t,n){var p,u,b;const s=Ie(),a=Pe(),r=To(t,"MuiMobileDateTimePicker"),l=S({day:Ae,month:Ae,year:Ae,hours:ut,minutes:ut,seconds:ut},r.viewRenderers),d=r.ampmInClock??!1,c=S({},r,{viewRenderers:l,format:So(a,r),ampmInClock:d,slots:S({field:Co},r.slots),slotProps:S({},r.slotProps,{field:x=>{var g;return S({},ht((g=r.slotProps)==null?void 0:g.field,x),lo(r),{ref:n})},toolbar:S({hidden:!1,ampmInClock:d},(p=r.slotProps)==null?void 0:p.toolbar),tabs:S({hidden:!1},(u=r.slotProps)==null?void 0:u.tabs)})}),{renderPicker:m}=fs({props:c,valueManager:Se,valueType:"date-time",getOpenDialogAriaText:co({utils:a,formatKey:"fullDate",contextTranslation:s.openDatePickerDialogue,propsTranslation:(b=c.localeText)==null?void 0:b.openDatePickerDialogue}),validator:it});return m()});ko.propTypes={ampm:i.bool,ampmInClock:i.bool,autoFocus:i.bool,className:i.string,closeOnSelect:i.bool,dayOfWeekFormatter:i.func,defaultValue:i.object,disabled:i.bool,disableFuture:i.bool,disableHighlightToday:i.bool,disableIgnoringDatePartForTimeValidation:i.bool,disableOpenPicker:i.bool,disablePast:i.bool,displayWeekNumber:i.bool,enableAccessibleFieldDOMStructure:i.any,fixedWeekNumber:i.number,format:i.string,formatDensity:i.oneOf(["dense","spacious"]),inputRef:uo,label:i.node,loading:i.bool,localeText:i.object,maxDate:i.object,maxDateTime:i.object,maxTime:i.object,minDate:i.object,minDateTime:i.object,minTime:i.object,minutesStep:i.number,monthsPerRow:i.oneOf([3,4]),name:i.string,onAccept:i.func,onChange:i.func,onClose:i.func,onError:i.func,onMonthChange:i.func,onOpen:i.func,onSelectedSectionsChange:i.func,onViewChange:i.func,onYearChange:i.func,open:i.bool,openTo:i.oneOf(["day","hours","minutes","month","seconds","year"]),orientation:i.oneOf(["landscape","portrait"]),readOnly:i.bool,reduceAnimations:i.bool,referenceDate:i.object,renderLoading:i.func,selectedSections:i.oneOfType([i.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),i.number]),shouldDisableDate:i.func,shouldDisableMonth:i.func,shouldDisableTime:i.func,shouldDisableYear:i.func,showDaysOutsideCurrentMonth:i.bool,slotProps:i.object,slots:i.object,sx:i.oneOfType([i.arrayOf(i.oneOfType([i.func,i.object,i.bool])),i.func,i.object]),timezone:i.string,value:i.object,view:i.oneOf(["day","hours","minutes","month","seconds","year"]),viewRenderers:i.shape({day:i.func,hours:i.func,minutes:i.func,month:i.func,seconds:i.func,year:i.func}),views:i.arrayOf(i.oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsOrder:i.oneOf(["asc","desc"]),yearsPerRow:i.oneOf([3,4])};const tr=["desktopModeMediaQuery"],Tt=f.forwardRef(function(t,n){const s=de({props:t,name:"MuiDateTimePicker"}),{desktopModeMediaQuery:a=bs}=s,r=pe(s,tr);return Fo(a,{defaultMatches:!0})?o.jsx(wo,S({ref:n},r)):o.jsx(ko,S({ref:n},r))}),pt=["Select Class","Set Schedule Pattern","Choose Time Slots","Review & Confirm"],Do=({onComplete:e,initialData:t,isEditing:n})=>{const{currentUser:s}=ao(),[a,r]=f.useState(0),[l,d]=f.useState([]),[c,m]=f.useState(t||{classId:"",startDate:new Date,recurrencePattern:"weekly",daysOfWeek:[],duration:60,timeSlots:{}}),[p,u]=f.useState(""),[b,x]=f.useState(!1);f.useEffect(()=>{g()},[s]);const g=async()=>{try{const h=je(fe,"classes"),k=Re(h,Oe("teacherId","==",s.uid)),C=await $e(k),D=[];C.forEach(q=>{D.push({id:q.id,...q.data()})}),d(D)}catch(h){u("Failed to fetch classes"),console.error("Error fetching classes:",h)}},y=()=>{P(a)?(r(h=>h+1),u("")):u("Please fill in all required fields")},R=()=>{r(h=>h-1)},M=h=>k=>{m({...c,[h]:k.target.value})},N=h=>k=>{m({...c,[h]:k})},T=h=>{const k=c.daysOfWeek,C=k.includes(h)?k.filter(D=>D!==h):[...k,h];m({...c,daysOfWeek:C})},w=h=>k=>{m(C=>({...C,timeSlots:{...C.timeSlots,[h]:k}}))},P=h=>{switch(h){case 0:return!!c.classId;case 1:return!!c.startDate&&!!c.recurrencePattern;case 2:return c.daysOfWeek.length>0&&c.duration>0&&c.daysOfWeek.every(k=>c.timeSlots[k]);default:return!0}},E=async()=>{try{if(!P(a)){u("Please fill in all required fields");return}if(b)return;x(!0),u(""),n?await Cn(t.id,c):await gn(c),e&&e()}catch(h){u("Failed to "+(n?"update":"create")+" schedule: "+h.message),console.error("Error "+(n?"updating":"creating")+" schedule:",h)}finally{x(!1)}},v=h=>{var k;switch(h){case 0:return o.jsx(J,{sx:{mt:2},children:o.jsxs(At,{fullWidth:!0,children:[o.jsx(Et,{children:"Select Class"}),o.jsx(Wt,{value:c.classId,onChange:M("classId"),label:"Select Class",children:l.map(C=>o.jsx(Fe,{value:C.id,children:C.name},C.id))})]})});case 1:return o.jsxs(J,{sx:{mt:2},children:[o.jsx(xt,{dateAdapter:gt,children:o.jsx(Tt,{label:"Start Date",value:c.startDate,onChange:N("startDate"),renderInput:C=>o.jsx(qe,{...C,fullWidth:!0})})}),o.jsxs(At,{fullWidth:!0,sx:{mt:2},children:[o.jsx(Et,{children:"Recurrence Pattern"}),o.jsxs(Wt,{value:c.recurrencePattern,onChange:M("recurrencePattern"),label:"Recurrence Pattern",children:[o.jsx(Fe,{value:"weekly",children:"Weekly"}),o.jsx(Fe,{value:"custom",children:"Custom"})]})]})]});case 2:return o.jsxs(J,{sx:{mt:2},children:[o.jsx(Es,{row:!0,sx:{mb:2},children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((C,D)=>o.jsx(Uo,{control:o.jsx(Ns,{checked:c.daysOfWeek.includes(D),onChange:()=>T(D)}),label:C},C))}),o.jsx(qe,{fullWidth:!0,type:"number",label:"Duration (minutes)",value:c.duration,onChange:M("duration"),sx:{mb:2}}),c.daysOfWeek.map(C=>o.jsxs(J,{sx:{mb:2},children:[o.jsx(te,{variant:"subtitle1",gutterBottom:!0,children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][C]}),o.jsx(xt,{dateAdapter:gt,children:o.jsx(Tt,{label:"Time Slot",value:c.timeSlots[C]||null,onChange:w(C),renderInput:D=>o.jsx(qe,{...D,fullWidth:!0})})})]},C))]});case 3:return o.jsxs(J,{sx:{mt:2},children:[o.jsx(te,{variant:"h6",gutterBottom:!0,children:"Schedule Summary"}),o.jsxs(te,{children:["Class: ",(k=l.find(C=>C.id===c.classId))==null?void 0:k.name]}),o.jsxs(te,{children:["Start Date: ",c.startDate.toLocaleDateString()]}),o.jsxs(te,{children:["Pattern: ",c.recurrencePattern]}),o.jsxs(te,{children:["Duration: ",c.duration," minutes"]}),c.daysOfWeek.map(C=>{var D;return o.jsxs(te,{children:[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][C],": ",(D=c.timeSlots[C])==null?void 0:D.toLocaleTimeString()]},C)})]});default:return null}};return o.jsx(ro,{maxWidth:"md",children:o.jsxs(ft,{sx:{p:3,mt:3},children:[o.jsx(te,{variant:"h5",gutterBottom:!0,children:n?"Edit Schedule":"Schedule Class Sessions"}),o.jsx(mn,{activeStep:a,sx:{mb:4},children:pt.map(h=>o.jsx(_s,{children:o.jsx(ho,{children:h})},h))}),p&&o.jsx(bt,{severity:"error",sx:{mb:2},children:p}),v(a),o.jsxs(J,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:[o.jsx(ve,{disabled:a===0,onClick:R,sx:{mr:1},children:"Back"}),o.jsx(ve,{variant:"contained",onClick:a===pt.length-1?E:y,disabled:!P(a)||b,children:a===pt.length-1?b?n?"Updating...":"Creating...":n?"Update Schedule":"Schedule Sessions":"Next"})]})]})})},or=({schedule:e,classData:t,onUpdate:n,onDelete:s})=>{const[a,r]=f.useState(null),[l,d]=f.useState(!1),[c,m]=f.useState(!1),[p,u]=f.useState(!1),[b,x]=f.useState(null),[g,y]=f.useState(null),R=h=>{r(h.currentTarget)},M=()=>{r(null)},N=()=>{d(!0),M()},T=()=>{m(!0),M()},w=h=>{x(h),y(new Date(e.timeSlots[h])),M()},P=async()=>{try{u(!0),await yn(e.id,b,{timeSlot:g}),n(),x(null)}catch(h){console.error("Error updating session:",h)}finally{u(!1)}},E=async()=>{try{u(!0),await Sn(e.id),s(e.id),m(!1)}catch(h){console.error("Error deleting schedule:",h)}finally{u(!1)}},v=()=>{d(!1),n()};return o.jsxs(J,{sx:{mb:2,p:2,bgcolor:"background.paper",borderRadius:1},children:[o.jsxs(J,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[o.jsxs(J,{children:[o.jsx(te,{variant:"h6",children:(t==null?void 0:t.name)||"Loading..."}),e.daysOfWeek.map(h=>{var k;return o.jsx(J,{display:"flex",alignItems:"center",sx:{mt:1},children:b===h?o.jsx(xt,{dateAdapter:gt,children:o.jsxs(J,{display:"flex",alignItems:"center",gap:1,children:[o.jsx(Tt,{label:"New Time",value:g,onChange:C=>y(C),renderInput:C=>o.jsx(qe,{...C,size:"small"})}),o.jsx(ve,{variant:"contained",size:"small",onClick:P,disabled:p,children:p?"Saving...":"Save"}),o.jsx(ve,{size:"small",onClick:()=>x(null),disabled:p,children:"Cancel"})]})}):o.jsxs(o.Fragment,{children:[o.jsxs(te,{children:[["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][h]," - ",new Date(e.timeSlots[h]).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),o.jsx(Le,{size:"small",onClick:()=>w(h),sx:{ml:1},children:o.jsx(Ut,{fontSize:"small"})}),((k=e.meetLinks)==null?void 0:k[h])&&o.jsx(Vo,{title:"Join Meet",children:o.jsx(Le,{size:"small",color:"primary",href:e.meetLinks[h],target:"_blank",sx:{ml:1},children:o.jsx(po,{})})})]})},h)}),o.jsxs(te,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Duration: ",e.duration," minutes"]})]}),o.jsx(Le,{onClick:R,children:o.jsx(fn,{})})]}),o.jsxs(No,{anchorEl:a,open:!!a,onClose:M,children:[o.jsxs(Fe,{onClick:N,children:[o.jsx(Ut,{sx:{mr:1},fontSize:"small"}),"Edit All Sessions"]}),o.jsxs(Fe,{onClick:T,sx:{color:"error.main"},children:[o.jsx(gs,{sx:{mr:1},fontSize:"small"}),"Delete Schedule"]})]}),o.jsxs(vt,{open:l,onClose:()=>d(!1),maxWidth:"md",fullWidth:!0,children:[o.jsx(Ct,{children:"Edit All Sessions"}),o.jsx(yt,{children:o.jsx(Do,{onComplete:v,initialData:e,isEditing:!0})})]}),o.jsxs(vt,{open:c,onClose:()=>m(!1),children:[o.jsx(Ct,{children:"Delete Schedule"}),o.jsx(yt,{children:o.jsx(te,{children:"Are you sure you want to delete this schedule? This action cannot be undone."})}),o.jsxs(vs,{children:[o.jsx(ve,{onClick:()=>m(!1),disabled:p,children:"Cancel"}),o.jsx(ve,{onClick:E,color:"error",variant:"contained",disabled:p,children:p?"Deleting...":"Delete"})]})]})]})},sr=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],nr=Array.from({length:24},(e,t)=>`${t.toString().padStart(2,"0")}:00`),Pr=()=>{const e=Oo(),{currentUser:t}=ao(),[n,s]=f.useState([]),[a,r]=f.useState(!1),[l,d]=f.useState(""),[c,m]=f.useState(!0),[p,u]=f.useState("list"),[b,x]=f.useState({}),[g,y]=f.useState({}),[R,M]=f.useState(null),[N,T]=f.useState([]),[w,P]=f.useState(new Date);f.useEffect(()=>{t&&(async()=>(await v(),await E(),await h()))()},[t]),f.useEffect(()=>{n.length>0&&h()},[n]);const E=async()=>{try{const B=je(fe,"courses"),A=await $e(B),I={};A.forEach(_=>{I[_.id]={id:_.id,..._.data()}}),y(I)}catch(B){console.error("Error fetching courses:",B)}},v=async()=>{try{m(!0),d("");const B=await vn(t.uid,t.role);s(B)}catch(B){console.error("Error fetching schedules:",B),d("Failed to fetch schedules")}finally{m(!1)}},h=async()=>{try{const B=n.map(O=>O.classId);if(B.length===0){console.log("No schedules found");return}console.log("Fetching details for classes:",B);const A=je(fe,"classes"),I=Re(A,Oe("__name__","in",B)),_=await $e(I),G={};for(const O of _.docs){const W=O.data();console.log("Class data for",O.id,":",W);const X=W.studentIds||[];let L=[];if(X.length>0)try{const ie=je(fe,"users"),K=Re(ie,Oe("__name__","in",X));L=(await $e(K)).docs.map(Z=>{const ce=Z.data();return{id:Z.id,name:ce.displayName||ce.name||ce.email||"Unknown Student",email:ce.email,photoURL:ce.photoURL}}),console.log("Fetched students for class",O.id,":",L)}catch(ie){console.error("Error fetching students for class",O.id,":",ie)}let U="General Course";W.courseId&&g[W.courseId]&&(U=g[W.courseId].title||"General Course"),G[O.id]={id:O.id,name:W.name||"Untitled Class",students:L,courseName:U,description:W.description||""}}console.log("Final class details:",G),x(G)}catch(B){console.error("Error fetching class details:",B)}},k=()=>{r(!1),v()},C=()=>{M(null)},D=()=>{if(c)return o.jsx(J,{display:"flex",justifyContent:"center",p:4,children:o.jsx(Ot,{})});if(l)return o.jsx(bt,{severity:"error",sx:{mt:2},children:l});if(n.length===0)return o.jsx(J,{textAlign:"center",p:4,children:o.jsx(te,{color:"text.secondary",children:'No schedules found. Click the "Schedule New Class" button to create one.'})});const B=n.reduce((A,I)=>{const _=I.classId;return A[_]||(A[_]=[]),A[_].push(I),A},{});return Object.entries(B).map(([A,I])=>{var _;return o.jsxs(J,{sx:{mb:4},children:[o.jsx(te,{variant:"h6",sx:{mb:2},children:((_=b[A])==null?void 0:_.name)||"Loading..."}),I.map(G=>o.jsx(or,{schedule:G,classData:b[A],onUpdate:v,onDelete:O=>{s(n.filter(W=>W.id!==O))}},G.id))]},A)})},q=B=>o.jsx(Ao,{sx:{width:300,maxHeight:400,overflow:"auto",bgcolor:"background.paper",borderRadius:1,p:0},children:B.length===0?o.jsx(Ht,{children:o.jsx($t,{primary:"No students enrolled",sx:{textAlign:"center",color:"text.secondary"}})}):B.map(A=>{var I;return o.jsxs(Ht,{sx:{borderBottom:1,borderColor:"divider"},children:[o.jsx(ys,{children:o.jsx(Eo,{src:A.photoURL,sx:{bgcolor:e.palette.primary.main},children:((I=A.name)==null?void 0:I.charAt(0))||o.jsx(Wo,{})})}),o.jsx($t,{primary:A.name,secondary:A.email,primaryTypographyProps:{sx:{color:"white",fontWeight:"medium"}},secondaryTypographyProps:{sx:{color:"text.secondary",fontSize:"0.875rem"}}})]},A.id)})}),Y=()=>{const B=[],A=new Date(w);A.setDate(A.getDate()-A.getDay());for(let I=0;I<7;I++){const _=new Date(A);_.setDate(A.getDate()+I),B.push(_)}return B},he=()=>{const B=Y(),A={};return n.forEach(I=>{const _=b[I.classId]||{};I.daysOfWeek.forEach(G=>{const W=new Date(I.timeSlots[G]).getHours().toString().padStart(2,"0")+":00";A[W]||(A[W]=Array(7).fill(null)),A[W][G]={className:_.name,courseName:_.courseName,meetLink:I.meetLink,duration:I.duration}})}),o.jsxs(J,{sx:{mt:2},children:[o.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[o.jsx(Le,{onClick:()=>{const I=new Date(w);I.setDate(I.getDate()-7),P(I)},children:o.jsx(pn,{})}),o.jsxs(te,{variant:"h6",children:[B[0].toLocaleDateString()," - ",B[6].toLocaleDateString()]}),o.jsx(Le,{onClick:()=>{const I=new Date(w);I.setDate(I.getDate()+7),P(I)},children:o.jsx(hn,{})})]}),o.jsx(Ss,{component:ft,children:o.jsxs(Ts,{size:"small",children:[o.jsx(ws,{children:o.jsxs(qt,{children:[o.jsx(Je,{children:"Time"}),sr.map(I=>o.jsx(Je,{align:"center",children:I},I))]})}),o.jsx(ks,{children:nr.map(I=>o.jsxs(qt,{children:[o.jsx(Je,{children:I}),Array.from({length:7},(_,G)=>{var W;const O=(W=A[I])==null?void 0:W[G];return o.jsx(Je,{align:"center",children:O&&o.jsxs(J,{children:[o.jsx(te,{variant:"body2",noWrap:!0,children:O.className}),O.meetLink&&o.jsx(ve,{size:"small",startIcon:o.jsx(po,{}),href:O.meetLink,target:"_blank",children:"Join"})]})},G)})]},I))})]})})]})};return o.jsx(ro,{maxWidth:"lg",children:o.jsxs(J,{sx:{mt:4,mb:4},children:[o.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[o.jsx(te,{variant:"h4",component:"h1",children:"Class Schedule"}),o.jsx(ve,{variant:"contained",startIcon:o.jsx(Cs,{}),onClick:()=>r(!0),children:"Schedule New Class"})]}),l&&o.jsx(bt,{severity:"error",sx:{mb:2},children:l}),o.jsx(ft,{sx:{mb:3},children:o.jsxs(mo,{value:p,onChange:(B,A)=>u(A),indicatorColor:"primary",textColor:"primary",centered:!0,children:[o.jsx(st,{value:"list",label:"List View"}),o.jsx(st,{value:"calendar",label:"Calendar View"})]})}),o.jsxs(vt,{open:a,onClose:()=>r(!1),maxWidth:"md",fullWidth:!0,children:[o.jsx(Ct,{children:"Schedule Class Sessions"}),o.jsx(yt,{children:o.jsx(Do,{onComplete:k})})]}),o.jsx($o,{open:!!R,anchorEl:R,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:q(N)}),c?o.jsx(J,{sx:{display:"flex",justifyContent:"center",mt:4},children:o.jsx(Ot,{})}):p==="list"?D():he()]})})};export{Pr as default};
