import{r as ye,al as od,bf as Fr,K as ld,G as ud,O as qa,aQ as Cs,aX as Wa,aS as ru,b7 as xs,g as cd,a as hd,c as lr,j as _e,s as Vn,o as Rn,m as ur,ba as Mc,u as dd,Q as fd,N as wn,q as co,ae as iu,af as su,p as au,b as gd,d as ks,bk as ou,aD as ho,bl as Lc,bm as Ic,av as St,bn as oo,aa as lu,bo as pd,ad as uu,f as Pn,$ as md,P as vd,W as gs,I as ps,T as cu}from"./index-NbX1JcnA.js";import{u as yd}from"./IqraRoutes-tnNvDeZ2.js";import{v as _d}from"./visuallyHidden-Dan1xhjv.js";function Sd(s,u,T=(N,b)=>N===b){return s.length===u.length&&s.every((N,b)=>T(N,u[b]))}const Cd=2;function sr(s,u,T,N,b){return T===1?Math.min(s+u,b):Math.max(s-u,N)}function Dc(s,u){return s-u}function hu(s,u){const{index:T}=s.reduce((N,b,m)=>{const a=Math.abs(u-b);return N===null||a<N.distance||a===N.distance?{distance:a,index:m}:N},null)??{};return T}function ms(s,u){if(u.current!==void 0&&s.changedTouches){const T=s;for(let N=0;N<T.changedTouches.length;N+=1){const b=T.changedTouches[N];if(b.identifier===u.current)return{x:b.clientX,y:b.clientY}}return!1}return{x:s.clientX,y:s.clientY}}function Ps(s,u,T){return(s-u)*100/(T-u)}function xd(s,u,T){return(T-u)*s+u}function wd(s){if(Math.abs(s)<1){const T=s.toExponential().split("e-"),N=T[0].split(".")[1];return(N?N.length:0)+parseInt(T[1],10)}const u=s.toString().split(".")[1];return u?u.length:0}function Pd(s,u,T){const N=Math.round((s-T)/u)*u+T;return Number(N.toFixed(wd(u)))}function du({values:s,newValue:u,index:T}){const N=s.slice();return N[T]=u,N.sort(Dc)}function vs({sliderRef:s,activeIndex:u,setActive:T}){var b,m,a;const N=Cs(s.current);(!((b=s.current)!=null&&b.contains(N.activeElement))||Number((m=N==null?void 0:N.activeElement)==null?void 0:m.getAttribute("data-index"))!==u)&&((a=s.current)==null||a.querySelector(`[type="range"][data-index="${u}"]`).focus()),T&&T(u)}function ys(s,u){return typeof s=="number"&&typeof u=="number"?s===u:typeof s=="object"&&typeof u=="object"?Sd(s,u):!1}const kd={horizontal:{offset:s=>({left:`${s}%`}),leap:s=>({width:`${s}%`})},"horizontal-reverse":{offset:s=>({right:`${s}%`}),leap:s=>({width:`${s}%`})},vertical:{offset:s=>({bottom:`${s}%`}),leap:s=>({height:`${s}%`})}},Ed=s=>s;let _s;function fu(){return _s===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?_s=CSS.supports("touch-action","none"):_s=!0),_s}function Rd(s){const{"aria-labelledby":u,defaultValue:T,disabled:N=!1,disableSwap:b=!1,isRtl:m=!1,marks:a=!1,max:f=100,min:g=0,name:y,onChange:_,onChangeCommitted:P,orientation:w="horizontal",rootRef:p,scale:d=Ed,step:v=1,shiftStep:k=10,tabIndex:A,value:c}=s,o=ye.useRef(void 0),[x,R]=ye.useState(-1),[L,G]=ye.useState(-1),[I,z]=ye.useState(!1),E=ye.useRef(0),[M,B]=od({controlled:c,default:T??g,name:"Slider"}),l=_&&((ee,oe,de)=>{const Pe=ee.nativeEvent||ee,Ee=new Pe.constructor(Pe.type,Pe);Object.defineProperty(Ee,"target",{writable:!0,value:{value:oe,name:y}}),_(Ee,oe,de)}),S=Array.isArray(M);let C=S?M.slice().sort(Dc):[M];C=C.map(ee=>ee==null?g:Fr(ee,g,f));const D=a===!0&&v!==null?[...Array(Math.floor((f-g)/v)+1)].map((ee,oe)=>({value:g+v*oe})):a||[],O=D.map(ee=>ee.value),[j,H]=ye.useState(-1),Z=ye.useRef(null),Q=ld(p,Z),$=ee=>oe=>{var Pe;const de=Number(oe.currentTarget.getAttribute("data-index"));ru(oe.target)&&H(de),G(de),(Pe=ee==null?void 0:ee.onFocus)==null||Pe.call(ee,oe)},Y=ee=>oe=>{var de;ru(oe.target)||H(-1),G(-1),(de=ee==null?void 0:ee.onBlur)==null||de.call(ee,oe)},te=(ee,oe)=>{const de=Number(ee.currentTarget.getAttribute("data-index")),Pe=C[de],Ee=O.indexOf(Pe);let me=oe;if(D&&v==null){const Fe=O[O.length-1];me>Fe?me=Fe:me<O[0]?me=O[0]:me=me<Pe?O[Ee-1]:O[Ee+1]}if(me=Fr(me,g,f),S){b&&(me=Fr(me,C[de-1]||-1/0,C[de+1]||1/0));const Fe=me;me=du({values:C,newValue:me,index:de});let Be=de;b||(Be=me.indexOf(Fe)),vs({sliderRef:Z,activeIndex:Be})}B(me),H(de),l&&!ys(me,M)&&l(ee,me,de),P&&P(ee,me)},ae=ee=>oe=>{var de;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(oe.key)){oe.preventDefault();const Pe=Number(oe.currentTarget.getAttribute("data-index")),Ee=C[Pe];let me=null;if(v!=null){const Fe=oe.shiftKey?k:v;switch(oe.key){case"ArrowUp":me=sr(Ee,Fe,1,g,f);break;case"ArrowRight":me=sr(Ee,Fe,m?-1:1,g,f);break;case"ArrowDown":me=sr(Ee,Fe,-1,g,f);break;case"ArrowLeft":me=sr(Ee,Fe,m?1:-1,g,f);break;case"PageUp":me=sr(Ee,k,1,g,f);break;case"PageDown":me=sr(Ee,k,-1,g,f);break;case"Home":me=g;break;case"End":me=f;break}}else if(D){const Fe=O[O.length-1],Be=O.indexOf(Ee),Me=[m?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Ve=[m?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];Me.includes(oe.key)?Be===0?me=O[0]:me=O[Be-1]:Ve.includes(oe.key)&&(Be===O.length-1?me=Fe:me=O[Be+1])}me!=null&&te(oe,me)}(de=ee==null?void 0:ee.onKeyDown)==null||de.call(ee,oe)};ud(()=>{var ee;N&&Z.current.contains(document.activeElement)&&((ee=document.activeElement)==null||ee.blur())},[N]),N&&x!==-1&&R(-1),N&&j!==-1&&H(-1);const le=ee=>oe=>{var de;(de=ee.onChange)==null||de.call(ee,oe),te(oe,oe.target.valueAsNumber)},U=ye.useRef(void 0);let W=w;m&&w==="horizontal"&&(W+="-reverse");const ne=({finger:ee,move:oe=!1})=>{const{current:de}=Z,{width:Pe,height:Ee,bottom:me,left:Fe}=de.getBoundingClientRect();let Be;W.startsWith("vertical")?Be=(me-ee.y)/Ee:Be=(ee.x-Fe)/Pe,W.includes("-reverse")&&(Be=1-Be);let Me;if(Me=xd(Be,g,f),v)Me=Pd(Me,v,g);else{const rt=hu(O,Me);Me=O[rt]}Me=Fr(Me,g,f);let Ve=0;if(S){oe?Ve=U.current:Ve=hu(C,Me),b&&(Me=Fr(Me,C[Ve-1]||-1/0,C[Ve+1]||1/0));const rt=Me;Me=du({values:C,newValue:Me,index:Ve}),b&&oe||(Ve=Me.indexOf(rt),U.current=Ve)}return{newValue:Me,activeIndex:Ve}},re=qa(ee=>{const oe=ms(ee,o);if(!oe)return;if(E.current+=1,ee.type==="mousemove"&&ee.buttons===0){ie(ee);return}const{newValue:de,activeIndex:Pe}=ne({finger:oe,move:!0});vs({sliderRef:Z,activeIndex:Pe,setActive:R}),B(de),!I&&E.current>Cd&&z(!0),l&&!ys(de,M)&&l(ee,de,Pe)}),ie=qa(ee=>{const oe=ms(ee,o);if(z(!1),!oe)return;const{newValue:de}=ne({finger:oe,move:!0});R(-1),ee.type==="touchend"&&G(-1),P&&P(ee,de),o.current=void 0,pe()}),he=qa(ee=>{if(N)return;fu()||ee.preventDefault();const oe=ee.changedTouches[0];oe!=null&&(o.current=oe.identifier);const de=ms(ee,o);if(de!==!1){const{newValue:Ee,activeIndex:me}=ne({finger:de});vs({sliderRef:Z,activeIndex:me,setActive:R}),B(Ee),l&&!ys(Ee,M)&&l(ee,Ee,me)}E.current=0;const Pe=Cs(Z.current);Pe.addEventListener("touchmove",re,{passive:!0}),Pe.addEventListener("touchend",ie,{passive:!0})}),pe=ye.useCallback(()=>{const ee=Cs(Z.current);ee.removeEventListener("mousemove",re),ee.removeEventListener("mouseup",ie),ee.removeEventListener("touchmove",re),ee.removeEventListener("touchend",ie)},[ie,re]);ye.useEffect(()=>{const{current:ee}=Z;return ee.addEventListener("touchstart",he,{passive:fu()}),()=>{ee.removeEventListener("touchstart",he),pe()}},[pe,he]),ye.useEffect(()=>{N&&pe()},[N,pe]);const Ae=ee=>oe=>{var Ee;if((Ee=ee.onMouseDown)==null||Ee.call(ee,oe),N||oe.defaultPrevented||oe.button!==0)return;oe.preventDefault();const de=ms(oe,o);if(de!==!1){const{newValue:me,activeIndex:Fe}=ne({finger:de});vs({sliderRef:Z,activeIndex:Fe,setActive:R}),B(me),l&&!ys(me,M)&&l(oe,me,Fe)}E.current=0;const Pe=Cs(Z.current);Pe.addEventListener("mousemove",re,{passive:!0}),Pe.addEventListener("mouseup",ie)},Ce=Ps(S?C[0]:g,g,f),Qe=Ps(C[C.length-1],g,f)-Ce,Se=(ee={})=>{const oe=Wa(ee),de={onMouseDown:Ae(oe||{})},Pe={...oe,...de};return{...ee,ref:Q,...Pe}},Ge=ee=>oe=>{var Pe;(Pe=ee.onMouseOver)==null||Pe.call(ee,oe);const de=Number(oe.currentTarget.getAttribute("data-index"));G(de)},bt=ee=>oe=>{var de;(de=ee.onMouseLeave)==null||de.call(ee,oe),G(-1)},Ke=(ee={})=>{const oe=Wa(ee),de={onMouseOver:Ge(oe||{}),onMouseLeave:bt(oe||{})};return{...ee,...oe,...de}},Ft=ee=>({pointerEvents:x!==-1&&x!==ee?"none":void 0});let Oe;return w==="vertical"&&(Oe=m?"vertical-rl":"vertical-lr"),{active:x,axis:W,axisProps:kd,dragging:I,focusedThumbIndex:j,getHiddenInputProps:(ee={})=>{const oe=Wa(ee),de={onChange:le(oe||{}),onFocus:$(oe||{}),onBlur:Y(oe||{}),onKeyDown:ae(oe||{})},Pe={...oe,...de};return{tabIndex:A,"aria-labelledby":u,"aria-orientation":w,"aria-valuemax":d(f),"aria-valuemin":d(g),name:y,type:"range",min:s.min,max:s.max,step:s.step===null&&s.marks?"any":s.step??void 0,disabled:N,...ee,...Pe,style:{..._d,direction:m?"rtl":"ltr",width:"100%",height:"100%",writingMode:Oe}}},getRootProps:Se,getThumbProps:Ke,marks:D,open:L,range:S,rootRef:Q,trackLeap:Qe,trackOffset:Ce,values:C,getThumbStyle:Ft}}const Td=s=>!s||!xs(s);function bd(s){return hd("MuiSlider",s)}const Bt=cd("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Nd=s=>{const{open:u}=s;return{offset:lr(u&&Bt.valueLabelOpen),circle:Bt.valueLabelCircle,label:Bt.valueLabelLabel}};function Ad(s){const{children:u,className:T,value:N}=s,b=Nd(s);return u?ye.cloneElement(u,{className:lr(u.props.className)},_e.jsxs(ye.Fragment,{children:[u.props.children,_e.jsx("span",{className:lr(b.offset,T),"aria-hidden":!0,children:_e.jsx("span",{className:b.circle,children:_e.jsx("span",{className:b.label,children:N})})})]})):null}function gu(s){return s}const Fd=Vn("span",{name:"MuiSlider",slot:"Root",overridesResolver:(s,u)=>{const{ownerState:T}=s;return[u.root,u[`color${Rn(T.color)}`],T.size!=="medium"&&u[`size${Rn(T.size)}`],T.marked&&u.marked,T.orientation==="vertical"&&u.vertical,T.track==="inverted"&&u.trackInverted,T.track===!1&&u.trackFalse]}})(ur(({theme:s})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Bt.disabled}`]:{pointerEvents:"none",cursor:"default",color:(s.vars||s).palette.grey[400]},[`&.${Bt.dragging}`]:{[`& .${Bt.thumb}, & .${Bt.track}`]:{transition:"none"}},variants:[...Object.entries(s.palette).filter(co()).map(([u])=>({props:{color:u},style:{color:(s.vars||s).palette[u].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Md=Vn("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(s,u)=>u.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Ld=Vn("span",{name:"MuiSlider",slot:"Track",overridesResolver:(s,u)=>u.track})(ur(({theme:s})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:s.transitions.create(["left","width","bottom","height"],{duration:s.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(s.palette).filter(co()).map(([u])=>({props:{color:u,track:"inverted"},style:{...s.vars?{backgroundColor:s.vars.palette.Slider[`${u}Track`],borderColor:s.vars.palette.Slider[`${u}Track`]}:{backgroundColor:iu(s.palette[u].main,.62),borderColor:iu(s.palette[u].main,.62),...s.applyStyles("dark",{backgroundColor:su(s.palette[u].main,.5)}),...s.applyStyles("dark",{borderColor:su(s.palette[u].main,.5)})}}}))]}))),Id=Vn("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(s,u)=>{const{ownerState:T}=s;return[u.thumb,u[`thumbColor${Rn(T.color)}`],T.size!=="medium"&&u[`thumbSize${Rn(T.size)}`]]}})(ur(({theme:s})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:s.transitions.create(["box-shadow","left","bottom"],{duration:s.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(s.vars||s).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Bt.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(s.palette).filter(co()).map(([u])=>({props:{color:u},style:{[`&:hover, &.${Bt.focusVisible}`]:{...s.vars?{boxShadow:`0px 0px 0px 8px rgba(${s.vars.palette[u].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${au(s.palette[u].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${Bt.active}`]:{...s.vars?{boxShadow:`0px 0px 0px 14px rgba(${s.vars.palette[u].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${au(s.palette[u].main,.16)}`}}}}))]}))),Dd=Vn(Ad,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(s,u)=>u.valueLabel})(ur(({theme:s})=>({zIndex:1,whiteSpace:"nowrap",...s.typography.body2,fontWeight:500,transition:s.transitions.create(["transform"],{duration:s.transitions.duration.shortest}),position:"absolute",backgroundColor:(s.vars||s).palette.grey[600],borderRadius:2,color:(s.vars||s).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Bt.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Bt.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:s.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),Od=Vn("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:s=>Mc(s)&&s!=="markActive",overridesResolver:(s,u)=>{const{markActive:T}=s;return[u.mark,T&&u.markActive]}})(ur(({theme:s})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(s.vars||s).palette.background.paper,opacity:.8}}]}))),Gd=Vn("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:s=>Mc(s)&&s!=="markLabelActive",overridesResolver:(s,u)=>u.markLabel})(ur(({theme:s})=>({...s.typography.body2,color:(s.vars||s).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(s.vars||s).palette.text.primary}}]}))),zd=s=>{const{disabled:u,dragging:T,marked:N,orientation:b,track:m,classes:a,color:f,size:g}=s,y={root:["root",u&&"disabled",T&&"dragging",N&&"marked",b==="vertical"&&"vertical",m==="inverted"&&"trackInverted",m===!1&&"trackFalse",f&&`color${Rn(f)}`,g&&`size${Rn(g)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",u&&"disabled",g&&`thumbSize${Rn(g)}`,f&&`thumbColor${Rn(f)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return gd(y,bd,a)},Ud=({children:s})=>s,Bd=ye.forwardRef(function(u,T){const N=dd({props:u,name:"MuiSlider"}),b=fd(),{"aria-label":m,"aria-valuetext":a,"aria-labelledby":f,component:g="span",components:y={},componentsProps:_={},color:P="primary",classes:w,className:p,disableSwap:d=!1,disabled:v=!1,getAriaLabel:k,getAriaValueText:A,marks:c=!1,max:o=100,min:x=0,name:R,onChange:L,onChangeCommitted:G,orientation:I="horizontal",shiftStep:z=10,size:E="medium",step:M=1,scale:B=gu,slotProps:l,slots:S,tabIndex:C,track:D="normal",value:O,valueLabelDisplay:j="off",valueLabelFormat:H=gu,...Z}=N,Q={...N,isRtl:b,max:o,min:x,classes:w,disabled:v,disableSwap:d,orientation:I,marks:c,color:P,size:E,step:M,shiftStep:z,scale:B,track:D,valueLabelDisplay:j,valueLabelFormat:H},{axisProps:$,getRootProps:Y,getHiddenInputProps:te,getThumbProps:ae,open:le,active:U,axis:W,focusedThumbIndex:ne,range:re,dragging:ie,marks:he,values:pe,trackOffset:Ae,trackLeap:Ce,getThumbStyle:Qe}=Rd({...Q,rootRef:T});Q.marked=he.length>0&&he.some(Ze=>Ze.label),Q.dragging=ie,Q.focusedThumbIndex=ne;const Se=zd(Q),Ge=(S==null?void 0:S.root)??y.Root??Fd,bt=(S==null?void 0:S.rail)??y.Rail??Md,Ke=(S==null?void 0:S.track)??y.Track??Ld,Ft=(S==null?void 0:S.thumb)??y.Thumb??Id,Oe=(S==null?void 0:S.valueLabel)??y.ValueLabel??Dd,nt=(S==null?void 0:S.mark)??y.Mark??Od,ee=(S==null?void 0:S.markLabel)??y.MarkLabel??Gd,oe=(S==null?void 0:S.input)??y.Input??"input",de=(l==null?void 0:l.root)??_.root,Pe=(l==null?void 0:l.rail)??_.rail,Ee=(l==null?void 0:l.track)??_.track,me=(l==null?void 0:l.thumb)??_.thumb,Fe=(l==null?void 0:l.valueLabel)??_.valueLabel,Be=(l==null?void 0:l.mark)??_.mark,Me=(l==null?void 0:l.markLabel)??_.markLabel,Ve=(l==null?void 0:l.input)??_.input,rt=wn({elementType:Ge,getSlotProps:Y,externalSlotProps:de,externalForwardedProps:Z,additionalProps:{...Td(Ge)&&{as:g}},ownerState:{...Q,...de==null?void 0:de.ownerState},className:[Se.root,p]}),bn=wn({elementType:bt,externalSlotProps:Pe,ownerState:Q,className:Se.rail}),cr=wn({elementType:Ke,externalSlotProps:Ee,additionalProps:{style:{...$[W].offset(Ae),...$[W].leap(Ce)}},ownerState:{...Q,...Ee==null?void 0:Ee.ownerState},className:Se.track}),Hn=wn({elementType:Ft,getSlotProps:ae,externalSlotProps:me,ownerState:{...Q,...me==null?void 0:me.ownerState},className:Se.thumb}),bs=wn({elementType:Oe,externalSlotProps:Fe,ownerState:{...Q,...Fe==null?void 0:Fe.ownerState},className:Se.valueLabel}),hr=wn({elementType:nt,externalSlotProps:Be,ownerState:Q,className:Se.mark}),dr=wn({elementType:ee,externalSlotProps:Me,ownerState:Q,className:Se.markLabel}),Ns=wn({elementType:oe,getSlotProps:te,externalSlotProps:Ve,ownerState:Q});return _e.jsxs(Ge,{...rt,children:[_e.jsx(bt,{...bn}),_e.jsx(Ke,{...cr}),he.filter(Ze=>Ze.value>=x&&Ze.value<=o).map((Ze,it)=>{const jn=Ps(Ze.value,x,o),Nn=$[W].offset(jn);let Vt;return D===!1?Vt=pe.includes(Ze.value):Vt=D==="normal"&&(re?Ze.value>=pe[0]&&Ze.value<=pe[pe.length-1]:Ze.value<=pe[0])||D==="inverted"&&(re?Ze.value<=pe[0]||Ze.value>=pe[pe.length-1]:Ze.value>=pe[0]),_e.jsxs(ye.Fragment,{children:[_e.jsx(nt,{"data-index":it,...hr,...!xs(nt)&&{markActive:Vt},style:{...Nn,...hr.style},className:lr(hr.className,Vt&&Se.markActive)}),Ze.label!=null?_e.jsx(ee,{"aria-hidden":!0,"data-index":it,...dr,...!xs(ee)&&{markLabelActive:Vt},style:{...Nn,...dr.style},className:lr(Se.markLabel,dr.className,Vt&&Se.markLabelActive),children:Ze.label}):null]},it)}),pe.map((Ze,it)=>{const jn=Ps(Ze,x,o),Nn=$[W].offset(jn),Vt=j==="off"?Ud:Oe;return _e.jsx(Vt,{...!xs(Vt)&&{valueLabelFormat:H,valueLabelDisplay:j,value:typeof H=="function"?H(B(Ze),it):H,index:it,open:le===it||U===it||j==="on",disabled:v},...bs,children:_e.jsx(Ft,{"data-index":it,...Hn,className:lr(Se.thumb,Hn.className,U===it&&Se.active,ne===it&&Se.focusVisible),style:{...Nn,...Qe(it),...Hn.style},children:_e.jsx(oe,{"data-index":it,"aria-label":k?k(it):m,"aria-valuenow":B(Ze),"aria-labelledby":f,"aria-valuetext":A?A(B(Ze),it):a,value:pe[it],...Ns})})},it)})]})}),Vd=ks(_e.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Hd=ks(_e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),jd=ks([_e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),_e.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn"),qd=ks(_e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut");var ws={exports:{}},Mr={},Ka={},Ya={},pu;function Re(){return pu||(pu=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s._registerNode=s.Konva=s.glob=void 0;const u=Math.PI/180;function T(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}s.glob=typeof ou<"u"?ou:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},s.Konva={_global:s.glob,version:"9.3.18",isBrowser:T(),isUnminified:/param/.test((function(b){}).toString()),dblClickWindow:400,getAngle(b){return s.Konva.angleDeg?b*u:b},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return s.Konva.DD.isDragging},isTransforming(){var b;return(b=s.Konva.Transformer)===null||b===void 0?void 0:b.isTransforming()},isDragReady(){return!!s.Konva.DD.node},releaseCanvasOnDestroy:!0,document:s.glob.document,_injectGlobal(b){s.glob.Konva=b}};const N=b=>{s.Konva[b.prototype.getClassName()]=b};s._registerNode=N,s.Konva._injectGlobal(s.Konva)}(Ya)),Ya}var Xa={},mu;function Je(){return mu||(mu=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Util=s.Transform=void 0;const u=Re();class T{constructor(x=[1,0,0,1,0,0]){this.dirty=!1,this.m=x&&x.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new T(this.m)}copyInto(x){x.m[0]=this.m[0],x.m[1]=this.m[1],x.m[2]=this.m[2],x.m[3]=this.m[3],x.m[4]=this.m[4],x.m[5]=this.m[5]}point(x){const R=this.m;return{x:R[0]*x.x+R[2]*x.y+R[4],y:R[1]*x.x+R[3]*x.y+R[5]}}translate(x,R){return this.m[4]+=this.m[0]*x+this.m[2]*R,this.m[5]+=this.m[1]*x+this.m[3]*R,this}scale(x,R){return this.m[0]*=x,this.m[1]*=x,this.m[2]*=R,this.m[3]*=R,this}rotate(x){const R=Math.cos(x),L=Math.sin(x),G=this.m[0]*R+this.m[2]*L,I=this.m[1]*R+this.m[3]*L,z=this.m[0]*-L+this.m[2]*R,E=this.m[1]*-L+this.m[3]*R;return this.m[0]=G,this.m[1]=I,this.m[2]=z,this.m[3]=E,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(x,R){const L=this.m[0]+this.m[2]*R,G=this.m[1]+this.m[3]*R,I=this.m[2]+this.m[0]*x,z=this.m[3]+this.m[1]*x;return this.m[0]=L,this.m[1]=G,this.m[2]=I,this.m[3]=z,this}multiply(x){const R=this.m[0]*x.m[0]+this.m[2]*x.m[1],L=this.m[1]*x.m[0]+this.m[3]*x.m[1],G=this.m[0]*x.m[2]+this.m[2]*x.m[3],I=this.m[1]*x.m[2]+this.m[3]*x.m[3],z=this.m[0]*x.m[4]+this.m[2]*x.m[5]+this.m[4],E=this.m[1]*x.m[4]+this.m[3]*x.m[5]+this.m[5];return this.m[0]=R,this.m[1]=L,this.m[2]=G,this.m[3]=I,this.m[4]=z,this.m[5]=E,this}invert(){const x=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),R=this.m[3]*x,L=-this.m[1]*x,G=-this.m[2]*x,I=this.m[0]*x,z=x*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),E=x*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=R,this.m[1]=L,this.m[2]=G,this.m[3]=I,this.m[4]=z,this.m[5]=E,this}getMatrix(){return this.m}decompose(){const x=this.m[0],R=this.m[1],L=this.m[2],G=this.m[3],I=this.m[4],z=this.m[5],E=x*G-R*L,M={x:I,y:z,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(x!=0||R!=0){const B=Math.sqrt(x*x+R*R);M.rotation=R>0?Math.acos(x/B):-Math.acos(x/B),M.scaleX=B,M.scaleY=E/B,M.skewX=(x*L+R*G)/E,M.skewY=0}else if(L!=0||G!=0){const B=Math.sqrt(L*L+G*G);M.rotation=Math.PI/2-(G>0?Math.acos(-L/B):-Math.acos(L/B)),M.scaleX=E/B,M.scaleY=B,M.skewX=0,M.skewY=(x*L+R*G)/E}return M.rotation=s.Util._getRotation(M.rotation),M}}s.Transform=T;const N="[object Array]",b="[object Number]",m="[object String]",a="[object Boolean]",f=Math.PI/180,g=180/Math.PI,y="#",_="",P="0",w="Konva warning: ",p="Konva error: ",d="rgb(",v={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},k=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let A=[];const c=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(o){setTimeout(o,60)};s.Util={_isElement(o){return!!(o&&o.nodeType==1)},_isFunction(o){return!!(o&&o.constructor&&o.call&&o.apply)},_isPlainObject(o){return!!o&&o.constructor===Object},_isArray(o){return Object.prototype.toString.call(o)===N},_isNumber(o){return Object.prototype.toString.call(o)===b&&!isNaN(o)&&isFinite(o)},_isString(o){return Object.prototype.toString.call(o)===m},_isBoolean(o){return Object.prototype.toString.call(o)===a},isObject(o){return o instanceof Object},isValidSelector(o){if(typeof o!="string")return!1;const x=o[0];return x==="#"||x==="."||x===x.toUpperCase()},_sign(o){return o===0||o>0?1:-1},requestAnimFrame(o){A.push(o),A.length===1&&c(function(){const x=A;A=[],x.forEach(function(R){R()})})},createCanvasElement(){const o=document.createElement("canvas");try{o.style=o.style||{}}catch{}return o},createImageElement(){return document.createElement("img")},_isInDocument(o){for(;o=o.parentNode;)if(o==document)return!0;return!1},_urlToImage(o,x){const R=s.Util.createImageElement();R.onload=function(){x(R)},R.src=o},_rgbToHex(o,x,R){return((1<<24)+(o<<16)+(x<<8)+R).toString(16).slice(1)},_hexToRgb(o){o=o.replace(y,_);const x=parseInt(o,16);return{r:x>>16&255,g:x>>8&255,b:x&255}},getRandomColor(){let o=(Math.random()*16777215<<0).toString(16);for(;o.length<6;)o=P+o;return y+o},getRGB(o){let x;return o in v?(x=v[o],{r:x[0],g:x[1],b:x[2]}):o[0]===y?this._hexToRgb(o.substring(1)):o.substr(0,4)===d?(x=k.exec(o.replace(/ /g,"")),{r:parseInt(x[1],10),g:parseInt(x[2],10),b:parseInt(x[3],10)}):{r:0,g:0,b:0}},colorToRGBA(o){return o=o||"black",s.Util._namedColorToRBA(o)||s.Util._hex3ColorToRGBA(o)||s.Util._hex4ColorToRGBA(o)||s.Util._hex6ColorToRGBA(o)||s.Util._hex8ColorToRGBA(o)||s.Util._rgbColorToRGBA(o)||s.Util._rgbaColorToRGBA(o)||s.Util._hslColorToRGBA(o)},_namedColorToRBA(o){const x=v[o.toLowerCase()];return x?{r:x[0],g:x[1],b:x[2],a:1}:null},_rgbColorToRGBA(o){if(o.indexOf("rgb(")===0){o=o.match(/rgb\(([^)]+)\)/)[1];const x=o.split(/ *, */).map(Number);return{r:x[0],g:x[1],b:x[2],a:1}}},_rgbaColorToRGBA(o){if(o.indexOf("rgba(")===0){o=o.match(/rgba\(([^)]+)\)/)[1];const x=o.split(/ *, */).map((R,L)=>R.slice(-1)==="%"?L===3?parseInt(R)/100:parseInt(R)/100*255:Number(R));return{r:x[0],g:x[1],b:x[2],a:x[3]}}},_hex8ColorToRGBA(o){if(o[0]==="#"&&o.length===9)return{r:parseInt(o.slice(1,3),16),g:parseInt(o.slice(3,5),16),b:parseInt(o.slice(5,7),16),a:parseInt(o.slice(7,9),16)/255}},_hex6ColorToRGBA(o){if(o[0]==="#"&&o.length===7)return{r:parseInt(o.slice(1,3),16),g:parseInt(o.slice(3,5),16),b:parseInt(o.slice(5,7),16),a:1}},_hex4ColorToRGBA(o){if(o[0]==="#"&&o.length===5)return{r:parseInt(o[1]+o[1],16),g:parseInt(o[2]+o[2],16),b:parseInt(o[3]+o[3],16),a:parseInt(o[4]+o[4],16)/255}},_hex3ColorToRGBA(o){if(o[0]==="#"&&o.length===4)return{r:parseInt(o[1]+o[1],16),g:parseInt(o[2]+o[2],16),b:parseInt(o[3]+o[3],16),a:1}},_hslColorToRGBA(o){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(o)){const[x,...R]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(o),L=Number(R[0])/360,G=Number(R[1])/100,I=Number(R[2])/100;let z,E,M;if(G===0)return M=I*255,{r:Math.round(M),g:Math.round(M),b:Math.round(M),a:1};I<.5?z=I*(1+G):z=I+G-I*G;const B=2*I-z,l=[0,0,0];for(let S=0;S<3;S++)E=L+1/3*-(S-1),E<0&&E++,E>1&&E--,6*E<1?M=B+(z-B)*6*E:2*E<1?M=z:3*E<2?M=B+(z-B)*(2/3-E)*6:M=B,l[S]=M*255;return{r:Math.round(l[0]),g:Math.round(l[1]),b:Math.round(l[2]),a:1}}},haveIntersection(o,x){return!(x.x>o.x+o.width||x.x+x.width<o.x||x.y>o.y+o.height||x.y+x.height<o.y)},cloneObject(o){const x={};for(const R in o)this._isPlainObject(o[R])?x[R]=this.cloneObject(o[R]):this._isArray(o[R])?x[R]=this.cloneArray(o[R]):x[R]=o[R];return x},cloneArray(o){return o.slice(0)},degToRad(o){return o*f},radToDeg(o){return o*g},_degToRad(o){return s.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),s.Util.degToRad(o)},_radToDeg(o){return s.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),s.Util.radToDeg(o)},_getRotation(o){return u.Konva.angleDeg?s.Util.radToDeg(o):o},_capitalize(o){return o.charAt(0).toUpperCase()+o.slice(1)},throw(o){throw new Error(p+o)},error(o){console.error(p+o)},warn(o){u.Konva.showWarnings&&console.warn(w+o)},each(o,x){for(const R in o)x(R,o[R])},_inRange(o,x,R){return x<=o&&o<R},_getProjectionToSegment(o,x,R,L,G,I){let z,E,M;const B=(o-R)*(o-R)+(x-L)*(x-L);if(B==0)z=o,E=x,M=(G-R)*(G-R)+(I-L)*(I-L);else{const l=((G-o)*(R-o)+(I-x)*(L-x))/B;l<0?(z=o,E=x,M=(o-G)*(o-G)+(x-I)*(x-I)):l>1?(z=R,E=L,M=(R-G)*(R-G)+(L-I)*(L-I)):(z=o+l*(R-o),E=x+l*(L-x),M=(z-G)*(z-G)+(E-I)*(E-I))}return[z,E,M]},_getProjectionToLine(o,x,R){const L=s.Util.cloneObject(o);let G=Number.MAX_VALUE;return x.forEach(function(I,z){if(!R&&z===x.length-1)return;const E=x[(z+1)%x.length],M=s.Util._getProjectionToSegment(I.x,I.y,E.x,E.y,o.x,o.y),B=M[0],l=M[1],S=M[2];S<G&&(L.x=B,L.y=l,G=S)}),L},_prepareArrayForTween(o,x,R){const L=[],G=[];if(o.length>x.length){const z=x;x=o,o=z}for(let z=0;z<o.length;z+=2)L.push({x:o[z],y:o[z+1]});for(let z=0;z<x.length;z+=2)G.push({x:x[z],y:x[z+1]});const I=[];return G.forEach(function(z){const E=s.Util._getProjectionToLine(z,L,R);I.push(E.x),I.push(E.y)}),I},_prepareToStringify(o){let x;o.visitedByCircularReferenceRemoval=!0;for(const R in o)if(o.hasOwnProperty(R)&&o[R]&&typeof o[R]=="object"){if(x=Object.getOwnPropertyDescriptor(o,R),o[R].visitedByCircularReferenceRemoval||s.Util._isElement(o[R]))if(x.configurable)delete o[R];else return null;else if(s.Util._prepareToStringify(o[R])===null)if(x.configurable)delete o[R];else return null}return delete o.visitedByCircularReferenceRemoval,o},_assign(o,x){for(const R in x)o[R]=x[R];return o},_getFirstPointerId(o){return o.touches?o.changedTouches[0].identifier:o.pointerId||999},releaseCanvas(...o){u.Konva.releaseCanvasOnDestroy&&o.forEach(x=>{x.width=0,x.height=0})},drawRoundedRectPath(o,x,R,L){let G=0,I=0,z=0,E=0;typeof L=="number"?G=I=z=E=Math.min(L,x/2,R/2):(G=Math.min(L[0]||0,x/2,R/2),I=Math.min(L[1]||0,x/2,R/2),E=Math.min(L[2]||0,x/2,R/2),z=Math.min(L[3]||0,x/2,R/2)),o.moveTo(G,0),o.lineTo(x-I,0),o.arc(x-I,I,I,Math.PI*3/2,0,!1),o.lineTo(x,R-E),o.arc(x-E,R-E,E,0,Math.PI/2,!1),o.lineTo(z,R),o.arc(z,R-z,z,Math.PI/2,Math.PI,!1),o.lineTo(0,G),o.arc(G,G,G,Math.PI,Math.PI*3/2,!1)}}}(Xa)),Xa}var Lr={},Qa={},Rt={},vu;function Ne(){if(vu)return Rt;vu=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.RGBComponent=N,Rt.alphaComponent=b,Rt.getNumberValidator=m,Rt.getNumberOrArrayOfNumbersValidator=a,Rt.getNumberOrAutoValidator=f,Rt.getStringValidator=g,Rt.getStringOrGradientValidator=y,Rt.getFunctionValidator=_,Rt.getNumberArrayValidator=P,Rt.getBooleanValidator=w,Rt.getComponentValidator=p;const s=Re(),u=Je();function T(d){return u.Util._isString(d)?'"'+d+'"':Object.prototype.toString.call(d)==="[object Number]"||u.Util._isBoolean(d)?d:Object.prototype.toString.call(d)}function N(d){return d>255?255:d<0?0:Math.round(d)}function b(d){return d>1?1:d<1e-4?1e-4:d}function m(){if(s.Konva.isUnminified)return function(d,v){return u.Util._isNumber(d)||u.Util.warn(T(d)+' is a not valid value for "'+v+'" attribute. The value should be a number.'),d}}function a(d){if(s.Konva.isUnminified)return function(v,k){let A=u.Util._isNumber(v),c=u.Util._isArray(v)&&v.length==d;return!A&&!c&&u.Util.warn(T(v)+' is a not valid value for "'+k+'" attribute. The value should be a number or Array<number>('+d+")"),v}}function f(){if(s.Konva.isUnminified)return function(d,v){var k=u.Util._isNumber(d),A=d==="auto";return k||A||u.Util.warn(T(d)+' is a not valid value for "'+v+'" attribute. The value should be a number or "auto".'),d}}function g(){if(s.Konva.isUnminified)return function(d,v){return u.Util._isString(d)||u.Util.warn(T(d)+' is a not valid value for "'+v+'" attribute. The value should be a string.'),d}}function y(){if(s.Konva.isUnminified)return function(d,v){const k=u.Util._isString(d),A=Object.prototype.toString.call(d)==="[object CanvasGradient]"||d&&d.addColorStop;return k||A||u.Util.warn(T(d)+' is a not valid value for "'+v+'" attribute. The value should be a string or a native gradient.'),d}}function _(){if(s.Konva.isUnminified)return function(d,v){return u.Util._isFunction(d)||u.Util.warn(T(d)+' is a not valid value for "'+v+'" attribute. The value should be a function.'),d}}function P(){if(s.Konva.isUnminified)return function(d,v){const k=Int8Array?Object.getPrototypeOf(Int8Array):null;return k&&d instanceof k||(u.Util._isArray(d)?d.forEach(function(A){u.Util._isNumber(A)||u.Util.warn('"'+v+'" attribute has non numeric element '+A+". Make sure that all elements are numbers.")}):u.Util.warn(T(d)+' is a not valid value for "'+v+'" attribute. The value should be a array of numbers.')),d}}function w(){if(s.Konva.isUnminified)return function(d,v){var k=d===!0||d===!1;return k||u.Util.warn(T(d)+' is a not valid value for "'+v+'" attribute. The value should be a boolean.'),d}}function p(d){if(s.Konva.isUnminified)return function(v,k){return v==null||u.Util.isObject(v)||u.Util.warn(T(v)+' is a not valid value for "'+k+'" attribute. The value should be an object with properties '+d),v}}return Rt}var yu;function be(){return yu||(yu=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Factory=void 0;const u=Je(),T=Ne(),N="get",b="set";s.Factory={addGetterSetter(m,a,f,g,y){s.Factory.addGetter(m,a,f),s.Factory.addSetter(m,a,g,y),s.Factory.addOverloadedGetterSetter(m,a)},addGetter(m,a,f){var g=N+u.Util._capitalize(a);m.prototype[g]=m.prototype[g]||function(){const y=this.attrs[a];return y===void 0?f:y}},addSetter(m,a,f,g){var y=b+u.Util._capitalize(a);m.prototype[y]||s.Factory.overWriteSetter(m,a,f,g)},overWriteSetter(m,a,f,g){var y=b+u.Util._capitalize(a);m.prototype[y]=function(_){return f&&_!==void 0&&_!==null&&(_=f.call(this,_,a)),this._setAttr(a,_),g&&g.call(this),this}},addComponentsGetterSetter(m,a,f,g,y){const _=f.length,P=u.Util._capitalize,w=N+P(a),p=b+P(a);m.prototype[w]=function(){const v={};for(let k=0;k<_;k++){const A=f[k];v[A]=this.getAttr(a+P(A))}return v};const d=(0,T.getComponentValidator)(f);m.prototype[p]=function(v){const k=this.attrs[a];g&&(v=g.call(this,v,a)),d&&d.call(this,v,a);for(const A in v)v.hasOwnProperty(A)&&this._setAttr(a+P(A),v[A]);return v||f.forEach(A=>{this._setAttr(a+P(A),void 0)}),this._fireChangeEvent(a,k,v),y&&y.call(this),this},s.Factory.addOverloadedGetterSetter(m,a)},addOverloadedGetterSetter(m,a){var f=u.Util._capitalize(a),g=b+f,y=N+f;m.prototype[a]=function(){return arguments.length?(this[g](arguments[0]),this):this[y]()}},addDeprecatedGetterSetter(m,a,f,g){u.Util.error("Adding deprecated "+a);const y=N+u.Util._capitalize(a),_=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";m.prototype[y]=function(){u.Util.error(_);const P=this.attrs[a];return P===void 0?f:P},s.Factory.addSetter(m,a,g,function(){u.Util.error(_)}),s.Factory.addOverloadedGetterSetter(m,a)},backCompat(m,a){u.Util.each(a,function(f,g){const y=m.prototype[g],_=N+u.Util._capitalize(f),P=b+u.Util._capitalize(f);function w(){y.apply(this,arguments),u.Util.error('"'+f+'" method is deprecated and will be removed soon. Use ""'+g+'" instead.')}m.prototype[f]=w,m.prototype[_]=w,m.prototype[P]=w})},afterSetFilter(){this._filterUpToDate=!1}}}(Qa)),Qa}var hn={},dn={},_u;function Oc(){if(_u)return dn;_u=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.HitContext=dn.SceneContext=dn.Context=void 0;const s=Je(),u=Re();function T(A){const c=[],o=A.length,x=s.Util;for(let R=0;R<o;R++){let L=A[R];x._isNumber(L)?L=Math.round(L*1e3)/1e3:x._isString(L)||(L=L+""),c.push(L)}return c}const N=",",b="(",m=")",a="([",f="])",g=";",y="()",_="=",P=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],w=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],p=100;let d=class{constructor(c){this.canvas=c,u.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(c){c.fillEnabled()&&this._fill(c)}_fill(c){}strokeShape(c){c.hasStroke()&&this._stroke(c)}_stroke(c){}fillStrokeShape(c){c.attrs.fillAfterStrokeEnabled?(this.strokeShape(c),this.fillShape(c)):(this.fillShape(c),this.strokeShape(c))}getTrace(c,o){let x=this.traceArr,R=x.length,L="",G,I,z,E;for(G=0;G<R;G++)I=x[G],z=I.method,z?(E=I.args,L+=z,c?L+=y:s.Util._isArray(E[0])?L+=a+E.join(N)+f:(o&&(E=E.map(M=>typeof M=="number"?Math.floor(M):M)),L+=b+E.join(N)+m)):(L+=I.property,c||(L+=_+I.val)),L+=g;return L}clearTrace(){this.traceArr=[]}_trace(c){let o=this.traceArr,x;o.push(c),x=o.length,x>=p&&o.shift()}reset(){const c=this.getCanvas().getPixelRatio();this.setTransform(1*c,0,0,1*c,0,0)}getCanvas(){return this.canvas}clear(c){const o=this.getCanvas();c?this.clearRect(c.x||0,c.y||0,c.width||0,c.height||0):this.clearRect(0,0,o.getWidth()/o.pixelRatio,o.getHeight()/o.pixelRatio)}_applyLineCap(c){const o=c.attrs.lineCap;o&&this.setAttr("lineCap",o)}_applyOpacity(c){const o=c.getAbsoluteOpacity();o!==1&&this.setAttr("globalAlpha",o)}_applyLineJoin(c){const o=c.attrs.lineJoin;o&&this.setAttr("lineJoin",o)}setAttr(c,o){this._context[c]=o}arc(c,o,x,R,L,G){this._context.arc(c,o,x,R,L,G)}arcTo(c,o,x,R,L){this._context.arcTo(c,o,x,R,L)}beginPath(){this._context.beginPath()}bezierCurveTo(c,o,x,R,L,G){this._context.bezierCurveTo(c,o,x,R,L,G)}clearRect(c,o,x,R){this._context.clearRect(c,o,x,R)}clip(...c){this._context.clip.apply(this._context,c)}closePath(){this._context.closePath()}createImageData(c,o){const x=arguments;if(x.length===2)return this._context.createImageData(c,o);if(x.length===1)return this._context.createImageData(c)}createLinearGradient(c,o,x,R){return this._context.createLinearGradient(c,o,x,R)}createPattern(c,o){return this._context.createPattern(c,o)}createRadialGradient(c,o,x,R,L,G){return this._context.createRadialGradient(c,o,x,R,L,G)}drawImage(c,o,x,R,L,G,I,z,E){const M=arguments,B=this._context;M.length===3?B.drawImage(c,o,x):M.length===5?B.drawImage(c,o,x,R,L):M.length===9&&B.drawImage(c,o,x,R,L,G,I,z,E)}ellipse(c,o,x,R,L,G,I,z){this._context.ellipse(c,o,x,R,L,G,I,z)}isPointInPath(c,o,x,R){return x?this._context.isPointInPath(x,c,o,R):this._context.isPointInPath(c,o,R)}fill(...c){this._context.fill.apply(this._context,c)}fillRect(c,o,x,R){this._context.fillRect(c,o,x,R)}strokeRect(c,o,x,R){this._context.strokeRect(c,o,x,R)}fillText(c,o,x,R){R?this._context.fillText(c,o,x,R):this._context.fillText(c,o,x)}measureText(c){return this._context.measureText(c)}getImageData(c,o,x,R){return this._context.getImageData(c,o,x,R)}lineTo(c,o){this._context.lineTo(c,o)}moveTo(c,o){this._context.moveTo(c,o)}rect(c,o,x,R){this._context.rect(c,o,x,R)}roundRect(c,o,x,R,L){this._context.roundRect(c,o,x,R,L)}putImageData(c,o,x){this._context.putImageData(c,o,x)}quadraticCurveTo(c,o,x,R){this._context.quadraticCurveTo(c,o,x,R)}restore(){this._context.restore()}rotate(c){this._context.rotate(c)}save(){this._context.save()}scale(c,o){this._context.scale(c,o)}setLineDash(c){this._context.setLineDash?this._context.setLineDash(c):"mozDash"in this._context?this._context.mozDash=c:"webkitLineDash"in this._context&&(this._context.webkitLineDash=c)}getLineDash(){return this._context.getLineDash()}setTransform(c,o,x,R,L,G){this._context.setTransform(c,o,x,R,L,G)}stroke(c){c?this._context.stroke(c):this._context.stroke()}strokeText(c,o,x,R){this._context.strokeText(c,o,x,R)}transform(c,o,x,R,L,G){this._context.transform(c,o,x,R,L,G)}translate(c,o){this._context.translate(c,o)}_enableTrace(){let c=this,o=P.length,x=this.setAttr,R,L;const G=function(I){let z=c[I],E;c[I]=function(){return L=T(Array.prototype.slice.call(arguments,0)),E=z.apply(c,arguments),c._trace({method:I,args:L}),E}};for(R=0;R<o;R++)G(P[R]);c.setAttr=function(){x.apply(c,arguments);const I=arguments[0];let z=arguments[1];(I==="shadowOffsetX"||I==="shadowOffsetY"||I==="shadowBlur")&&(z=z/this.canvas.getPixelRatio()),c._trace({property:I,val:z})}}_applyGlobalCompositeOperation(c){const o=c.attrs.globalCompositeOperation;!o||o==="source-over"||this.setAttr("globalCompositeOperation",o)}};dn.Context=d,w.forEach(function(A){Object.defineProperty(d.prototype,A,{get(){return this._context[A]},set(c){this._context[A]=c}})});class v extends d{constructor(c,{willReadFrequently:o=!1}={}){super(c),this._context=c._canvas.getContext("2d",{willReadFrequently:o})}_fillColor(c){const o=c.fill();this.setAttr("fillStyle",o),c._fillFunc(this)}_fillPattern(c){this.setAttr("fillStyle",c._getFillPattern()),c._fillFunc(this)}_fillLinearGradient(c){const o=c._getLinearGradient();o&&(this.setAttr("fillStyle",o),c._fillFunc(this))}_fillRadialGradient(c){const o=c._getRadialGradient();o&&(this.setAttr("fillStyle",o),c._fillFunc(this))}_fill(c){const o=c.fill(),x=c.getFillPriority();if(o&&x==="color"){this._fillColor(c);return}const R=c.getFillPatternImage();if(R&&x==="pattern"){this._fillPattern(c);return}const L=c.getFillLinearGradientColorStops();if(L&&x==="linear-gradient"){this._fillLinearGradient(c);return}const G=c.getFillRadialGradientColorStops();if(G&&x==="radial-gradient"){this._fillRadialGradient(c);return}o?this._fillColor(c):R?this._fillPattern(c):L?this._fillLinearGradient(c):G&&this._fillRadialGradient(c)}_strokeLinearGradient(c){const o=c.getStrokeLinearGradientStartPoint(),x=c.getStrokeLinearGradientEndPoint(),R=c.getStrokeLinearGradientColorStops(),L=this.createLinearGradient(o.x,o.y,x.x,x.y);if(R){for(let G=0;G<R.length;G+=2)L.addColorStop(R[G],R[G+1]);this.setAttr("strokeStyle",L)}}_stroke(c){const o=c.dash(),x=c.getStrokeScaleEnabled();if(c.hasStroke()){if(!x){this.save();const L=this.getCanvas().getPixelRatio();this.setTransform(L,0,0,L,0,0)}this._applyLineCap(c),o&&c.dashEnabled()&&(this.setLineDash(o),this.setAttr("lineDashOffset",c.dashOffset())),this.setAttr("lineWidth",c.strokeWidth()),c.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),c.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(c):this.setAttr("strokeStyle",c.stroke()),c._strokeFunc(this),x||this.restore()}}_applyShadow(c){var o,x,R;const L=(o=c.getShadowRGBA())!==null&&o!==void 0?o:"black",G=(x=c.getShadowBlur())!==null&&x!==void 0?x:5,I=(R=c.getShadowOffset())!==null&&R!==void 0?R:{x:0,y:0},z=c.getAbsoluteScale(),E=this.canvas.getPixelRatio(),M=z.x*E,B=z.y*E;this.setAttr("shadowColor",L),this.setAttr("shadowBlur",G*Math.min(Math.abs(M),Math.abs(B))),this.setAttr("shadowOffsetX",I.x*M),this.setAttr("shadowOffsetY",I.y*B)}}dn.SceneContext=v;class k extends d{constructor(c){super(c),this._context=c._canvas.getContext("2d",{willReadFrequently:!0})}_fill(c){this.save(),this.setAttr("fillStyle",c.colorKey),c._fillFuncHit(this),this.restore()}strokeShape(c){c.hasHitStroke()&&this._stroke(c)}_stroke(c){if(c.hasHitStroke()){const o=c.getStrokeScaleEnabled();if(!o){this.save();const L=this.getCanvas().getPixelRatio();this.setTransform(L,0,0,L,0,0)}this._applyLineCap(c);const x=c.hitStrokeWidth(),R=x==="auto"?c.strokeWidth():x;this.setAttr("lineWidth",R),this.setAttr("strokeStyle",c.colorKey),c._strokeFuncHit(this),o||this.restore()}}}return dn.HitContext=k,dn}var Su;function Es(){if(Su)return hn;Su=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.HitCanvas=hn.SceneCanvas=hn.Canvas=void 0;const s=Je(),u=Oc(),T=Re(),N=be(),b=Ne();let m;function a(){if(m)return m;const _=s.Util.createCanvasElement(),P=_.getContext("2d");return m=function(){const w=T.Konva._global.devicePixelRatio||1,p=P.webkitBackingStorePixelRatio||P.mozBackingStorePixelRatio||P.msBackingStorePixelRatio||P.oBackingStorePixelRatio||P.backingStorePixelRatio||1;return w/p}(),s.Util.releaseCanvas(_),m}let f=class{constructor(P){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const p=(P||{}).pixelRatio||T.Konva.pixelRatio||a();this.pixelRatio=p,this._canvas=s.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(P){const w=this.pixelRatio;this.pixelRatio=P,this.setSize(this.getWidth()/w,this.getHeight()/w)}setWidth(P){this.width=this._canvas.width=P*this.pixelRatio,this._canvas.style.width=P+"px";const w=this.pixelRatio;this.getContext()._context.scale(w,w)}setHeight(P){this.height=this._canvas.height=P*this.pixelRatio,this._canvas.style.height=P+"px";const w=this.pixelRatio;this.getContext()._context.scale(w,w)}getWidth(){return this.width}getHeight(){return this.height}setSize(P,w){this.setWidth(P||0),this.setHeight(w||0)}toDataURL(P,w){try{return this._canvas.toDataURL(P,w)}catch{try{return this._canvas.toDataURL()}catch(d){return s.Util.error("Unable to get data URL. "+d.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};hn.Canvas=f,N.Factory.addGetterSetter(f,"pixelRatio",void 0,(0,b.getNumberValidator)());class g extends f{constructor(P={width:0,height:0,willReadFrequently:!1}){super(P),this.context=new u.SceneContext(this,{willReadFrequently:P.willReadFrequently}),this.setSize(P.width,P.height)}}hn.SceneCanvas=g;class y extends f{constructor(P={width:0,height:0}){super(P),this.hitCanvas=!0,this.context=new u.HitContext(this),this.setSize(P.width,P.height)}}return hn.HitCanvas=y,hn}var Za={},Cu;function fo(){return Cu||(Cu=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.DD=void 0;const u=Re(),T=Je();s.DD={get isDragging(){let N=!1;return s.DD._dragElements.forEach(b=>{b.dragStatus==="dragging"&&(N=!0)}),N},justDragged:!1,get node(){let N;return s.DD._dragElements.forEach(b=>{N=b.node}),N},_dragElements:new Map,_drag(N){const b=[];s.DD._dragElements.forEach((m,a)=>{const{node:f}=m,g=f.getStage();g.setPointersPositions(N),m.pointerId===void 0&&(m.pointerId=T.Util._getFirstPointerId(N));const y=g._changedPointerPositions.find(_=>_.id===m.pointerId);if(y){if(m.dragStatus!=="dragging"){const _=f.dragDistance();if(Math.max(Math.abs(y.x-m.startPointerPos.x),Math.abs(y.y-m.startPointerPos.y))<_||(f.startDrag({evt:N}),!f.isDragging()))return}f._setDragPosition(N,m),b.push(f)}}),b.forEach(m=>{m.fire("dragmove",{type:"dragmove",target:m,evt:N},!0)})},_endDragBefore(N){const b=[];s.DD._dragElements.forEach(m=>{const{node:a}=m,f=a.getStage();if(N&&f.setPointersPositions(N),!f._changedPointerPositions.find(_=>_.id===m.pointerId))return;(m.dragStatus==="dragging"||m.dragStatus==="stopped")&&(s.DD.justDragged=!0,u.Konva._mouseListenClick=!1,u.Konva._touchListenClick=!1,u.Konva._pointerListenClick=!1,m.dragStatus="stopped");const y=m.node.getLayer()||m.node instanceof u.Konva.Stage&&m.node;y&&b.indexOf(y)===-1&&b.push(y)}),b.forEach(m=>{m.draw()})},_endDragAfter(N){s.DD._dragElements.forEach((b,m)=>{b.dragStatus==="stopped"&&b.node.fire("dragend",{type:"dragend",target:b.node,evt:N},!0),b.dragStatus!=="dragging"&&s.DD._dragElements.delete(m)})}},u.Konva.isBrowser&&(window.addEventListener("mouseup",s.DD._endDragBefore,!0),window.addEventListener("touchend",s.DD._endDragBefore,!0),window.addEventListener("touchcancel",s.DD._endDragBefore,!0),window.addEventListener("mousemove",s.DD._drag),window.addEventListener("touchmove",s.DD._drag),window.addEventListener("mouseup",s.DD._endDragAfter,!1),window.addEventListener("touchend",s.DD._endDragAfter,!1),window.addEventListener("touchcancel",s.DD._endDragAfter,!1))}(Za)),Za}var xu;function et(){if(xu)return Lr;xu=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.Node=void 0;const s=Je(),u=be(),T=Es(),N=Re(),b=fo(),m=Ne(),a="absoluteOpacity",f="allEventListeners",g="absoluteTransform",y="absoluteScale",_="canvas",P="Change",w="children",p="konva",d="listening",v="mouseenter",k="mouseleave",A="set",c="Shape",o=" ",x="stage",R="transform",L="Stage",G="visible",I=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(o);let z=1,E=class lo{constructor(l){this._id=z++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(l),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(l){(l===R||l===g)&&this._cache.get(l)?this._cache.get(l).dirty=!0:l?this._cache.delete(l):this._cache.clear()}_getCache(l,S){let C=this._cache.get(l);return(C===void 0||(l===R||l===g)&&C.dirty===!0)&&(C=S.call(this),this._cache.set(l,C)),C}_calculate(l,S,C){if(!this._attachedDepsListeners.get(l)){const D=S.map(O=>O+"Change.konva").join(o);this.on(D,()=>{this._clearCache(l)}),this._attachedDepsListeners.set(l,!0)}return this._getCache(l,C)}_getCanvasCache(){return this._cache.get(_)}_clearSelfAndDescendantCache(l){this._clearCache(l),l===g&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(_)){const{scene:l,filter:S,hit:C}=this._cache.get(_);s.Util.releaseCanvas(l,S,C),this._cache.delete(_)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(l){const S=l||{};let C={};(S.x===void 0||S.y===void 0||S.width===void 0||S.height===void 0)&&(C=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let D=Math.ceil(S.width||C.width),O=Math.ceil(S.height||C.height),j=S.pixelRatio,H=S.x===void 0?Math.floor(C.x):S.x,Z=S.y===void 0?Math.floor(C.y):S.y,Q=S.offset||0,$=S.drawBorder||!1,Y=S.hitCanvasPixelRatio||1;if(!D||!O){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const te=Math.abs(Math.round(C.x)-H)>.5?1:0,ae=Math.abs(Math.round(C.y)-Z)>.5?1:0;D+=Q*2+te,O+=Q*2+ae,H-=Q,Z-=Q;const le=new T.SceneCanvas({pixelRatio:j,width:D,height:O}),U=new T.SceneCanvas({pixelRatio:j,width:0,height:0,willReadFrequently:!0}),W=new T.HitCanvas({pixelRatio:Y,width:D,height:O}),ne=le.getContext(),re=W.getContext();return W.isCache=!0,le.isCache=!0,this._cache.delete(_),this._filterUpToDate=!1,S.imageSmoothingEnabled===!1&&(le.getContext()._context.imageSmoothingEnabled=!1,U.getContext()._context.imageSmoothingEnabled=!1),ne.save(),re.save(),ne.translate(-H,-Z),re.translate(-H,-Z),this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(y),this.drawScene(le,this),this.drawHit(W,this),this._isUnderCache=!1,ne.restore(),re.restore(),$&&(ne.save(),ne.beginPath(),ne.rect(0,0,D,O),ne.closePath(),ne.setAttr("strokeStyle","red"),ne.setAttr("lineWidth",5),ne.stroke(),ne.restore()),this._cache.set(_,{scene:le,filter:U,hit:W,x:H,y:Z}),this._requestDraw(),this}isCached(){return this._cache.has(_)}getClientRect(l){throw new Error('abstract "getClientRect" method call')}_transformedRect(l,S){const C=[{x:l.x,y:l.y},{x:l.x+l.width,y:l.y},{x:l.x+l.width,y:l.y+l.height},{x:l.x,y:l.y+l.height}];let D=1/0,O=1/0,j=-1/0,H=-1/0;const Z=this.getAbsoluteTransform(S);return C.forEach(function(Q){const $=Z.point(Q);D===void 0&&(D=j=$.x,O=H=$.y),D=Math.min(D,$.x),O=Math.min(O,$.y),j=Math.max(j,$.x),H=Math.max(H,$.y)}),{x:D,y:O,width:j-D,height:H-O}}_drawCachedSceneCanvas(l){l.save(),l._applyOpacity(this),l._applyGlobalCompositeOperation(this);const S=this._getCanvasCache();l.translate(S.x,S.y);const C=this._getCachedSceneCanvas(),D=C.pixelRatio;l.drawImage(C._canvas,0,0,C.width/D,C.height/D),l.restore()}_drawCachedHitCanvas(l){const S=this._getCanvasCache(),C=S.hit;l.save(),l.translate(S.x,S.y),l.drawImage(C._canvas,0,0,C.width/C.pixelRatio,C.height/C.pixelRatio),l.restore()}_getCachedSceneCanvas(){let l=this.filters(),S=this._getCanvasCache(),C=S.scene,D=S.filter,O=D.getContext(),j,H,Z,Q;if(l){if(!this._filterUpToDate){const $=C.pixelRatio;D.setSize(C.width/C.pixelRatio,C.height/C.pixelRatio);try{for(j=l.length,O.clear(),O.drawImage(C._canvas,0,0,C.getWidth()/$,C.getHeight()/$),H=O.getImageData(0,0,D.getWidth(),D.getHeight()),Z=0;Z<j;Z++){if(Q=l[Z],typeof Q!="function"){s.Util.error("Filter should be type of function, but got "+typeof Q+" instead. Please check correct filters");continue}Q.call(this,H),O.putImageData(H,0,0)}}catch(Y){s.Util.error("Unable to apply filter. "+Y.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return D}return C}on(l,S){if(this._cache&&this._cache.delete(f),arguments.length===3)return this._delegate.apply(this,arguments);let C=l.split(o),D=C.length,O,j,H,Z,Q;for(O=0;O<D;O++)j=C[O],H=j.split("."),Z=H[0],Q=H[1]||"",this.eventListeners[Z]||(this.eventListeners[Z]=[]),this.eventListeners[Z].push({name:Q,handler:S});return this}off(l,S){let C=(l||"").split(o),D=C.length,O,j,H,Z,Q,$;if(this._cache&&this._cache.delete(f),!l)for(j in this.eventListeners)this._off(j);for(O=0;O<D;O++)if(H=C[O],Z=H.split("."),Q=Z[0],$=Z[1],Q)this.eventListeners[Q]&&this._off(Q,$,S);else for(j in this.eventListeners)this._off(j,$,S);return this}dispatchEvent(l){const S={target:this,type:l.type,evt:l};return this.fire(l.type,S),this}addEventListener(l,S){return this.on(l,function(C){S.call(this,C.evt)}),this}removeEventListener(l){return this.off(l),this}_delegate(l,S,C){const D=this;this.on(l,function(O){const j=O.target.findAncestors(S,!0,D);for(let H=0;H<j.length;H++)O=s.Util.cloneObject(O),O.currentTarget=j[H],C.call(j[H],O)})}remove(){return this.isDragging()&&this.stopDrag(),b.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(x),this._clearSelfAndDescendantCache(G),this._clearSelfAndDescendantCache(d)}_remove(){this._clearCaches();const l=this.getParent();l&&l.children&&(l.children.splice(this.index,1),l._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(l){const S="get"+s.Util._capitalize(l);return s.Util._isFunction(this[S])?this[S]():this.attrs[l]}getAncestors(){let l=this.getParent(),S=[];for(;l;)S.push(l),l=l.getParent();return S}getAttrs(){return this.attrs||{}}setAttrs(l){return this._batchTransformChanges(()=>{let S,C;if(!l)return this;for(S in l)S!==w&&(C=A+s.Util._capitalize(S),s.Util._isFunction(this[C])?this[C](l[S]):this._setAttr(S,l[S]))}),this}isListening(){return this._getCache(d,this._isListening)}_isListening(l){if(!this.listening())return!1;const C=this.getParent();return C&&C!==l&&this!==l?C._isListening(l):!0}isVisible(){return this._getCache(G,this._isVisible)}_isVisible(l){if(!this.visible())return!1;const C=this.getParent();return C&&C!==l&&this!==l?C._isVisible(l):!0}shouldDrawHit(l,S=!1){if(l)return this._isVisible(l)&&this._isListening(l);const C=this.getLayer();let D=!1;b.DD._dragElements.forEach(j=>{j.dragStatus==="dragging"&&(j.node.nodeType==="Stage"||j.node.getLayer()===C)&&(D=!0)});const O=!S&&!N.Konva.hitOnDragEnabled&&(D||N.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!O}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let l=this.getDepth(),S=this,C=0,D,O,j,H;function Z($){for(D=[],O=$.length,j=0;j<O;j++)H=$[j],C++,H.nodeType!==c&&(D=D.concat(H.getChildren().slice())),H._id===S._id&&(j=O);D.length>0&&D[0].getDepth()<=l&&Z(D)}const Q=this.getStage();return S.nodeType!==L&&Q&&Z(Q.getChildren()),C}getDepth(){let l=0,S=this.parent;for(;S;)l++,S=S.parent;return l}_batchTransformChanges(l){this._batchingTransformChange=!0,l(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(R),this._clearSelfAndDescendantCache(g)),this._needClearTransformCache=!1}setPosition(l){return this._batchTransformChanges(()=>{this.x(l.x),this.y(l.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const l=this.getStage();if(!l)return null;const S=l.getPointerPosition();if(!S)return null;const C=this.getAbsoluteTransform().copy();return C.invert(),C.point(S)}getAbsolutePosition(l){let S=!1,C=this.parent;for(;C;){if(C.isCached()){S=!0;break}C=C.parent}S&&!l&&(l=!0);const D=this.getAbsoluteTransform(l).getMatrix(),O=new s.Transform,j=this.offset();return O.m=D.slice(),O.translate(j.x,j.y),O.getTranslation()}setAbsolutePosition(l){const{x:S,y:C,...D}=this._clearTransform();this.attrs.x=S,this.attrs.y=C,this._clearCache(R);const O=this._getAbsoluteTransform().copy();return O.invert(),O.translate(l.x,l.y),l={x:this.attrs.x+O.getTranslation().x,y:this.attrs.y+O.getTranslation().y},this._setTransform(D),this.setPosition({x:l.x,y:l.y}),this._clearCache(R),this._clearSelfAndDescendantCache(g),this}_setTransform(l){let S;for(S in l)this.attrs[S]=l[S]}_clearTransform(){const l={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,l}move(l){let S=l.x,C=l.y,D=this.x(),O=this.y();return S!==void 0&&(D+=S),C!==void 0&&(O+=C),this.setPosition({x:D,y:O}),this}_eachAncestorReverse(l,S){let C=[],D=this.getParent(),O,j;if(!(S&&S._id===this._id)){for(C.unshift(this);D&&(!S||D._id!==S._id);)C.unshift(D),D=D.parent;for(O=C.length,j=0;j<O;j++)l(C[j])}}rotate(l){return this.rotation(this.rotation()+l),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const l=this.index,S=this.parent.getChildren().length;return l<S-1?(this.parent.children.splice(l,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const l=this.index,S=this.parent.getChildren().length;return l<S-1?(this.parent.children.splice(l,1),this.parent.children.splice(l+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const l=this.index;return l>0?(this.parent.children.splice(l,1),this.parent.children.splice(l-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const l=this.index;return l>0?(this.parent.children.splice(l,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(l){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(l<0||l>=this.parent.children.length)&&s.Util.warn("Unexpected value "+l+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const S=this.index;return this.parent.children.splice(S,1),this.parent.children.splice(l,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let l=this.opacity();const S=this.getParent();return S&&!S._isUnderCache&&(l*=S.getAbsoluteOpacity()),l}moveTo(l){return this.getParent()!==l&&(this._remove(),l.add(this)),this}toObject(){let l=this.getAttrs(),S,C,D,O,j;const H={attrs:{},className:this.getClassName()};for(S in l)C=l[S],j=s.Util.isObject(C)&&!s.Util._isPlainObject(C)&&!s.Util._isArray(C),!j&&(D=typeof this[S]=="function"&&this[S],delete l[S],O=D?D.call(this):null,l[S]=C,O!==C&&(H.attrs[S]=C));return s.Util._prepareToStringify(H)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(l,S,C){const D=[];S&&this._isMatch(l)&&D.push(this);let O=this.parent;for(;O;){if(O===C)return D;O._isMatch(l)&&D.push(O),O=O.parent}return D}isAncestorOf(l){return!1}findAncestor(l,S,C){return this.findAncestors(l,S,C)[0]}_isMatch(l){if(!l)return!1;if(typeof l=="function")return l(this);let S=l.replace(/ /g,"").split(","),C=S.length,D,O;for(D=0;D<C;D++)if(O=S[D],s.Util.isValidSelector(O)||(s.Util.warn('Selector "'+O+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),O.charAt(0)==="#"){if(this.id()===O.slice(1))return!0}else if(O.charAt(0)==="."){if(this.hasName(O.slice(1)))return!0}else if(this.className===O||this.nodeType===O)return!0;return!1}getLayer(){const l=this.getParent();return l?l.getLayer():null}getStage(){return this._getCache(x,this._getStage)}_getStage(){const l=this.getParent();return l?l.getStage():null}fire(l,S={},C){return S.target=S.target||this,C?this._fireAndBubble(l,S):this._fire(l,S),this}getAbsoluteTransform(l){return l?this._getAbsoluteTransform(l):this._getCache(g,this._getAbsoluteTransform)}_getAbsoluteTransform(l){let S;if(l)return S=new s.Transform,this._eachAncestorReverse(function(C){const D=C.transformsEnabled();D==="all"?S.multiply(C.getTransform()):D==="position"&&S.translate(C.x()-C.offsetX(),C.y()-C.offsetY())},l),S;{S=this._cache.get(g)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(S):S.reset();const C=this.transformsEnabled();if(C==="all")S.multiply(this.getTransform());else if(C==="position"){const D=this.attrs.x||0,O=this.attrs.y||0,j=this.attrs.offsetX||0,H=this.attrs.offsetY||0;S.translate(D-j,O-H)}return S.dirty=!1,S}}getAbsoluteScale(l){let S=this;for(;S;)S._isUnderCache&&(l=S),S=S.getParent();const D=this.getAbsoluteTransform(l).decompose();return{x:D.scaleX,y:D.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(R,this._getTransform)}_getTransform(){var l,S;const C=this._cache.get(R)||new s.Transform;C.reset();const D=this.x(),O=this.y(),j=N.Konva.getAngle(this.rotation()),H=(l=this.attrs.scaleX)!==null&&l!==void 0?l:1,Z=(S=this.attrs.scaleY)!==null&&S!==void 0?S:1,Q=this.attrs.skewX||0,$=this.attrs.skewY||0,Y=this.attrs.offsetX||0,te=this.attrs.offsetY||0;return(D!==0||O!==0)&&C.translate(D,O),j!==0&&C.rotate(j),(Q!==0||$!==0)&&C.skew(Q,$),(H!==1||Z!==1)&&C.scale(H,Z),(Y!==0||te!==0)&&C.translate(-1*Y,-1*te),C.dirty=!1,C}clone(l){let S=s.Util.cloneObject(this.attrs),C,D,O,j,H;for(C in l)S[C]=l[C];const Z=new this.constructor(S);for(C in this.eventListeners)for(D=this.eventListeners[C],O=D.length,j=0;j<O;j++)H=D[j],H.name.indexOf(p)<0&&(Z.eventListeners[C]||(Z.eventListeners[C]=[]),Z.eventListeners[C].push(H));return Z}_toKonvaCanvas(l){l=l||{};const S=this.getClientRect(),C=this.getStage(),D=l.x!==void 0?l.x:Math.floor(S.x),O=l.y!==void 0?l.y:Math.floor(S.y),j=l.pixelRatio||1,H=new T.SceneCanvas({width:l.width||Math.ceil(S.width)||(C?C.width():0),height:l.height||Math.ceil(S.height)||(C?C.height():0),pixelRatio:j}),Z=H.getContext(),Q=new T.SceneCanvas({width:H.width/H.pixelRatio+Math.abs(D),height:H.height/H.pixelRatio+Math.abs(O),pixelRatio:H.pixelRatio});return l.imageSmoothingEnabled===!1&&(Z._context.imageSmoothingEnabled=!1),Z.save(),(D||O)&&Z.translate(-1*D,-1*O),this.drawScene(H,void 0,Q),Z.restore(),H}toCanvas(l){return this._toKonvaCanvas(l)._canvas}toDataURL(l){l=l||{};const S=l.mimeType||null,C=l.quality||null,D=this._toKonvaCanvas(l).toDataURL(S,C);return l.callback&&l.callback(D),D}toImage(l){return new Promise((S,C)=>{try{const D=l==null?void 0:l.callback;D&&delete l.callback,s.Util._urlToImage(this.toDataURL(l),function(O){S(O),D==null||D(O)})}catch(D){C(D)}})}toBlob(l){return new Promise((S,C)=>{try{const D=l==null?void 0:l.callback;D&&delete l.callback,this.toCanvas(l).toBlob(O=>{S(O),D==null||D(O)},l==null?void 0:l.mimeType,l==null?void 0:l.quality)}catch(D){C(D)}})}setSize(l){return this.width(l.width),this.height(l.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():N.Konva.dragDistance}_off(l,S,C){let D=this.eventListeners[l],O,j,H;for(O=0;O<D.length;O++)if(j=D[O].name,H=D[O].handler,(j!=="konva"||S==="konva")&&(!S||j===S)&&(!C||C===H)){if(D.splice(O,1),D.length===0){delete this.eventListeners[l];break}O--}}_fireChangeEvent(l,S,C){this._fire(l+P,{oldVal:S,newVal:C})}addName(l){if(!this.hasName(l)){const S=this.name(),C=S?S+" "+l:l;this.name(C)}return this}hasName(l){if(!l)return!1;const S=this.name();return S?(S||"").split(/\s/g).indexOf(l)!==-1:!1}removeName(l){const S=(this.name()||"").split(/\s/g),C=S.indexOf(l);return C!==-1&&(S.splice(C,1),this.name(S.join(" "))),this}setAttr(l,S){const C=this[A+s.Util._capitalize(l)];return s.Util._isFunction(C)?C.call(this,S):this._setAttr(l,S),this}_requestDraw(){if(N.Konva.autoDrawEnabled){const l=this.getLayer()||this.getStage();l==null||l.batchDraw()}}_setAttr(l,S){const C=this.attrs[l];C===S&&!s.Util.isObject(S)||(S==null?delete this.attrs[l]:this.attrs[l]=S,this._shouldFireChangeEvents&&this._fireChangeEvent(l,C,S),this._requestDraw())}_setComponentAttr(l,S,C){let D;C!==void 0&&(D=this.attrs[l],D||(this.attrs[l]=this.getAttr(l)),this.attrs[l][S]=C,this._fireChangeEvent(l,D,C))}_fireAndBubble(l,S,C){if(S&&this.nodeType===c&&(S.target=this),!((l===v||l===k)&&(C&&(this===C||this.isAncestorOf&&this.isAncestorOf(C))||this.nodeType==="Stage"&&!C))){this._fire(l,S);const O=(l===v||l===k)&&C&&C.isAncestorOf&&C.isAncestorOf(this)&&!C.isAncestorOf(this.parent);(S&&!S.cancelBubble||!S)&&this.parent&&this.parent.isListening()&&!O&&(C&&C.parent?this._fireAndBubble.call(this.parent,l,S,C):this._fireAndBubble.call(this.parent,l,S))}}_getProtoListeners(l){var S,C,D;const O=(S=this._cache.get(f))!==null&&S!==void 0?S:{};let j=O==null?void 0:O[l];if(j===void 0){j=[];let H=Object.getPrototypeOf(this);for(;H;){const Z=(D=(C=H.eventListeners)===null||C===void 0?void 0:C[l])!==null&&D!==void 0?D:[];j.push(...Z),H=Object.getPrototypeOf(H)}O[l]=j,this._cache.set(f,O)}return j}_fire(l,S){S=S||{},S.currentTarget=this,S.type=l;const C=this._getProtoListeners(l);if(C)for(var D=0;D<C.length;D++)C[D].handler.call(this,S);const O=this.eventListeners[l];if(O)for(var D=0;D<O.length;D++)O[D].handler.call(this,S)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(l){const S=l?l.pointerId:void 0,C=this.getStage(),D=this.getAbsolutePosition();if(!C)return;const O=C._getPointerById(S)||C._changedPointerPositions[0]||D;b.DD._dragElements.set(this._id,{node:this,startPointerPos:O,offset:{x:O.x-D.x,y:O.y-D.y},dragStatus:"ready",pointerId:S})}startDrag(l,S=!0){b.DD._dragElements.has(this._id)||this._createDragElement(l);const C=b.DD._dragElements.get(this._id);C.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:l&&l.evt},S)}_setDragPosition(l,S){const C=this.getStage()._getPointerById(S.pointerId);if(!C)return;let D={x:C.x-S.offset.x,y:C.y-S.offset.y};const O=this.dragBoundFunc();if(O!==void 0){const j=O.call(this,D,l);j?D=j:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==D.x||this._lastPos.y!==D.y)&&(this.setAbsolutePosition(D),this._requestDraw()),this._lastPos=D}stopDrag(l){const S=b.DD._dragElements.get(this._id);S&&(S.dragStatus="stopped"),b.DD._endDragBefore(l),b.DD._endDragAfter(l)}setDraggable(l){this._setAttr("draggable",l),this._dragChange()}isDragging(){const l=b.DD._dragElements.get(this._id);return l?l.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(l){if(!(!(l.evt.button!==void 0)||N.Konva.dragButtons.indexOf(l.evt.button)>=0)||this.isDragging())return;let D=!1;b.DD._dragElements.forEach(O=>{this.isAncestorOf(O.node)&&(D=!0)}),D||this._createDragElement(l)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const S=b.DD._dragElements.get(this._id),C=S&&S.dragStatus==="dragging",D=S&&S.dragStatus==="ready";C?this.stopDrag():D&&b.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(l={x:0,y:0}){const S=this.getStage();if(!S)return!1;const C={x:-l.x,y:-l.y,width:S.width()+2*l.x,height:S.height()+2*l.y};return s.Util.haveIntersection(C,this.getClientRect())}static create(l,S){return s.Util._isString(l)&&(l=JSON.parse(l)),this._createNode(l,S)}static _createNode(l,S){let C=lo.prototype.getClassName.call(l),D=l.children,O,j,H;S&&(l.attrs.container=S),N.Konva[C]||(s.Util.warn('Can not find a node with class name "'+C+'". Fallback to "Shape".'),C="Shape");const Z=N.Konva[C];if(O=new Z(l.attrs),D)for(j=D.length,H=0;H<j;H++)O.add(lo._createNode(D[H]));return O}};Lr.Node=E,E.prototype.nodeType="Node",E.prototype._attrsAffectingSize=[],E.prototype.eventListeners={},E.prototype.on.call(E.prototype,I,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(R),this._clearSelfAndDescendantCache(g)}),E.prototype.on.call(E.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(G)}),E.prototype.on.call(E.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(d)}),E.prototype.on.call(E.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const M=u.Factory.addGetterSetter;return M(E,"zIndex"),M(E,"absolutePosition"),M(E,"position"),M(E,"x",0,(0,m.getNumberValidator)()),M(E,"y",0,(0,m.getNumberValidator)()),M(E,"globalCompositeOperation","source-over",(0,m.getStringValidator)()),M(E,"opacity",1,(0,m.getNumberValidator)()),M(E,"name","",(0,m.getStringValidator)()),M(E,"id","",(0,m.getStringValidator)()),M(E,"rotation",0,(0,m.getNumberValidator)()),u.Factory.addComponentsGetterSetter(E,"scale",["x","y"]),M(E,"scaleX",1,(0,m.getNumberValidator)()),M(E,"scaleY",1,(0,m.getNumberValidator)()),u.Factory.addComponentsGetterSetter(E,"skew",["x","y"]),M(E,"skewX",0,(0,m.getNumberValidator)()),M(E,"skewY",0,(0,m.getNumberValidator)()),u.Factory.addComponentsGetterSetter(E,"offset",["x","y"]),M(E,"offsetX",0,(0,m.getNumberValidator)()),M(E,"offsetY",0,(0,m.getNumberValidator)()),M(E,"dragDistance",void 0,(0,m.getNumberValidator)()),M(E,"width",0,(0,m.getNumberValidator)()),M(E,"height",0,(0,m.getNumberValidator)()),M(E,"listening",!0,(0,m.getBooleanValidator)()),M(E,"preventDefault",!0,(0,m.getBooleanValidator)()),M(E,"filters",void 0,function(B){return this._filterUpToDate=!1,B}),M(E,"visible",!0,(0,m.getBooleanValidator)()),M(E,"transformsEnabled","all",(0,m.getStringValidator)()),M(E,"size"),M(E,"dragBoundFunc"),M(E,"draggable",!1,(0,m.getBooleanValidator)()),u.Factory.backCompat(E,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Lr}var Ir={},wu;function Rs(){if(wu)return Ir;wu=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.Container=void 0;const s=be(),u=et(),T=Ne();let N=class extends u.Node{constructor(){super(...arguments),this.children=[]}getChildren(m){if(!m)return this.children||[];const a=this.children||[],f=[];return a.forEach(function(g){m(g)&&f.push(g)}),f}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(m=>{m.parent=null,m.index=0,m.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(m=>{m.parent=null,m.index=0,m.destroy()}),this.children=[],this._requestDraw(),this}add(...m){if(m.length===0)return this;if(m.length>1){for(let f=0;f<m.length;f++)this.add(m[f]);return this}const a=m[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(m){return this._generalFind(m,!1)}findOne(m){const a=this._generalFind(m,!0);return a.length>0?a[0]:void 0}_generalFind(m,a){const f=[];return this._descendants(g=>{const y=g._isMatch(m);return y&&f.push(g),!!(y&&a)}),f}_descendants(m){let a=!1;const f=this.getChildren();for(const g of f){if(a=m(g),a)return!0;if(g.hasChildren()&&(a=g._descendants(m),a))return!0}return!1}toObject(){const m=u.Node.prototype.toObject.call(this);return m.children=[],this.getChildren().forEach(a=>{m.children.push(a.toObject())}),m}isAncestorOf(m){let a=m.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(m){const a=u.Node.prototype.clone.call(this,m);return this.getChildren().forEach(function(f){a.add(f.clone())}),a}getAllIntersections(m){const a=[];return this.find("Shape").forEach(f=>{f.isVisible()&&f.intersects(m)&&a.push(f)}),a}_clearSelfAndDescendantCache(m){var a;super._clearSelfAndDescendantCache(m),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(f){f._clearSelfAndDescendantCache(m)}))}_setChildrenIndices(){var m;(m=this.children)===null||m===void 0||m.forEach(function(a,f){a.index=f}),this._requestDraw()}drawScene(m,a,f){const g=this.getLayer(),y=m||g&&g.getCanvas(),_=y&&y.getContext(),P=this._getCanvasCache(),w=P&&P.scene,p=y&&y.isCache;if(!this.isVisible()&&!p)return this;if(w){_.save();const d=this.getAbsoluteTransform(a).getMatrix();_.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(_),_.restore()}else this._drawChildren("drawScene",y,a,f);return this}drawHit(m,a){if(!this.shouldDrawHit(a))return this;const f=this.getLayer(),g=m||f&&f.hitCanvas,y=g&&g.getContext(),_=this._getCanvasCache();if(_&&_.hit){y.save();const w=this.getAbsoluteTransform(a).getMatrix();y.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedHitCanvas(y),y.restore()}else this._drawChildren("drawHit",g,a);return this}_drawChildren(m,a,f,g){var y;const _=a&&a.getContext(),P=this.clipWidth(),w=this.clipHeight(),p=this.clipFunc(),d=typeof P=="number"&&typeof w=="number"||p,v=f===this;if(d){_.save();const A=this.getAbsoluteTransform(f);let c=A.getMatrix();_.transform(c[0],c[1],c[2],c[3],c[4],c[5]),_.beginPath();let o;if(p)o=p.call(this,_,this);else{const x=this.clipX(),R=this.clipY();_.rect(x||0,R||0,P,w)}_.clip.apply(_,o),c=A.copy().invert().getMatrix(),_.transform(c[0],c[1],c[2],c[3],c[4],c[5])}const k=!v&&this.globalCompositeOperation()!=="source-over"&&m==="drawScene";k&&(_.save(),_._applyGlobalCompositeOperation(this)),(y=this.children)===null||y===void 0||y.forEach(function(A){A[m](a,f,g)}),k&&_.restore(),d&&_.restore()}getClientRect(m={}){var a;const f=m.skipTransform,g=m.relativeTo;let y,_,P,w,p={x:1/0,y:1/0,width:0,height:0};const d=this;(a=this.children)===null||a===void 0||a.forEach(function(A){if(!A.visible())return;const c=A.getClientRect({relativeTo:d,skipShadow:m.skipShadow,skipStroke:m.skipStroke});c.width===0&&c.height===0||(y===void 0?(y=c.x,_=c.y,P=c.x+c.width,w=c.y+c.height):(y=Math.min(y,c.x),_=Math.min(_,c.y),P=Math.max(P,c.x+c.width),w=Math.max(w,c.y+c.height)))});const v=this.find("Shape");let k=!1;for(let A=0;A<v.length;A++)if(v[A]._isVisible(this)){k=!0;break}return k&&y!==void 0?p={x:y,y:_,width:P-y,height:w-_}:p={x:0,y:0,width:0,height:0},f?p:this._transformedRect(p,g)}};return Ir.Container=N,s.Factory.addComponentsGetterSetter(N,"clip",["x","y","width","height"]),s.Factory.addGetterSetter(N,"clipX",void 0,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(N,"clipY",void 0,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(N,"clipWidth",void 0,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(N,"clipHeight",void 0,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(N,"clipFunc"),Ir}var Ja={},kn={},Pu;function Gc(){if(Pu)return kn;Pu=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.getCapturedShape=N,kn.createEvent=b,kn.hasPointerCapture=m,kn.setPointerCapture=a,kn.releaseCapture=f;const s=Re(),u=new Map,T=s.Konva._global.PointerEvent!==void 0;function N(g){return u.get(g)}function b(g){return{evt:g,pointerId:g.pointerId}}function m(g,y){return u.get(g)===y}function a(g,y){f(g),y.getStage()&&(u.set(g,y),T&&y._fire("gotpointercapture",b(new PointerEvent("gotpointercapture"))))}function f(g,y){const _=u.get(g);if(!_)return;const P=_.getStage();P&&P.content,u.delete(g),T&&_._fire("lostpointercapture",b(new PointerEvent("lostpointercapture")))}return kn}var ku;function Wd(){return ku||(ku=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Stage=s.stages=void 0;const u=Je(),T=be(),N=Rs(),b=Re(),m=Es(),a=fo(),f=Re(),g=Gc(),y="Stage",_="string",P="px",w="mouseout",p="mouseleave",d="mouseover",v="mouseenter",k="mousemove",A="mousedown",c="mouseup",o="pointermove",x="pointerdown",R="pointerup",L="pointercancel",G="lostpointercapture",I="pointerout",z="pointerleave",E="pointerover",M="pointerenter",B="contextmenu",l="touchstart",S="touchend",C="touchmove",D="touchcancel",O="wheel",j=5,H=[[v,"_pointerenter"],[A,"_pointerdown"],[k,"_pointermove"],[c,"_pointerup"],[p,"_pointerleave"],[l,"_pointerdown"],[C,"_pointermove"],[S,"_pointerup"],[D,"_pointercancel"],[d,"_pointerover"],[O,"_wheel"],[B,"_contextmenu"],[x,"_pointerdown"],[o,"_pointermove"],[R,"_pointerup"],[L,"_pointercancel"],[G,"_lostpointercapture"]],Z={mouse:{[I]:w,[z]:p,[E]:d,[M]:v,[o]:k,[x]:A,[R]:c,[L]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[I]:"touchout",[z]:"touchleave",[E]:"touchover",[M]:"touchenter",[o]:C,[x]:l,[R]:S,[L]:D,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[I]:I,[z]:z,[E]:E,[M]:M,[o]:o,[x]:x,[R]:R,[L]:L,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Q=le=>le.indexOf("pointer")>=0?"pointer":le.indexOf("touch")>=0?"touch":"mouse",$=le=>{const U=Q(le);if(U==="pointer")return b.Konva.pointerEventsEnabled&&Z.pointer;if(U==="touch")return Z.touch;if(U==="mouse")return Z.mouse};function Y(le={}){return(le.clipFunc||le.clipWidth||le.clipHeight)&&u.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),le}const te="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";s.stages=[];class ae extends N.Container{constructor(U){super(Y(U)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),s.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Y(this.attrs)}),this._checkVisibility()}_validateAdd(U){const W=U.getType()==="Layer",ne=U.getType()==="FastLayer";W||ne||u.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const U=this.visible()?"":"none";this.content.style.display=U}setContainer(U){if(typeof U===_){if(U.charAt(0)==="."){const ne=U.slice(1);U=document.getElementsByClassName(ne)[0]}else{var W;U.charAt(0)!=="#"?W=U:W=U.slice(1),U=document.getElementById(W)}if(!U)throw"Can not find container in document with id "+W}return this._setAttr("container",U),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),U.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const U=this.children,W=U.length;for(let ne=0;ne<W;ne++)U[ne].clear();return this}clone(U){return U||(U={}),U.container=typeof document<"u"&&document.createElement("div"),N.Container.prototype.clone.call(this,U)}destroy(){super.destroy();const U=this.content;U&&u.Util._isInDocument(U)&&this.container().removeChild(U);const W=s.stages.indexOf(this);return W>-1&&s.stages.splice(W,1),u.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const U=this._pointerPositions[0]||this._changedPointerPositions[0];return U?{x:U.x,y:U.y}:(u.Util.warn(te),null)}_getPointerById(U){return this._pointerPositions.find(W=>W.id===U)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(U){U=U||{},U.x=U.x||0,U.y=U.y||0,U.width=U.width||this.width(),U.height=U.height||this.height();const W=new m.SceneCanvas({width:U.width,height:U.height,pixelRatio:U.pixelRatio||1}),ne=W.getContext()._context,re=this.children;return(U.x||U.y)&&ne.translate(-1*U.x,-1*U.y),re.forEach(function(ie){if(!ie.isVisible())return;const he=ie._toKonvaCanvas(U);ne.drawImage(he._canvas,U.x,U.y,he.getWidth()/he.getPixelRatio(),he.getHeight()/he.getPixelRatio())}),W}getIntersection(U){if(!U)return null;const W=this.children,ne=W.length,re=ne-1;for(let ie=re;ie>=0;ie--){const he=W[ie].getIntersection(U);if(he)return he}return null}_resizeDOM(){const U=this.width(),W=this.height();this.content&&(this.content.style.width=U+P,this.content.style.height=W+P),this.bufferCanvas.setSize(U,W),this.bufferHitCanvas.setSize(U,W),this.children.forEach(ne=>{ne.setSize({width:U,height:W}),ne.draw()})}add(U,...W){if(arguments.length>1){for(let re=0;re<arguments.length;re++)this.add(arguments[re]);return this}super.add(U);const ne=this.children.length;return ne>j&&u.Util.warn("The stage has "+ne+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),U.setSize({width:this.width(),height:this.height()}),U.draw(),b.Konva.isBrowser&&this.content.appendChild(U.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(U){return g.hasPointerCapture(U,this)}setPointerCapture(U){g.setPointerCapture(U,this)}releaseCapture(U){g.releaseCapture(U,this)}getLayers(){return this.children}_bindContentEvents(){b.Konva.isBrowser&&H.forEach(([U,W])=>{this.content.addEventListener(U,ne=>{this[W](ne)},{passive:!1})})}_pointerenter(U){this.setPointersPositions(U);const W=$(U.type);W&&this._fire(W.pointerenter,{evt:U,target:this,currentTarget:this})}_pointerover(U){this.setPointersPositions(U);const W=$(U.type);W&&this._fire(W.pointerover,{evt:U,target:this,currentTarget:this})}_getTargetShape(U){let W=this[U+"targetShape"];return W&&!W.getStage()&&(W=null),W}_pointerleave(U){const W=$(U.type),ne=Q(U.type);if(!W)return;this.setPointersPositions(U);const re=this._getTargetShape(ne),ie=!(b.Konva.isDragging()||b.Konva.isTransforming())||b.Konva.hitOnDragEnabled;re&&ie?(re._fireAndBubble(W.pointerout,{evt:U}),re._fireAndBubble(W.pointerleave,{evt:U}),this._fire(W.pointerleave,{evt:U,target:this,currentTarget:this}),this[ne+"targetShape"]=null):ie&&(this._fire(W.pointerleave,{evt:U,target:this,currentTarget:this}),this._fire(W.pointerout,{evt:U,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(U){const W=$(U.type),ne=Q(U.type);if(!W)return;this.setPointersPositions(U);let re=!1;this._changedPointerPositions.forEach(ie=>{const he=this.getIntersection(ie);if(a.DD.justDragged=!1,b.Konva["_"+ne+"ListenClick"]=!0,!he||!he.isListening()){this[ne+"ClickStartShape"]=void 0;return}b.Konva.capturePointerEventsEnabled&&he.setPointerCapture(ie.id),this[ne+"ClickStartShape"]=he,he._fireAndBubble(W.pointerdown,{evt:U,pointerId:ie.id}),re=!0;const pe=U.type.indexOf("touch")>=0;he.preventDefault()&&U.cancelable&&pe&&U.preventDefault()}),re||this._fire(W.pointerdown,{evt:U,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(U){const W=$(U.type),ne=Q(U.type);if(!W||(b.Konva.isDragging()&&a.DD.node.preventDefault()&&U.cancelable&&U.preventDefault(),this.setPointersPositions(U),!(!(b.Konva.isDragging()||b.Konva.isTransforming())||b.Konva.hitOnDragEnabled)))return;const ie={};let he=!1;const pe=this._getTargetShape(ne);this._changedPointerPositions.forEach(Ae=>{const Ce=g.getCapturedShape(Ae.id)||this.getIntersection(Ae),Qe=Ae.id,Se={evt:U,pointerId:Qe},Ge=pe!==Ce;if(Ge&&pe&&(pe._fireAndBubble(W.pointerout,{...Se},Ce),pe._fireAndBubble(W.pointerleave,{...Se},Ce)),Ce){if(ie[Ce._id])return;ie[Ce._id]=!0}Ce&&Ce.isListening()?(he=!0,Ge&&(Ce._fireAndBubble(W.pointerover,{...Se},pe),Ce._fireAndBubble(W.pointerenter,{...Se},pe),this[ne+"targetShape"]=Ce),Ce._fireAndBubble(W.pointermove,{...Se})):pe&&(this._fire(W.pointerover,{evt:U,target:this,currentTarget:this,pointerId:Qe}),this[ne+"targetShape"]=null)}),he||this._fire(W.pointermove,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(U){const W=$(U.type),ne=Q(U.type);if(!W)return;this.setPointersPositions(U);const re=this[ne+"ClickStartShape"],ie=this[ne+"ClickEndShape"],he={};let pe=!1;this._changedPointerPositions.forEach(Ae=>{const Ce=g.getCapturedShape(Ae.id)||this.getIntersection(Ae);if(Ce){if(Ce.releaseCapture(Ae.id),he[Ce._id])return;he[Ce._id]=!0}const Qe=Ae.id,Se={evt:U,pointerId:Qe};let Ge=!1;b.Konva["_"+ne+"InDblClickWindow"]?(Ge=!0,clearTimeout(this[ne+"DblTimeout"])):a.DD.justDragged||(b.Konva["_"+ne+"InDblClickWindow"]=!0,clearTimeout(this[ne+"DblTimeout"])),this[ne+"DblTimeout"]=setTimeout(function(){b.Konva["_"+ne+"InDblClickWindow"]=!1},b.Konva.dblClickWindow),Ce&&Ce.isListening()?(pe=!0,this[ne+"ClickEndShape"]=Ce,Ce._fireAndBubble(W.pointerup,{...Se}),b.Konva["_"+ne+"ListenClick"]&&re&&re===Ce&&(Ce._fireAndBubble(W.pointerclick,{...Se}),Ge&&ie&&ie===Ce&&Ce._fireAndBubble(W.pointerdblclick,{...Se}))):(this[ne+"ClickEndShape"]=null,b.Konva["_"+ne+"ListenClick"]&&this._fire(W.pointerclick,{evt:U,target:this,currentTarget:this,pointerId:Qe}),Ge&&this._fire(W.pointerdblclick,{evt:U,target:this,currentTarget:this,pointerId:Qe}))}),pe||this._fire(W.pointerup,{evt:U,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),b.Konva["_"+ne+"ListenClick"]=!1,U.cancelable&&ne!=="touch"&&ne!=="pointer"&&U.preventDefault()}_contextmenu(U){this.setPointersPositions(U);const W=this.getIntersection(this.getPointerPosition());W&&W.isListening()?W._fireAndBubble(B,{evt:U}):this._fire(B,{evt:U,target:this,currentTarget:this})}_wheel(U){this.setPointersPositions(U);const W=this.getIntersection(this.getPointerPosition());W&&W.isListening()?W._fireAndBubble(O,{evt:U}):this._fire(O,{evt:U,target:this,currentTarget:this})}_pointercancel(U){this.setPointersPositions(U);const W=g.getCapturedShape(U.pointerId)||this.getIntersection(this.getPointerPosition());W&&W._fireAndBubble(R,g.createEvent(U)),g.releaseCapture(U.pointerId)}_lostpointercapture(U){g.releaseCapture(U.pointerId)}setPointersPositions(U){const W=this._getContentPosition();let ne=null,re=null;U=U||window.event,U.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(U.touches,ie=>{this._pointerPositions.push({id:ie.identifier,x:(ie.clientX-W.left)/W.scaleX,y:(ie.clientY-W.top)/W.scaleY})}),Array.prototype.forEach.call(U.changedTouches||U.touches,ie=>{this._changedPointerPositions.push({id:ie.identifier,x:(ie.clientX-W.left)/W.scaleX,y:(ie.clientY-W.top)/W.scaleY})})):(ne=(U.clientX-W.left)/W.scaleX,re=(U.clientY-W.top)/W.scaleY,this.pointerPos={x:ne,y:re},this._pointerPositions=[{x:ne,y:re,id:u.Util._getFirstPointerId(U)}],this._changedPointerPositions=[{x:ne,y:re,id:u.Util._getFirstPointerId(U)}])}_setPointerPosition(U){u.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(U)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const U=this.content.getBoundingClientRect();return{top:U.top,left:U.left,scaleX:U.width/this.content.clientWidth||1,scaleY:U.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new m.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new m.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!b.Konva.isBrowser)return;const U=this.container();if(!U)throw"Stage has no container. A container is required.";U.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),U.appendChild(this.content),this._resizeDOM()}cache(){return u.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(U){U.batchDraw()}),this}}s.Stage=ae,ae.prototype.nodeType=y,(0,f._registerNode)(ae),T.Factory.addGetterSetter(ae,"container"),b.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{s.stages.forEach(le=>{le.batchDraw()})})}(Ja)),Ja}var Dr={},$a={},Eu;function ht(){return Eu||(Eu=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Shape=s.shapes=void 0;const u=Re(),T=Je(),N=be(),b=et(),m=Ne(),a=Re(),f=Gc(),g="hasShadow",y="shadowRGBA",_="patternImage",P="linearGradient",w="radialGradient";let p;function d(){return p||(p=T.Util.createCanvasElement().getContext("2d"),p)}s.shapes={};function v(z){const E=this.attrs.fillRule;E?z.fill(E):z.fill()}function k(z){z.stroke()}function A(z){const E=this.attrs.fillRule;E?z.fill(E):z.fill()}function c(z){z.stroke()}function o(){this._clearCache(g)}function x(){this._clearCache(y)}function R(){this._clearCache(_)}function L(){this._clearCache(P)}function G(){this._clearCache(w)}class I extends b.Node{constructor(E){super(E);let M;for(;M=T.Util.getRandomColor(),!(M&&!(M in s.shapes)););this.colorKey=M,s.shapes[M]=this}getContext(){return T.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return T.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(g,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(_,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const M=d().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(M&&M.setTransform){const B=new T.Transform;B.translate(this.fillPatternX(),this.fillPatternY()),B.rotate(u.Konva.getAngle(this.fillPatternRotation())),B.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),B.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const l=B.getMatrix(),S=typeof DOMMatrix>"u"?{a:l[0],b:l[1],c:l[2],d:l[3],e:l[4],f:l[5]}:new DOMMatrix(l);M.setTransform(S)}return M}}_getLinearGradient(){return this._getCache(P,this.__getLinearGradient)}__getLinearGradient(){const E=this.fillLinearGradientColorStops();if(E){const M=d(),B=this.fillLinearGradientStartPoint(),l=this.fillLinearGradientEndPoint(),S=M.createLinearGradient(B.x,B.y,l.x,l.y);for(let C=0;C<E.length;C+=2)S.addColorStop(E[C],E[C+1]);return S}}_getRadialGradient(){return this._getCache(w,this.__getRadialGradient)}__getRadialGradient(){const E=this.fillRadialGradientColorStops();if(E){const M=d(),B=this.fillRadialGradientStartPoint(),l=this.fillRadialGradientEndPoint(),S=M.createRadialGradient(B.x,B.y,this.fillRadialGradientStartRadius(),l.x,l.y,this.fillRadialGradientEndRadius());for(let C=0;C<E.length;C+=2)S.addColorStop(E[C],E[C+1]);return S}}getShadowRGBA(){return this._getCache(y,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const E=T.Util.colorToRGBA(this.shadowColor());if(E)return"rgba("+E.r+","+E.g+","+E.b+","+E.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const E=this.hitStrokeWidth();return E==="auto"?this.hasStroke():this.strokeEnabled()&&!!E}intersects(E){const M=this.getStage();if(!M)return!1;const B=M.bufferHitCanvas;return B.getContext().clear(),this.drawHit(B,void 0,!0),B.context.getImageData(Math.round(E.x),Math.round(E.y),1,1).data[3]>0}destroy(){return b.Node.prototype.destroy.call(this),delete s.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(E){var M;if(!((M=this.attrs.perfectDrawEnabled)!==null&&M!==void 0?M:!0))return!1;const l=E||this.hasFill(),S=this.hasStroke(),C=this.getAbsoluteOpacity()!==1;if(l&&S&&C)return!0;const D=this.hasShadow(),O=this.shadowForStrokeEnabled();return!!(l&&S&&D&&O)}setStrokeHitEnabled(E){T.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),E?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const E=this.size();return{x:this._centroid?-E.width/2:0,y:this._centroid?-E.height/2:0,width:E.width,height:E.height}}getClientRect(E={}){let M=!1,B=this.getParent();for(;B;){if(B.isCached()){M=!0;break}B=B.getParent()}const l=E.skipTransform,S=E.relativeTo||M&&this.getStage()||void 0,C=this.getSelfRect(),O=!E.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,j=C.width+O,H=C.height+O,Z=!E.skipShadow&&this.hasShadow(),Q=Z?this.shadowOffsetX():0,$=Z?this.shadowOffsetY():0,Y=j+Math.abs(Q),te=H+Math.abs($),ae=Z&&this.shadowBlur()||0,le=Y+ae*2,U=te+ae*2,W={width:le,height:U,x:-(O/2+ae)+Math.min(Q,0)+C.x,y:-(O/2+ae)+Math.min($,0)+C.y};return l?W:this._transformedRect(W,S)}drawScene(E,M,B){const l=this.getLayer();let S=E||l.getCanvas(),C=S.getContext(),D=this._getCanvasCache(),O=this.getSceneFunc(),j=this.hasShadow(),H,Z;const Q=S.isCache,$=M===this;if(!this.isVisible()&&!$)return this;if(D){C.save();const te=this.getAbsoluteTransform(M).getMatrix();return C.transform(te[0],te[1],te[2],te[3],te[4],te[5]),this._drawCachedSceneCanvas(C),C.restore(),this}if(!O)return this;if(C.save(),this._useBufferCanvas()&&!Q){H=this.getStage();const te=B||H.bufferCanvas;Z=te.getContext(),Z.clear(),Z.save(),Z._applyLineJoin(this);var Y=this.getAbsoluteTransform(M).getMatrix();Z.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),O.call(this,Z,this),Z.restore();const ae=te.pixelRatio;j&&C._applyShadow(this),C._applyOpacity(this),C._applyGlobalCompositeOperation(this),C.drawImage(te._canvas,0,0,te.width/ae,te.height/ae)}else{if(C._applyLineJoin(this),!$){var Y=this.getAbsoluteTransform(M).getMatrix();C.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),C._applyOpacity(this),C._applyGlobalCompositeOperation(this)}j&&C._applyShadow(this),O.call(this,C,this)}return C.restore(),this}drawHit(E,M,B=!1){if(!this.shouldDrawHit(M,B))return this;const l=this.getLayer(),S=E||l.hitCanvas,C=S&&S.getContext(),D=this.hitFunc()||this.sceneFunc(),O=this._getCanvasCache(),j=O&&O.hit;if(this.colorKey||T.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),j){C.save();const Z=this.getAbsoluteTransform(M).getMatrix();return C.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),this._drawCachedHitCanvas(C),C.restore(),this}if(!D)return this;if(C.save(),C._applyLineJoin(this),!(this===M)){const Z=this.getAbsoluteTransform(M).getMatrix();C.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5])}return D.call(this,C,this),C.restore(),this}drawHitFromCache(E=0){const M=this._getCanvasCache(),B=this._getCachedSceneCanvas(),l=M.hit,S=l.getContext(),C=l.getWidth(),D=l.getHeight();S.clear(),S.drawImage(B._canvas,0,0,C,D);try{const O=S.getImageData(0,0,C,D),j=O.data,H=j.length,Z=T.Util._hexToRgb(this.colorKey);for(let Q=0;Q<H;Q+=4)j[Q+3]>E?(j[Q]=Z.r,j[Q+1]=Z.g,j[Q+2]=Z.b,j[Q+3]=255):j[Q+3]=0;S.putImageData(O,0,0)}catch(O){T.Util.error("Unable to draw hit graph from cached scene canvas. "+O.message)}return this}hasPointerCapture(E){return f.hasPointerCapture(E,this)}setPointerCapture(E){f.setPointerCapture(E,this)}releaseCapture(E){f.releaseCapture(E,this)}}s.Shape=I,I.prototype._fillFunc=v,I.prototype._strokeFunc=k,I.prototype._fillFuncHit=A,I.prototype._strokeFuncHit=c,I.prototype._centroid=!1,I.prototype.nodeType="Shape",(0,a._registerNode)(I),I.prototype.eventListeners={},I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",o),I.prototype.on.call(I.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",R),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",L),I.prototype.on.call(I.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",G),N.Factory.addGetterSetter(I,"stroke",void 0,(0,m.getStringOrGradientValidator)()),N.Factory.addGetterSetter(I,"strokeWidth",2,(0,m.getNumberValidator)()),N.Factory.addGetterSetter(I,"fillAfterStrokeEnabled",!1),N.Factory.addGetterSetter(I,"hitStrokeWidth","auto",(0,m.getNumberOrAutoValidator)()),N.Factory.addGetterSetter(I,"strokeHitEnabled",!0,(0,m.getBooleanValidator)()),N.Factory.addGetterSetter(I,"perfectDrawEnabled",!0,(0,m.getBooleanValidator)()),N.Factory.addGetterSetter(I,"shadowForStrokeEnabled",!0,(0,m.getBooleanValidator)()),N.Factory.addGetterSetter(I,"lineJoin"),N.Factory.addGetterSetter(I,"lineCap"),N.Factory.addGetterSetter(I,"sceneFunc"),N.Factory.addGetterSetter(I,"hitFunc"),N.Factory.addGetterSetter(I,"dash"),N.Factory.addGetterSetter(I,"dashOffset",0,(0,m.getNumberValidator)()),N.Factory.addGetterSetter(I,"shadowColor",void 0,(0,m.getStringValidator)()),N.Factory.addGetterSetter(I,"shadowBlur",0,(0,m.getNumberValidator)()),N.Factory.addGetterSetter(I,"shadowOpacity",1,(0,m.getNumberValidator)()),N.Factory.addComponentsGetterSetter(I,"shadowOffset",["x","y"]),N.Factory.addGetterSetter(I,"shadowOffsetX",0,(0,m.getNumberValidator)()),N.Factory.addGetterSetter(I,"shadowOffsetY",0,(0,m.getNumberValidator)()),N.Factory.addGetterSetter(I,"fillPatternImage"),N.Factory.addGetterSetter(I,"fill",void 0,(0,m.getStringOrGradientValidator)()),N.Factory.addGetterSetter(I,"fillPatternX",0,(0,m.getNumberValidator)()),N.Factory.addGetterSetter(I,"fillPatternY",0,(0,m.getNumberValidator)()),N.Factory.addGetterSetter(I,"fillLinearGradientColorStops"),N.Factory.addGetterSetter(I,"strokeLinearGradientColorStops"),N.Factory.addGetterSetter(I,"fillRadialGradientStartRadius",0),N.Factory.addGetterSetter(I,"fillRadialGradientEndRadius",0),N.Factory.addGetterSetter(I,"fillRadialGradientColorStops"),N.Factory.addGetterSetter(I,"fillPatternRepeat","repeat"),N.Factory.addGetterSetter(I,"fillEnabled",!0),N.Factory.addGetterSetter(I,"strokeEnabled",!0),N.Factory.addGetterSetter(I,"shadowEnabled",!0),N.Factory.addGetterSetter(I,"dashEnabled",!0),N.Factory.addGetterSetter(I,"strokeScaleEnabled",!0),N.Factory.addGetterSetter(I,"fillPriority","color"),N.Factory.addComponentsGetterSetter(I,"fillPatternOffset",["x","y"]),N.Factory.addGetterSetter(I,"fillPatternOffsetX",0,(0,m.getNumberValidator)()),N.Factory.addGetterSetter(I,"fillPatternOffsetY",0,(0,m.getNumberValidator)()),N.Factory.addComponentsGetterSetter(I,"fillPatternScale",["x","y"]),N.Factory.addGetterSetter(I,"fillPatternScaleX",1,(0,m.getNumberValidator)()),N.Factory.addGetterSetter(I,"fillPatternScaleY",1,(0,m.getNumberValidator)()),N.Factory.addComponentsGetterSetter(I,"fillLinearGradientStartPoint",["x","y"]),N.Factory.addComponentsGetterSetter(I,"strokeLinearGradientStartPoint",["x","y"]),N.Factory.addGetterSetter(I,"fillLinearGradientStartPointX",0),N.Factory.addGetterSetter(I,"strokeLinearGradientStartPointX",0),N.Factory.addGetterSetter(I,"fillLinearGradientStartPointY",0),N.Factory.addGetterSetter(I,"strokeLinearGradientStartPointY",0),N.Factory.addComponentsGetterSetter(I,"fillLinearGradientEndPoint",["x","y"]),N.Factory.addComponentsGetterSetter(I,"strokeLinearGradientEndPoint",["x","y"]),N.Factory.addGetterSetter(I,"fillLinearGradientEndPointX",0),N.Factory.addGetterSetter(I,"strokeLinearGradientEndPointX",0),N.Factory.addGetterSetter(I,"fillLinearGradientEndPointY",0),N.Factory.addGetterSetter(I,"strokeLinearGradientEndPointY",0),N.Factory.addComponentsGetterSetter(I,"fillRadialGradientStartPoint",["x","y"]),N.Factory.addGetterSetter(I,"fillRadialGradientStartPointX",0),N.Factory.addGetterSetter(I,"fillRadialGradientStartPointY",0),N.Factory.addComponentsGetterSetter(I,"fillRadialGradientEndPoint",["x","y"]),N.Factory.addGetterSetter(I,"fillRadialGradientEndPointX",0),N.Factory.addGetterSetter(I,"fillRadialGradientEndPointY",0),N.Factory.addGetterSetter(I,"fillPatternRotation",0),N.Factory.addGetterSetter(I,"fillRule",void 0,(0,m.getStringValidator)()),N.Factory.backCompat(I,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}($a)),$a}var Ru;function zc(){if(Ru)return Dr;Ru=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.Layer=void 0;const s=Je(),u=Rs(),T=et(),N=be(),b=Es(),m=Ne(),a=ht(),f=Re(),g="#",y="beforeDraw",_="draw",P=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],w=P.length;class p extends u.Container{constructor(v){super(v),this.canvas=new b.SceneCanvas,this.hitCanvas=new b.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(v){return this.getContext().clear(v),this.getHitCanvas().getContext().clear(v),this}setZIndex(v){super.setZIndex(v);const k=this.getStage();return k&&k.content&&(k.content.removeChild(this.getNativeCanvasElement()),v<k.children.length-1?k.content.insertBefore(this.getNativeCanvasElement(),k.children[v+1].getCanvas()._canvas):k.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){T.Node.prototype.moveToTop.call(this);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!T.Node.prototype.moveUp.call(this))return!1;const k=this.getStage();return!k||!k.content?!1:(k.content.removeChild(this.getNativeCanvasElement()),this.index<k.children.length-1?k.content.insertBefore(this.getNativeCanvasElement(),k.children[this.index+1].getCanvas()._canvas):k.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(T.Node.prototype.moveDown.call(this)){const v=this.getStage();if(v){const k=v.children;v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.insertBefore(this.getNativeCanvasElement(),k[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(T.Node.prototype.moveToBottom.call(this)){const v=this.getStage();if(v){const k=v.children;v.content&&(v.content.removeChild(this.getNativeCanvasElement()),v.content.insertBefore(this.getNativeCanvasElement(),k[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const v=this.getNativeCanvasElement();return T.Node.prototype.remove.call(this),v&&v.parentNode&&s.Util._isInDocument(v)&&v.parentNode.removeChild(v),this}getStage(){return this.parent}setSize({width:v,height:k}){return this.canvas.setSize(v,k),this.hitCanvas.setSize(v,k),this._setSmoothEnabled(),this}_validateAdd(v){const k=v.getType();k!=="Group"&&k!=="Shape"&&s.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(v){return v=v||{},v.width=v.width||this.getWidth(),v.height=v.height||this.getHeight(),v.x=v.x!==void 0?v.x:this.x(),v.y=v.y!==void 0?v.y:this.y(),T.Node.prototype._toKonvaCanvas.call(this,v)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){s.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){s.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,s.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(v){if(!this.isListening()||!this.isVisible())return null;let k=1,A=!1;for(;;){for(let c=0;c<w;c++){const o=P[c],x=this._getIntersection({x:v.x+o.x*k,y:v.y+o.y*k}),R=x.shape;if(R)return R;if(A=!!x.antialiased,!x.antialiased)break}if(A)k+=1;else return null}}_getIntersection(v){const k=this.hitCanvas.pixelRatio,A=this.hitCanvas.context.getImageData(Math.round(v.x*k),Math.round(v.y*k),1,1).data,c=A[3];if(c===255){const o=s.Util._rgbToHex(A[0],A[1],A[2]),x=a.shapes[g+o];return x?{shape:x}:{antialiased:!0}}else if(c>0)return{antialiased:!0};return{}}drawScene(v,k){const A=this.getLayer(),c=v||A&&A.getCanvas();return this._fire(y,{node:this}),this.clearBeforeDraw()&&c.getContext().clear(),u.Container.prototype.drawScene.call(this,c,k),this._fire(_,{node:this}),this}drawHit(v,k){const A=this.getLayer(),c=v||A&&A.hitCanvas;return A&&A.clearBeforeDraw()&&A.getHitCanvas().getContext().clear(),u.Container.prototype.drawHit.call(this,c,k),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(v){s.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(v)}getHitGraphEnabled(v){return s.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const v=this.parent;!!this.hitCanvas._canvas.parentNode?v.content.removeChild(this.hitCanvas._canvas):v.content.appendChild(this.hitCanvas._canvas)}destroy(){return s.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return Dr.Layer=p,p.prototype.nodeType="Layer",(0,f._registerNode)(p),N.Factory.addGetterSetter(p,"imageSmoothingEnabled",!0),N.Factory.addGetterSetter(p,"clearBeforeDraw",!0),N.Factory.addGetterSetter(p,"hitGraphEnabled",!0,(0,m.getBooleanValidator)()),Dr}var Or={},Tu;function Kd(){if(Tu)return Or;Tu=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.FastLayer=void 0;const s=Je(),u=zc(),T=Re();let N=class extends u.Layer{constructor(m){super(m),this.listening(!1),s.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Or.FastLayer=N,N.prototype.nodeType="FastLayer",(0,T._registerNode)(N),Or}var Gr={},bu;function go(){if(bu)return Gr;bu=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.Group=void 0;const s=Je(),u=Rs(),T=Re();let N=class extends u.Container{_validateAdd(m){const a=m.getType();a!=="Group"&&a!=="Shape"&&s.Util.throw("You may only add groups and shapes to groups.")}};return Gr.Group=N,N.prototype.nodeType="Group",(0,T._registerNode)(N),Gr}var zr={},Nu;function po(){if(Nu)return zr;Nu=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.Animation=void 0;const s=Re(),u=Je(),T=function(){return s.glob.performance&&s.glob.performance.now?function(){return s.glob.performance.now()}:function(){return new Date().getTime()}}();let N=class or{constructor(m,a){this.id=or.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:T(),frameRate:0},this.func=m,this.setLayers(a)}setLayers(m){let a=[];return m&&(a=Array.isArray(m)?m:[m]),this.layers=a,this}getLayers(){return this.layers}addLayer(m){const a=this.layers,f=a.length;for(let g=0;g<f;g++)if(a[g]._id===m._id)return!1;return this.layers.push(m),!0}isRunning(){const a=or.animations,f=a.length;for(let g=0;g<f;g++)if(a[g].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=T(),or._addAnimation(this),this}stop(){return or._removeAnimation(this),this}_updateFrameObject(m){this.frame.timeDiff=m-this.frame.lastTime,this.frame.lastTime=m,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(m){this.animations.push(m),this._handleAnimation()}static _removeAnimation(m){const a=m.id,f=this.animations,g=f.length;for(let y=0;y<g;y++)if(f[y].id===a){this.animations.splice(y,1);break}}static _runFrames(){const m={},a=this.animations;for(let f=0;f<a.length;f++){const g=a[f],y=g.layers,_=g.func;g._updateFrameObject(T());const P=y.length;let w;if(_?w=_.call(g,g.frame)!==!1:w=!0,!!w)for(let p=0;p<P;p++){const d=y[p];d._id!==void 0&&(m[d._id]=d)}}for(const f in m)m.hasOwnProperty(f)&&m[f].batchDraw()}static _animationLoop(){const m=or;m.animations.length?(m._runFrames(),u.Util.requestAnimFrame(m._animationLoop)):m.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,u.Util.requestAnimFrame(this._animationLoop))}};return zr.Animation=N,N.animations=[],N.animIdCounter=0,N.animRunning=!1,zr}var eo={},Au;function Yd(){return Au||(Au=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Easings=s.Tween=void 0;const u=Je(),T=po(),N=et(),b=Re(),m={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,f=2,g=3,y=["fill","stroke","shadowColor"];let _=0;class P{constructor(d,v,k,A,c,o,x){this.prop=d,this.propFunc=v,this.begin=A,this._pos=A,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=x,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=k,this._change=c-this.begin,this.pause()}fire(d){const v=this[d];v&&v()}setTime(d){d>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():d<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=d,this.update())}getTime(){return this._time}setPosition(d){this.prevPos=this._pos,this.propFunc(d),this._pos=d}getPosition(d){return d===void 0&&(d=this._time),this.func(d,this.begin,this._change,this.duration)}play(){this.state=f,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=g,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(d){this.pause(),this._time=d,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const d=this.getTimer()-this._startTime;this.state===f?this.setTime(d):this.state===g&&this.setTime(this.duration-d)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class w{constructor(d){const v=this,k=d.node,A=k._id,c=d.easing||s.Easings.Linear,o=!!d.yoyo;let x,R;typeof d.duration>"u"?x=.3:d.duration===0?x=.001:x=d.duration,this.node=k,this._id=_++;const L=k.getLayer()||(k instanceof b.Konva.Stage?k.getLayers():null);L||u.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new T.Animation(function(){v.tween.onEnterFrame()},L),this.tween=new P(R,function(G){v._tweenFunc(G)},c,0,1,x*1e3,o),this._addListeners(),w.attrs[A]||(w.attrs[A]={}),w.attrs[A][this._id]||(w.attrs[A][this._id]={}),w.tweens[A]||(w.tweens[A]={});for(R in d)m[R]===void 0&&this._addAttr(R,d[R]);this.reset(),this.onFinish=d.onFinish,this.onReset=d.onReset,this.onUpdate=d.onUpdate}_addAttr(d,v){const k=this.node,A=k._id;let c,o,x,R,L;const G=w.tweens[A][d];G&&delete w.attrs[A][G][d];let I=k.getAttr(d);if(u.Util._isArray(v))if(c=[],o=Math.max(v.length,I.length),d==="points"&&v.length!==I.length&&(v.length>I.length?(R=I,I=u.Util._prepareArrayForTween(I,v,k.closed())):(x=v,v=u.Util._prepareArrayForTween(v,I,k.closed()))),d.indexOf("fill")===0)for(let z=0;z<o;z++)if(z%2===0)c.push(v[z]-I[z]);else{const E=u.Util.colorToRGBA(I[z]);L=u.Util.colorToRGBA(v[z]),I[z]=E,c.push({r:L.r-E.r,g:L.g-E.g,b:L.b-E.b,a:L.a-E.a})}else for(let z=0;z<o;z++)c.push(v[z]-I[z]);else y.indexOf(d)!==-1?(I=u.Util.colorToRGBA(I),L=u.Util.colorToRGBA(v),c={r:L.r-I.r,g:L.g-I.g,b:L.b-I.b,a:L.a-I.a}):c=v-I;w.attrs[A][this._id][d]={start:I,diff:c,end:v,trueEnd:x,trueStart:R},w.tweens[A][d]=this._id}_tweenFunc(d){const v=this.node,k=w.attrs[v._id][this._id];let A,c,o,x,R,L,G,I;for(A in k){if(c=k[A],o=c.start,x=c.diff,I=c.end,u.Util._isArray(o))if(R=[],G=Math.max(o.length,I.length),A.indexOf("fill")===0)for(L=0;L<G;L++)L%2===0?R.push((o[L]||0)+x[L]*d):R.push("rgba("+Math.round(o[L].r+x[L].r*d)+","+Math.round(o[L].g+x[L].g*d)+","+Math.round(o[L].b+x[L].b*d)+","+(o[L].a+x[L].a*d)+")");else for(L=0;L<G;L++)R.push((o[L]||0)+x[L]*d);else y.indexOf(A)!==-1?R="rgba("+Math.round(o.r+x.r*d)+","+Math.round(o.g+x.g*d)+","+Math.round(o.b+x.b*d)+","+(o.a+x.a*d)+")":R=o+x*d;v.setAttr(A,R)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const d=this.node,v=w.attrs[d._id][this._id];v.points&&v.points.trueEnd&&d.setAttr("points",v.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const d=this.node,v=w.attrs[d._id][this._id];v.points&&v.points.trueStart&&d.points(v.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(d){return this.tween.seek(d*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const d=this.node._id,v=this._id,k=w.tweens[d];this.pause();for(const A in k)delete w.tweens[d][A];delete w.attrs[d][v]}}s.Tween=w,w.attrs={},w.tweens={},N.Node.prototype.to=function(p){const d=p.onFinish;p.node=this,p.onFinish=function(){this.destroy(),d&&d()},new w(p).play()},s.Easings={BackEaseIn(p,d,v,k){return v*(p/=k)*p*((1.70158+1)*p-1.70158)+d},BackEaseOut(p,d,v,k){return v*((p=p/k-1)*p*((1.70158+1)*p+1.70158)+1)+d},BackEaseInOut(p,d,v,k){let A=1.70158;return(p/=k/2)<1?v/2*(p*p*(((A*=1.525)+1)*p-A))+d:v/2*((p-=2)*p*(((A*=1.525)+1)*p+A)+2)+d},ElasticEaseIn(p,d,v,k,A,c){let o=0;return p===0?d:(p/=k)===1?d+v:(c||(c=k*.3),!A||A<Math.abs(v)?(A=v,o=c/4):o=c/(2*Math.PI)*Math.asin(v/A),-(A*Math.pow(2,10*(p-=1))*Math.sin((p*k-o)*(2*Math.PI)/c))+d)},ElasticEaseOut(p,d,v,k,A,c){let o=0;return p===0?d:(p/=k)===1?d+v:(c||(c=k*.3),!A||A<Math.abs(v)?(A=v,o=c/4):o=c/(2*Math.PI)*Math.asin(v/A),A*Math.pow(2,-10*p)*Math.sin((p*k-o)*(2*Math.PI)/c)+v+d)},ElasticEaseInOut(p,d,v,k,A,c){let o=0;return p===0?d:(p/=k/2)===2?d+v:(c||(c=k*(.3*1.5)),!A||A<Math.abs(v)?(A=v,o=c/4):o=c/(2*Math.PI)*Math.asin(v/A),p<1?-.5*(A*Math.pow(2,10*(p-=1))*Math.sin((p*k-o)*(2*Math.PI)/c))+d:A*Math.pow(2,-10*(p-=1))*Math.sin((p*k-o)*(2*Math.PI)/c)*.5+v+d)},BounceEaseOut(p,d,v,k){return(p/=k)<1/2.75?v*(7.5625*p*p)+d:p<2/2.75?v*(7.5625*(p-=1.5/2.75)*p+.75)+d:p<2.5/2.75?v*(7.5625*(p-=2.25/2.75)*p+.9375)+d:v*(7.5625*(p-=2.625/2.75)*p+.984375)+d},BounceEaseIn(p,d,v,k){return v-s.Easings.BounceEaseOut(k-p,0,v,k)+d},BounceEaseInOut(p,d,v,k){return p<k/2?s.Easings.BounceEaseIn(p*2,0,v,k)*.5+d:s.Easings.BounceEaseOut(p*2-k,0,v,k)*.5+v*.5+d},EaseIn(p,d,v,k){return v*(p/=k)*p+d},EaseOut(p,d,v,k){return-v*(p/=k)*(p-2)+d},EaseInOut(p,d,v,k){return(p/=k/2)<1?v/2*p*p+d:-v/2*(--p*(p-2)-1)+d},StrongEaseIn(p,d,v,k){return v*(p/=k)*p*p*p*p+d},StrongEaseOut(p,d,v,k){return v*((p=p/k-1)*p*p*p*p+1)+d},StrongEaseInOut(p,d,v,k){return(p/=k/2)<1?v/2*p*p*p*p*p+d:v/2*((p-=2)*p*p*p*p+2)+d},Linear(p,d,v,k){return v*p/k+d}}}(eo)),eo}var Fu;function uo(){return Fu||(Fu=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Konva=void 0;const u=Re(),T=Je(),N=et(),b=Rs(),m=Wd(),a=zc(),f=Kd(),g=go(),y=fo(),_=ht(),P=po(),w=Yd(),p=Oc(),d=Es();s.Konva=T.Util._assign(u.Konva,{Util:T.Util,Transform:T.Transform,Node:N.Node,Container:b.Container,Stage:m.Stage,stages:m.stages,Layer:a.Layer,FastLayer:f.FastLayer,Group:g.Group,DD:y.DD,Shape:_.Shape,shapes:_.shapes,Animation:P.Animation,Tween:w.Tween,Easings:w.Easings,Context:p.Context,Canvas:d.Canvas}),s.default=s.Konva}(Ka)),Ka}var Ur={},Mu;function Xd(){if(Mu)return Ur;Mu=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.Arc=void 0;const s=be(),u=ht(),T=Re(),N=Ne(),b=Re();let m=class extends u.Shape{_sceneFunc(f){const g=T.Konva.getAngle(this.angle()),y=this.clockwise();f.beginPath(),f.arc(0,0,this.outerRadius(),0,g,y),f.arc(0,0,this.innerRadius(),g,0,!y),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(f){this.outerRadius(f/2)}setHeight(f){this.outerRadius(f/2)}getSelfRect(){const f=this.innerRadius(),g=this.outerRadius(),y=this.clockwise(),_=T.Konva.getAngle(y?360-this.angle():this.angle()),P=Math.cos(Math.min(_,Math.PI)),w=1,p=Math.sin(Math.min(Math.max(Math.PI,_),3*Math.PI/2)),d=Math.sin(Math.min(_,Math.PI/2)),v=P*(P>0?f:g),k=w*g,A=p*(p>0?f:g),c=d*(d>0?g:f);return{x:v,y:y?-1*c:A,width:k-v,height:c-A}}};return Ur.Arc=m,m.prototype._centroid=!0,m.prototype.className="Arc",m.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,b._registerNode)(m),s.Factory.addGetterSetter(m,"innerRadius",0,(0,N.getNumberValidator)()),s.Factory.addGetterSetter(m,"outerRadius",0,(0,N.getNumberValidator)()),s.Factory.addGetterSetter(m,"angle",0,(0,N.getNumberValidator)()),s.Factory.addGetterSetter(m,"clockwise",!1,(0,N.getBooleanValidator)()),Ur}var Br={},Vr={},Lu;function Uc(){if(Lu)return Vr;Lu=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.Line=void 0;const s=be(),u=Re(),T=ht(),N=Ne();function b(f,g,y,_,P,w,p){const d=Math.sqrt(Math.pow(y-f,2)+Math.pow(_-g,2)),v=Math.sqrt(Math.pow(P-y,2)+Math.pow(w-_,2)),k=p*d/(d+v),A=p*v/(d+v),c=y-k*(P-f),o=_-k*(w-g),x=y+A*(P-f),R=_+A*(w-g);return[c,o,x,R]}function m(f,g){const y=f.length,_=[];for(let P=2;P<y-2;P+=2){const w=b(f[P-2],f[P-1],f[P],f[P+1],f[P+2],f[P+3],g);isNaN(w[0])||(_.push(w[0]),_.push(w[1]),_.push(f[P]),_.push(f[P+1]),_.push(w[2]),_.push(w[3]))}return _}class a extends T.Shape{constructor(g){super(g),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(g){let y=this.points(),_=y.length,P=this.tension(),w=this.closed(),p=this.bezier(),d,v,k;if(_){if(g.beginPath(),g.moveTo(y[0],y[1]),P!==0&&_>4){for(d=this.getTensionPoints(),v=d.length,k=w?0:4,w||g.quadraticCurveTo(d[0],d[1],d[2],d[3]);k<v-2;)g.bezierCurveTo(d[k++],d[k++],d[k++],d[k++],d[k++],d[k++]);w||g.quadraticCurveTo(d[v-2],d[v-1],y[_-2],y[_-1])}else if(p)for(k=2;k<_;)g.bezierCurveTo(y[k++],y[k++],y[k++],y[k++],y[k++],y[k++]);else for(k=2;k<_;k+=2)g.lineTo(y[k],y[k+1]);w?(g.closePath(),g.fillStrokeShape(this)):g.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():m(this.points(),this.tension())}_getTensionPointsClosed(){const g=this.points(),y=g.length,_=this.tension(),P=b(g[y-2],g[y-1],g[0],g[1],g[2],g[3],_),w=b(g[y-4],g[y-3],g[y-2],g[y-1],g[0],g[1],_),p=m(g,_);return[P[2],P[3]].concat(p).concat([w[0],w[1],g[y-2],g[y-1],w[2],w[3],P[0],P[1],g[0],g[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let g=this.points();if(g.length<4)return{x:g[0]||0,y:g[1]||0,width:0,height:0};this.tension()!==0?g=[g[0],g[1],...this._getTensionPoints(),g[g.length-2],g[g.length-1]]:g=this.points();let y=g[0],_=g[0],P=g[1],w=g[1],p,d;for(let v=0;v<g.length/2;v++)p=g[v*2],d=g[v*2+1],y=Math.min(y,p),_=Math.max(_,p),P=Math.min(P,d),w=Math.max(w,d);return{x:y,y:P,width:_-y,height:w-P}}}return Vr.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,u._registerNode)(a),s.Factory.addGetterSetter(a,"closed",!1),s.Factory.addGetterSetter(a,"bezier",!1),s.Factory.addGetterSetter(a,"tension",0,(0,N.getNumberValidator)()),s.Factory.addGetterSetter(a,"points",[],(0,N.getNumberArrayValidator)()),Vr}var Hr={},to={},Iu;function Qd(){return Iu||(Iu=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.t2length=s.getQuadraticArcLength=s.getCubicArcLength=s.binomialCoefficients=s.cValues=s.tValues=void 0,s.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],s.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],s.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const u=(a,f,g)=>{let y,_;const w=g/2;y=0;for(let p=0;p<20;p++)_=w*s.tValues[20][p]+w,y+=s.cValues[20][p]*N(a,f,_);return w*y};s.getCubicArcLength=u;const T=(a,f,g)=>{g===void 0&&(g=1);const y=a[0]-2*a[1]+a[2],_=f[0]-2*f[1]+f[2],P=2*a[1]-2*a[0],w=2*f[1]-2*f[0],p=4*(y*y+_*_),d=4*(y*P+_*w),v=P*P+w*w;if(p===0)return g*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(f[2]-f[0],2));const k=d/(2*p),A=v/p,c=g+k,o=A-k*k,x=c*c+o>0?Math.sqrt(c*c+o):0,R=k*k+o>0?Math.sqrt(k*k+o):0,L=k+Math.sqrt(k*k+o)!==0?o*Math.log(Math.abs((c+x)/(k+R))):0;return Math.sqrt(p)/2*(c*x-k*R+L)};s.getQuadraticArcLength=T;function N(a,f,g){const y=b(1,g,a),_=b(1,g,f),P=y*y+_*_;return Math.sqrt(P)}const b=(a,f,g)=>{const y=g.length-1;let _,P;if(y===0)return 0;if(a===0){P=0;for(let w=0;w<=y;w++)P+=s.binomialCoefficients[y][w]*Math.pow(1-f,y-w)*Math.pow(f,w)*g[w];return P}else{_=new Array(y);for(let w=0;w<y;w++)_[w]=y*(g[w+1]-g[w]);return b(a-1,f,_)}},m=(a,f,g)=>{let y=1,_=a/f,P=(a-g(_))/f,w=0;for(;y>.001;){const p=g(_+P),d=Math.abs(a-p)/f;if(d<y)y=d,_+=P;else{const v=g(_-P),k=Math.abs(a-v)/f;k<y?(y=k,_-=P):P/=2}if(w++,w>500)break}return _};s.t2length=m}(to)),to}var Du;function mo(){if(Du)return Hr;Du=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.Path=void 0;const s=be(),u=ht(),T=Re(),N=Qd();let b=class Tt extends u.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Tt.parsePathData(this.data()),this.pathLength=Tt.getPathLength(this.dataArray)}_sceneFunc(a){const f=this.dataArray;a.beginPath();let g=!1;for(let x=0;x<f.length;x++){const R=f[x].command,L=f[x].points;switch(R){case"L":a.lineTo(L[0],L[1]);break;case"M":a.moveTo(L[0],L[1]);break;case"C":a.bezierCurveTo(L[0],L[1],L[2],L[3],L[4],L[5]);break;case"Q":a.quadraticCurveTo(L[0],L[1],L[2],L[3]);break;case"A":var y=L[0],_=L[1],P=L[2],w=L[3],p=L[4],d=L[5],v=L[6],k=L[7],A=P>w?P:w,c=P>w?1:P/w,o=P>w?w/P:1;a.translate(y,_),a.rotate(v),a.scale(c,o),a.arc(0,0,A,p,p+d,1-k),a.scale(1/c,1/o),a.rotate(-v),a.translate(-y,-_);break;case"z":g=!0,a.closePath();break}}!g&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(p){if(p.command==="A"){const d=p.points[4],v=p.points[5],k=p.points[4]+v;let A=Math.PI/180;if(Math.abs(d-k)<A&&(A=Math.abs(d-k)),v<0)for(let c=d-A;c>k;c-=A){const o=Tt.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],c,0);a.push(o.x,o.y)}else for(let c=d+A;c<k;c+=A){const o=Tt.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],c,0);a.push(o.x,o.y)}}else if(p.command==="C")for(let d=0;d<=1;d+=.01){const v=Tt.getPointOnCubicBezier(d,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);a.push(v.x,v.y)}else a=a.concat(p.points)});let f=a[0],g=a[0],y=a[1],_=a[1],P,w;for(let p=0;p<a.length/2;p++)P=a[p*2],w=a[p*2+1],isNaN(P)||(f=Math.min(f,P),g=Math.max(g,P)),isNaN(w)||(y=Math.min(y,w),_=Math.max(_,w));return{x:f,y,width:g-f,height:_-y}}getLength(){return this.pathLength}getPointAtLength(a){return Tt.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,f,g,y){return Math.sqrt((g-a)*(g-a)+(y-f)*(y-f))}static getPathLength(a){let f=0;for(let g=0;g<a.length;++g)f+=a[g].pathLength;return f}static getPointAtLengthOfDataArray(a,f){let g,y=0,_=f.length;if(!_)return null;for(;y<_&&a>f[y].pathLength;)a-=f[y].pathLength,++y;if(y===_)return g=f[y-1].points.slice(-2),{x:g[0],y:g[1]};if(a<.01)return g=f[y].points.slice(0,2),{x:g[0],y:g[1]};const P=f[y],w=P.points;switch(P.command){case"L":return Tt.getPointOnLine(a,P.start.x,P.start.y,w[0],w[1]);case"C":return Tt.getPointOnCubicBezier((0,N.t2length)(a,Tt.getPathLength(f),x=>(0,N.getCubicArcLength)([P.start.x,w[0],w[2],w[4]],[P.start.y,w[1],w[3],w[5]],x)),P.start.x,P.start.y,w[0],w[1],w[2],w[3],w[4],w[5]);case"Q":return Tt.getPointOnQuadraticBezier((0,N.t2length)(a,Tt.getPathLength(f),x=>(0,N.getQuadraticArcLength)([P.start.x,w[0],w[2]],[P.start.y,w[1],w[3]],x)),P.start.x,P.start.y,w[0],w[1],w[2],w[3]);case"A":var p=w[0],d=w[1],v=w[2],k=w[3],A=w[4],c=w[5],o=w[6];return A+=c*a/P.pathLength,Tt.getPointOnEllipticalArc(p,d,v,k,A,o)}return null}static getPointOnLine(a,f,g,y,_,P,w){P=P??f,w=w??g;const p=this.getLineLength(f,g,y,_);if(p<1e-10)return{x:f,y:g};if(y===f)return{x:P,y:w+(_>g?a:-a)};const d=(_-g)/(y-f),v=Math.sqrt(a*a/(1+d*d))*(y<f?-1:1),k=d*v;if(Math.abs(w-g-d*(P-f))<1e-10)return{x:P+v,y:w+k};const A=((P-f)*(y-f)+(w-g)*(_-g))/(p*p),c=f+A*(y-f),o=g+A*(_-g),x=this.getLineLength(P,w,c,o),R=Math.sqrt(a*a-x*x),L=Math.sqrt(R*R/(1+d*d))*(y<f?-1:1),G=d*L;return{x:c+L,y:o+G}}static getPointOnCubicBezier(a,f,g,y,_,P,w,p,d){function v(R){return R*R*R}function k(R){return 3*R*R*(1-R)}function A(R){return 3*R*(1-R)*(1-R)}function c(R){return(1-R)*(1-R)*(1-R)}const o=p*v(a)+P*k(a)+y*A(a)+f*c(a),x=d*v(a)+w*k(a)+_*A(a)+g*c(a);return{x:o,y:x}}static getPointOnQuadraticBezier(a,f,g,y,_,P,w){function p(c){return c*c}function d(c){return 2*c*(1-c)}function v(c){return(1-c)*(1-c)}const k=P*p(a)+y*d(a)+f*v(a),A=w*p(a)+_*d(a)+g*v(a);return{x:k,y:A}}static getPointOnEllipticalArc(a,f,g,y,_,P){const w=Math.cos(P),p=Math.sin(P),d={x:g*Math.cos(_),y:y*Math.sin(_)};return{x:a+(d.x*w-d.y*p),y:f+(d.x*p+d.y*w)}}static parsePathData(a){if(!a)return[];let f=a;const g=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];f=f.replace(new RegExp(" ","g"),",");for(var y=0;y<g.length;y++)f=f.replace(new RegExp(g[y],"g"),"|"+g[y]);const _=f.split("|"),P=[],w=[];let p=0,d=0;const v=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let k;for(y=1;y<_.length;y++){let l=_[y],S=l.charAt(0);for(l=l.slice(1),w.length=0;k=v.exec(l);)w.push(k[0]);const C=[];for(let D=0,O=w.length;D<O;D++){if(w[D]==="00"){C.push(0,0);continue}const j=parseFloat(w[D]);isNaN(j)?C.push(0):C.push(j)}for(;C.length>0&&!isNaN(C[0]);){let D="",O=[];const j=p,H=d;var A,c,o,x,R,L,G,I,z,E;switch(S){case"l":p+=C.shift(),d+=C.shift(),D="L",O.push(p,d);break;case"L":p=C.shift(),d=C.shift(),O.push(p,d);break;case"m":var M=C.shift(),B=C.shift();if(p+=M,d+=B,D="M",P.length>2&&P[P.length-1].command==="z"){for(let Z=P.length-2;Z>=0;Z--)if(P[Z].command==="M"){p=P[Z].points[0]+M,d=P[Z].points[1]+B;break}}O.push(p,d),S="l";break;case"M":p=C.shift(),d=C.shift(),D="M",O.push(p,d),S="L";break;case"h":p+=C.shift(),D="L",O.push(p,d);break;case"H":p=C.shift(),D="L",O.push(p,d);break;case"v":d+=C.shift(),D="L",O.push(p,d);break;case"V":d=C.shift(),D="L",O.push(p,d);break;case"C":O.push(C.shift(),C.shift(),C.shift(),C.shift()),p=C.shift(),d=C.shift(),O.push(p,d);break;case"c":O.push(p+C.shift(),d+C.shift(),p+C.shift(),d+C.shift()),p+=C.shift(),d+=C.shift(),D="C",O.push(p,d);break;case"S":c=p,o=d,A=P[P.length-1],A.command==="C"&&(c=p+(p-A.points[2]),o=d+(d-A.points[3])),O.push(c,o,C.shift(),C.shift()),p=C.shift(),d=C.shift(),D="C",O.push(p,d);break;case"s":c=p,o=d,A=P[P.length-1],A.command==="C"&&(c=p+(p-A.points[2]),o=d+(d-A.points[3])),O.push(c,o,p+C.shift(),d+C.shift()),p+=C.shift(),d+=C.shift(),D="C",O.push(p,d);break;case"Q":O.push(C.shift(),C.shift()),p=C.shift(),d=C.shift(),O.push(p,d);break;case"q":O.push(p+C.shift(),d+C.shift()),p+=C.shift(),d+=C.shift(),D="Q",O.push(p,d);break;case"T":c=p,o=d,A=P[P.length-1],A.command==="Q"&&(c=p+(p-A.points[0]),o=d+(d-A.points[1])),p=C.shift(),d=C.shift(),D="Q",O.push(c,o,p,d);break;case"t":c=p,o=d,A=P[P.length-1],A.command==="Q"&&(c=p+(p-A.points[0]),o=d+(d-A.points[1])),p+=C.shift(),d+=C.shift(),D="Q",O.push(c,o,p,d);break;case"A":x=C.shift(),R=C.shift(),L=C.shift(),G=C.shift(),I=C.shift(),z=p,E=d,p=C.shift(),d=C.shift(),D="A",O=this.convertEndpointToCenterParameterization(z,E,p,d,G,I,x,R,L);break;case"a":x=C.shift(),R=C.shift(),L=C.shift(),G=C.shift(),I=C.shift(),z=p,E=d,p+=C.shift(),d+=C.shift(),D="A",O=this.convertEndpointToCenterParameterization(z,E,p,d,G,I,x,R,L);break}P.push({command:D||S,points:O,start:{x:j,y:H},pathLength:this.calcLength(j,H,D||S,O)})}(S==="z"||S==="Z")&&P.push({command:"z",points:[],start:void 0,pathLength:0})}return P}static calcLength(a,f,g,y){let _,P,w,p;const d=Tt;switch(g){case"L":return d.getLineLength(a,f,y[0],y[1]);case"C":return(0,N.getCubicArcLength)([a,y[0],y[2],y[4]],[f,y[1],y[3],y[5]],1);case"Q":return(0,N.getQuadraticArcLength)([a,y[0],y[2]],[f,y[1],y[3]],1);case"A":_=0;var v=y[4],k=y[5],A=y[4]+k,c=Math.PI/180;if(Math.abs(v-A)<c&&(c=Math.abs(v-A)),P=d.getPointOnEllipticalArc(y[0],y[1],y[2],y[3],v,0),k<0)for(p=v-c;p>A;p-=c)w=d.getPointOnEllipticalArc(y[0],y[1],y[2],y[3],p,0),_+=d.getLineLength(P.x,P.y,w.x,w.y),P=w;else for(p=v+c;p<A;p+=c)w=d.getPointOnEllipticalArc(y[0],y[1],y[2],y[3],p,0),_+=d.getLineLength(P.x,P.y,w.x,w.y),P=w;return w=d.getPointOnEllipticalArc(y[0],y[1],y[2],y[3],A,0),_+=d.getLineLength(P.x,P.y,w.x,w.y),_}return 0}static convertEndpointToCenterParameterization(a,f,g,y,_,P,w,p,d){const v=d*(Math.PI/180),k=Math.cos(v)*(a-g)/2+Math.sin(v)*(f-y)/2,A=-1*Math.sin(v)*(a-g)/2+Math.cos(v)*(f-y)/2,c=k*k/(w*w)+A*A/(p*p);c>1&&(w*=Math.sqrt(c),p*=Math.sqrt(c));let o=Math.sqrt((w*w*(p*p)-w*w*(A*A)-p*p*(k*k))/(w*w*(A*A)+p*p*(k*k)));_===P&&(o*=-1),isNaN(o)&&(o=0);const x=o*w*A/p,R=o*-p*k/w,L=(a+g)/2+Math.cos(v)*x-Math.sin(v)*R,G=(f+y)/2+Math.sin(v)*x+Math.cos(v)*R,I=function(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1])},z=function(C,D){return(C[0]*D[0]+C[1]*D[1])/(I(C)*I(D))},E=function(C,D){return(C[0]*D[1]<C[1]*D[0]?-1:1)*Math.acos(z(C,D))},M=E([1,0],[(k-x)/w,(A-R)/p]),B=[(k-x)/w,(A-R)/p],l=[(-1*k-x)/w,(-1*A-R)/p];let S=E(B,l);return z(B,l)<=-1&&(S=Math.PI),z(B,l)>=1&&(S=0),P===0&&S>0&&(S=S-2*Math.PI),P===1&&S<0&&(S=S+2*Math.PI),[L,G,w,p,M,S,v,P]}};return Hr.Path=b,b.prototype.className="Path",b.prototype._attrsAffectingSize=["data"],(0,T._registerNode)(b),s.Factory.addGetterSetter(b,"data"),Hr}var Ou;function Zd(){if(Ou)return Br;Ou=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.Arrow=void 0;const s=be(),u=Uc(),T=Ne(),N=Re(),b=mo();let m=class extends u.Line{_sceneFunc(f){super._sceneFunc(f);const g=Math.PI*2,y=this.points();let _=y;const P=this.tension()!==0&&y.length>4;P&&(_=this.getTensionPoints());const w=this.pointerLength(),p=y.length;let d,v;if(P){const c=[_[_.length-4],_[_.length-3],_[_.length-2],_[_.length-1],y[p-2],y[p-1]],o=b.Path.calcLength(_[_.length-4],_[_.length-3],"C",c),x=b.Path.getPointOnQuadraticBezier(Math.min(1,1-w/o),c[0],c[1],c[2],c[3],c[4],c[5]);d=y[p-2]-x.x,v=y[p-1]-x.y}else d=y[p-2]-y[p-4],v=y[p-1]-y[p-3];const k=(Math.atan2(v,d)+g)%g,A=this.pointerWidth();this.pointerAtEnding()&&(f.save(),f.beginPath(),f.translate(y[p-2],y[p-1]),f.rotate(k),f.moveTo(0,0),f.lineTo(-w,A/2),f.lineTo(-w,-A/2),f.closePath(),f.restore(),this.__fillStroke(f)),this.pointerAtBeginning()&&(f.save(),f.beginPath(),f.translate(y[0],y[1]),P?(d=(_[0]+_[2])/2-y[0],v=(_[1]+_[3])/2-y[1]):(d=y[2]-y[0],v=y[3]-y[1]),f.rotate((Math.atan2(-v,-d)+g)%g),f.moveTo(0,0),f.lineTo(-w,A/2),f.lineTo(-w,-A/2),f.closePath(),f.restore(),this.__fillStroke(f))}__fillStroke(f){const g=this.dashEnabled();g&&(this.attrs.dashEnabled=!1,f.setLineDash([])),f.fillStrokeShape(this),g&&(this.attrs.dashEnabled=!0)}getSelfRect(){const f=super.getSelfRect(),g=this.pointerWidth()/2;return{x:f.x,y:f.y-g,width:f.width,height:f.height+g*2}}};return Br.Arrow=m,m.prototype.className="Arrow",(0,N._registerNode)(m),s.Factory.addGetterSetter(m,"pointerLength",10,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(m,"pointerWidth",10,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(m,"pointerAtBeginning",!1),s.Factory.addGetterSetter(m,"pointerAtEnding",!0),Br}var jr={},Gu;function Jd(){if(Gu)return jr;Gu=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.Circle=void 0;const s=be(),u=ht(),T=Ne(),N=Re();let b=class extends u.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return jr.Circle=b,b.prototype._centroid=!0,b.prototype.className="Circle",b.prototype._attrsAffectingSize=["radius"],(0,N._registerNode)(b),s.Factory.addGetterSetter(b,"radius",0,(0,T.getNumberValidator)()),jr}var qr={},zu;function $d(){if(zu)return qr;zu=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.Ellipse=void 0;const s=be(),u=ht(),T=Ne(),N=Re();let b=class extends u.Shape{_sceneFunc(a){const f=this.radiusX(),g=this.radiusY();a.beginPath(),a.save(),f!==g&&a.scale(1,g/f),a.arc(0,0,f,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return qr.Ellipse=b,b.prototype.className="Ellipse",b.prototype._centroid=!0,b.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,N._registerNode)(b),s.Factory.addComponentsGetterSetter(b,"radius",["x","y"]),s.Factory.addGetterSetter(b,"radiusX",0,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(b,"radiusY",0,(0,T.getNumberValidator)()),qr}var Wr={},Uu;function e0(){if(Uu)return Wr;Uu=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.Image=void 0;const s=Je(),u=be(),T=ht(),N=Re(),b=Ne();let m=class Bc extends T.Shape{constructor(f){super(f),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const f=this.image();f&&f.complete||f&&f.readyState===4||f&&f.addEventListener&&f.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const f=!!this.cornerRadius(),g=this.hasShadow();return f&&g?!0:super._useBufferCanvas(!0)}_sceneFunc(f){const g=this.getWidth(),y=this.getHeight(),_=this.cornerRadius(),P=this.attrs.image;let w;if(P){const p=this.attrs.cropWidth,d=this.attrs.cropHeight;p&&d?w=[P,this.cropX(),this.cropY(),p,d,0,0,g,y]:w=[P,0,0,g,y]}(this.hasFill()||this.hasStroke()||_)&&(f.beginPath(),_?s.Util.drawRoundedRectPath(f,g,y,_):f.rect(0,0,g,y),f.closePath(),f.fillStrokeShape(this)),P&&(_&&f.clip(),f.drawImage.apply(f,w))}_hitFunc(f){const g=this.width(),y=this.height(),_=this.cornerRadius();f.beginPath(),_?s.Util.drawRoundedRectPath(f,g,y,_):f.rect(0,0,g,y),f.closePath(),f.fillStrokeShape(this)}getWidth(){var f,g;return(f=this.attrs.width)!==null&&f!==void 0?f:(g=this.image())===null||g===void 0?void 0:g.width}getHeight(){var f,g;return(f=this.attrs.height)!==null&&f!==void 0?f:(g=this.image())===null||g===void 0?void 0:g.height}static fromURL(f,g,y=null){const _=s.Util.createImageElement();_.onload=function(){const P=new Bc({image:_});g(P)},_.onerror=y,_.crossOrigin="Anonymous",_.src=f}};return Wr.Image=m,m.prototype.className="Image",(0,N._registerNode)(m),u.Factory.addGetterSetter(m,"cornerRadius",0,(0,b.getNumberOrArrayOfNumbersValidator)(4)),u.Factory.addGetterSetter(m,"image"),u.Factory.addComponentsGetterSetter(m,"crop",["x","y","width","height"]),u.Factory.addGetterSetter(m,"cropX",0,(0,b.getNumberValidator)()),u.Factory.addGetterSetter(m,"cropY",0,(0,b.getNumberValidator)()),u.Factory.addGetterSetter(m,"cropWidth",0,(0,b.getNumberValidator)()),u.Factory.addGetterSetter(m,"cropHeight",0,(0,b.getNumberValidator)()),Wr}var Bn={},Bu;function t0(){if(Bu)return Bn;Bu=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.Tag=Bn.Label=void 0;const s=be(),u=ht(),T=go(),N=Ne(),b=Re(),m=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",f="none",g="up",y="right",_="down",P="left",w=m.length;let p=class extends T.Group{constructor(k){super(k),this.on("add.konva",function(A){this._addListeners(A.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(k){let A=this,c;const o=function(){A._sync()};for(c=0;c<w;c++)k.on(m[c]+a,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let k=this.getText(),A=this.getTag(),c,o,x,R,L,G,I;if(k&&A){switch(c=k.width(),o=k.height(),x=A.pointerDirection(),R=A.pointerWidth(),I=A.pointerHeight(),L=0,G=0,x){case g:L=c/2,G=-1*I;break;case y:L=c+R,G=o/2;break;case _:L=c/2,G=o+I;break;case P:L=-1*R,G=o/2;break}A.setAttrs({x:-1*L,y:-1*G,width:c,height:o}),k.setAttrs({x:-1*L,y:-1*G})}}};Bn.Label=p,p.prototype.className="Label",(0,b._registerNode)(p);class d extends u.Shape{_sceneFunc(k){const A=this.width(),c=this.height(),o=this.pointerDirection(),x=this.pointerWidth(),R=this.pointerHeight(),L=this.cornerRadius();let G=0,I=0,z=0,E=0;typeof L=="number"?G=I=z=E=Math.min(L,A/2,c/2):(G=Math.min(L[0]||0,A/2,c/2),I=Math.min(L[1]||0,A/2,c/2),E=Math.min(L[2]||0,A/2,c/2),z=Math.min(L[3]||0,A/2,c/2)),k.beginPath(),k.moveTo(G,0),o===g&&(k.lineTo((A-x)/2,0),k.lineTo(A/2,-1*R),k.lineTo((A+x)/2,0)),k.lineTo(A-I,0),k.arc(A-I,I,I,Math.PI*3/2,0,!1),o===y&&(k.lineTo(A,(c-R)/2),k.lineTo(A+x,c/2),k.lineTo(A,(c+R)/2)),k.lineTo(A,c-E),k.arc(A-E,c-E,E,0,Math.PI/2,!1),o===_&&(k.lineTo((A+x)/2,c),k.lineTo(A/2,c+R),k.lineTo((A-x)/2,c)),k.lineTo(z,c),k.arc(z,c-z,z,Math.PI/2,Math.PI,!1),o===P&&(k.lineTo(0,(c+R)/2),k.lineTo(-1*x,c/2),k.lineTo(0,(c-R)/2)),k.lineTo(0,G),k.arc(G,G,G,Math.PI,Math.PI*3/2,!1),k.closePath(),k.fillStrokeShape(this)}getSelfRect(){let k=0,A=0,c=this.pointerWidth(),o=this.pointerHeight(),x=this.pointerDirection(),R=this.width(),L=this.height();return x===g?(A-=o,L+=o):x===_?L+=o:x===P?(k-=c*1.5,R+=c):x===y&&(R+=c*1.5),{x:k,y:A,width:R,height:L}}}return Bn.Tag=d,d.prototype.className="Tag",(0,b._registerNode)(d),s.Factory.addGetterSetter(d,"pointerDirection",f),s.Factory.addGetterSetter(d,"pointerWidth",0,(0,N.getNumberValidator)()),s.Factory.addGetterSetter(d,"pointerHeight",0,(0,N.getNumberValidator)()),s.Factory.addGetterSetter(d,"cornerRadius",0,(0,N.getNumberOrArrayOfNumbersValidator)(4)),Bn}var Kr={},Vu;function Vc(){if(Vu)return Kr;Vu=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.Rect=void 0;const s=be(),u=ht(),T=Re(),N=Je(),b=Ne();let m=class extends u.Shape{_sceneFunc(f){const g=this.cornerRadius(),y=this.width(),_=this.height();f.beginPath(),g?N.Util.drawRoundedRectPath(f,y,_,g):f.rect(0,0,y,_),f.closePath(),f.fillStrokeShape(this)}};return Kr.Rect=m,m.prototype.className="Rect",(0,T._registerNode)(m),s.Factory.addGetterSetter(m,"cornerRadius",0,(0,b.getNumberOrArrayOfNumbersValidator)(4)),Kr}var Yr={},Hu;function n0(){if(Hu)return Yr;Hu=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.RegularPolygon=void 0;const s=be(),u=ht(),T=Ne(),N=Re();let b=class extends u.Shape{_sceneFunc(a){const f=this._getPoints();a.beginPath(),a.moveTo(f[0].x,f[0].y);for(let g=1;g<f.length;g++)a.lineTo(f[g].x,f[g].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,f=this.attrs.radius||0,g=[];for(let y=0;y<a;y++)g.push({x:f*Math.sin(y*2*Math.PI/a),y:-1*f*Math.cos(y*2*Math.PI/a)});return g}getSelfRect(){const a=this._getPoints();let f=a[0].x,g=a[0].y,y=a[0].x,_=a[0].y;return a.forEach(P=>{f=Math.min(f,P.x),g=Math.max(g,P.x),y=Math.min(y,P.y),_=Math.max(_,P.y)}),{x:f,y,width:g-f,height:_-y}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return Yr.RegularPolygon=b,b.prototype.className="RegularPolygon",b.prototype._centroid=!0,b.prototype._attrsAffectingSize=["radius"],(0,N._registerNode)(b),s.Factory.addGetterSetter(b,"radius",0,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(b,"sides",0,(0,T.getNumberValidator)()),Yr}var Xr={},ju;function r0(){if(ju)return Xr;ju=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.Ring=void 0;const s=be(),u=ht(),T=Ne(),N=Re(),b=Math.PI*2;let m=class extends u.Shape{_sceneFunc(f){f.beginPath(),f.arc(0,0,this.innerRadius(),0,b,!1),f.moveTo(this.outerRadius(),0),f.arc(0,0,this.outerRadius(),b,0,!0),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(f){this.outerRadius(f/2)}setHeight(f){this.outerRadius(f/2)}};return Xr.Ring=m,m.prototype.className="Ring",m.prototype._centroid=!0,m.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,N._registerNode)(m),s.Factory.addGetterSetter(m,"innerRadius",0,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(m,"outerRadius",0,(0,T.getNumberValidator)()),Xr}var Qr={},qu;function i0(){if(qu)return Qr;qu=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.Sprite=void 0;const s=be(),u=ht(),T=po(),N=Ne(),b=Re();let m=class extends u.Shape{constructor(f){super(f),this._updated=!0,this.anim=new T.Animation(()=>{const g=this._updated;return this._updated=!1,g}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(f){const g=this.animation(),y=this.frameIndex(),_=y*4,P=this.animations()[g],w=this.frameOffsets(),p=P[_+0],d=P[_+1],v=P[_+2],k=P[_+3],A=this.image();if((this.hasFill()||this.hasStroke())&&(f.beginPath(),f.rect(0,0,v,k),f.closePath(),f.fillStrokeShape(this)),A)if(w){const c=w[g],o=y*2;f.drawImage(A,p,d,v,k,c[o+0],c[o+1],v,k)}else f.drawImage(A,p,d,v,k,0,0,v,k)}_hitFunc(f){const g=this.animation(),y=this.frameIndex(),_=y*4,P=this.animations()[g],w=this.frameOffsets(),p=P[_+2],d=P[_+3];if(f.beginPath(),w){const v=w[g],k=y*2;f.rect(v[k+0],v[k+1],p,d)}else f.rect(0,0,p,d);f.closePath(),f.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const f=this;this.interval=setInterval(function(){f._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const f=this.getLayer();this.anim.setLayers(f),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const f=this.frameIndex(),g=this.animation(),y=this.animations(),_=y[g],P=_.length/4;f<P-1?this.frameIndex(f+1):this.frameIndex(0)}};return Qr.Sprite=m,m.prototype.className="Sprite",(0,b._registerNode)(m),s.Factory.addGetterSetter(m,"animation"),s.Factory.addGetterSetter(m,"animations"),s.Factory.addGetterSetter(m,"frameOffsets"),s.Factory.addGetterSetter(m,"image"),s.Factory.addGetterSetter(m,"frameIndex",0,(0,N.getNumberValidator)()),s.Factory.addGetterSetter(m,"frameRate",17,(0,N.getNumberValidator)()),s.Factory.backCompat(m,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Qr}var Zr={},Wu;function s0(){if(Wu)return Zr;Wu=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.Star=void 0;const s=be(),u=ht(),T=Ne(),N=Re();let b=class extends u.Shape{_sceneFunc(a){const f=this.innerRadius(),g=this.outerRadius(),y=this.numPoints();a.beginPath(),a.moveTo(0,0-g);for(let _=1;_<y*2;_++){const P=_%2===0?g:f,w=P*Math.sin(_*Math.PI/y),p=-1*P*Math.cos(_*Math.PI/y);a.lineTo(w,p)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return Zr.Star=b,b.prototype.className="Star",b.prototype._centroid=!0,b.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,N._registerNode)(b),s.Factory.addGetterSetter(b,"numPoints",5,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(b,"innerRadius",0,(0,T.getNumberValidator)()),s.Factory.addGetterSetter(b,"outerRadius",0,(0,T.getNumberValidator)()),Zr}var ar={},Ku;function Hc(){if(Ku)return ar;Ku=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.Text=void 0,ar.stringToArray=a;const s=Je(),u=be(),T=ht(),N=Re(),b=Ne(),m=Re();function a($){return[...$].reduce((Y,te,ae,le)=>{if(new RegExp("\\p{Emoji}","u").test(te)){const U=le[ae+1];U&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(U)?(Y.push(te+U),le[ae+1]=""):Y.push(te)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(te+(le[ae+1]||""))?Y.push(te+le[ae+1]):ae>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(te)?Y[Y.length-1]+=te:te&&Y.push(te);return Y},[])}const f="auto",g="center",y="inherit",_="justify",P="Change.konva",w="2d",p="-",d="left",v="text",k="Text",A="top",c="bottom",o="middle",x="normal",R="px ",L=" ",G="right",I="rtl",z="word",E="char",M="none",B="…",l=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],S=l.length;function C($){return $.split(",").map(Y=>{Y=Y.trim();const te=Y.indexOf(" ")>=0,ae=Y.indexOf('"')>=0||Y.indexOf("'")>=0;return te&&!ae&&(Y=`"${Y}"`),Y}).join(", ")}let D;function O(){return D||(D=s.Util.createCanvasElement().getContext(w),D)}function j($){$.fillText(this._partialText,this._partialTextX,this._partialTextY)}function H($){$.setAttr("miterLimit",2),$.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Z($){return $=$||{},!$.fillLinearGradientColorStops&&!$.fillRadialGradientColorStops&&!$.fillPatternImage&&($.fill=$.fill||"black"),$}let Q=class extends T.Shape{constructor(Y){super(Z(Y)),this._partialTextX=0,this._partialTextY=0;for(let te=0;te<S;te++)this.on(l[te]+P,this._setTextData);this._setTextData()}_sceneFunc(Y){const te=this.textArr,ae=te.length;if(!this.text())return;let le=this.padding(),U=this.fontSize(),W=this.lineHeight()*U,ne=this.verticalAlign(),re=this.direction(),ie=0,he=this.align(),pe=this.getWidth(),Ae=this.letterSpacing(),Ce=this.fill(),Qe=this.textDecoration(),Se=Qe.indexOf("underline")!==-1,Ge=Qe.indexOf("line-through")!==-1,bt;re=re===y?Y.direction:re;let Ke=W/2,Ft=o;if(N.Konva._fixTextRendering){const Fe=this.measureSize("M");Ft="alphabetic",Ke=(Fe.fontBoundingBoxAscent-Fe.fontBoundingBoxDescent)/2+W/2}var Oe=0,nt=0;for(re===I&&Y.setAttr("direction",re),Y.setAttr("font",this._getContextFont()),Y.setAttr("textBaseline",Ft),Y.setAttr("textAlign",d),ne===o?ie=(this.getHeight()-ae*W-le*2)/2:ne===c&&(ie=this.getHeight()-ae*W-le*2),Y.translate(le,ie+le),bt=0;bt<ae;bt++){var Oe=0,nt=0,ee=te[bt],oe=ee.text,de=ee.width,Pe=ee.lastInParagraph,Ee,me;if(Y.save(),he===G?Oe+=pe-de-le*2:he===g&&(Oe+=(pe-de-le*2)/2),Se){Y.save(),Y.beginPath();const Me=N.Konva._fixTextRendering?Math.round(U/4):Math.round(U/2),Ve=Oe,rt=Ke+nt+Me;Y.moveTo(Ve,rt),Ee=oe.split(" ").length-1,me=he===_&&!Pe?pe-le*2:de,Y.lineTo(Ve+Math.round(me),rt),Y.lineWidth=U/15;const bn=this._getLinearGradient();Y.strokeStyle=bn||Ce,Y.stroke(),Y.restore()}if(Ge){Y.save(),Y.beginPath();const Me=N.Konva._fixTextRendering?-Math.round(U/4):0;Y.moveTo(Oe,Ke+nt+Me),Ee=oe.split(" ").length-1,me=he===_&&!Pe?pe-le*2:de,Y.lineTo(Oe+Math.round(me),Ke+nt+Me),Y.lineWidth=U/15;const Ve=this._getLinearGradient();Y.strokeStyle=Ve||Ce,Y.stroke(),Y.restore()}if(re!==I&&(Ae!==0||he===_)){Ee=oe.split(" ").length-1;const Me=a(oe);for(let Ve=0;Ve<Me.length;Ve++){const rt=Me[Ve];rt===" "&&!Pe&&he===_&&(Oe+=(pe-le*2-de)/Ee),this._partialTextX=Oe,this._partialTextY=Ke+nt,this._partialText=rt,Y.fillStrokeShape(this),Oe+=this.measureSize(rt).width+Ae}}else Ae!==0&&Y.setAttr("letterSpacing",`${Ae}px`),this._partialTextX=Oe,this._partialTextY=Ke+nt,this._partialText=oe,Y.fillStrokeShape(this);Y.restore(),ae>1&&(Ke+=W)}}_hitFunc(Y){const te=this.getWidth(),ae=this.getHeight();Y.beginPath(),Y.rect(0,0,te,ae),Y.closePath(),Y.fillStrokeShape(this)}setText(Y){const te=s.Util._isString(Y)?Y:Y==null?"":Y+"";return this._setAttr(v,te),this}getWidth(){return this.attrs.width===f||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===f||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return s.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(Y){var te,ae,le,U,W,ne,re,ie,he,pe,Ae;let Ce=O(),Qe=this.fontSize(),Se;Ce.save(),Ce.font=this._getContextFont(),Se=Ce.measureText(Y),Ce.restore();const Ge=Qe/100;return{actualBoundingBoxAscent:(te=Se.actualBoundingBoxAscent)!==null&&te!==void 0?te:71.58203125*Ge,actualBoundingBoxDescent:(ae=Se.actualBoundingBoxDescent)!==null&&ae!==void 0?ae:0,actualBoundingBoxLeft:(le=Se.actualBoundingBoxLeft)!==null&&le!==void 0?le:-7.421875*Ge,actualBoundingBoxRight:(U=Se.actualBoundingBoxRight)!==null&&U!==void 0?U:75.732421875*Ge,alphabeticBaseline:(W=Se.alphabeticBaseline)!==null&&W!==void 0?W:0,emHeightAscent:(ne=Se.emHeightAscent)!==null&&ne!==void 0?ne:100*Ge,emHeightDescent:(re=Se.emHeightDescent)!==null&&re!==void 0?re:-20*Ge,fontBoundingBoxAscent:(ie=Se.fontBoundingBoxAscent)!==null&&ie!==void 0?ie:91*Ge,fontBoundingBoxDescent:(he=Se.fontBoundingBoxDescent)!==null&&he!==void 0?he:21*Ge,hangingBaseline:(pe=Se.hangingBaseline)!==null&&pe!==void 0?pe:72.80000305175781*Ge,ideographicBaseline:(Ae=Se.ideographicBaseline)!==null&&Ae!==void 0?Ae:-21*Ge,width:Se.width,height:Qe}}_getContextFont(){return this.fontStyle()+L+this.fontVariant()+L+(this.fontSize()+R)+C(this.fontFamily())}_addTextLine(Y){this.align()===_&&(Y=Y.trim());const ae=this._getTextWidth(Y);return this.textArr.push({text:Y,width:ae,lastInParagraph:!1})}_getTextWidth(Y){const te=this.letterSpacing(),ae=Y.length;return O().measureText(Y).width+te*ae}_setTextData(){let Y=this.text().split(`
`),te=+this.fontSize(),ae=0,le=this.lineHeight()*te,U=this.attrs.width,W=this.attrs.height,ne=U!==f&&U!==void 0,re=W!==f&&W!==void 0,ie=this.padding(),he=U-ie*2,pe=W-ie*2,Ae=0,Ce=this.wrap(),Qe=Ce!==M,Se=Ce!==E&&Qe,Ge=this.ellipsis();this.textArr=[],O().font=this._getContextFont();const bt=Ge?this._getTextWidth(B):0;for(let Ke=0,Ft=Y.length;Ke<Ft;++Ke){let Oe=Y[Ke],nt=this._getTextWidth(Oe);if(ne&&nt>he)for(;Oe.length>0;){let ee=0,oe=a(Oe).length,de="",Pe=0;for(;ee<oe;){const Ee=ee+oe>>>1,me=a(Oe),Fe=me.slice(0,Ee+1).join(""),Be=this._getTextWidth(Fe)+bt;Be<=he?(ee=Ee+1,de=Fe,Pe=Be):oe=Ee}if(de){if(Se){const Fe=a(Oe),Be=a(de),Me=Fe[Be.length],Ve=Me===L||Me===p;let rt;if(Ve&&Pe<=he)rt=Be.length;else{const bn=Be.lastIndexOf(L),cr=Be.lastIndexOf(p);rt=Math.max(bn,cr)+1}rt>0&&(ee=rt,de=Fe.slice(0,ee).join(""),Pe=this._getTextWidth(de))}if(de=de.trimRight(),this._addTextLine(de),ae=Math.max(ae,Pe),Ae+=le,this._shouldHandleEllipsis(Ae)){this._tryToAddEllipsisToLastLine();break}if(Oe=a(Oe).slice(ee).join("").trimLeft(),Oe.length>0&&(nt=this._getTextWidth(Oe),nt<=he)){this._addTextLine(Oe),Ae+=le,ae=Math.max(ae,nt);break}}else break}else this._addTextLine(Oe),Ae+=le,ae=Math.max(ae,nt),this._shouldHandleEllipsis(Ae)&&Ke<Ft-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),re&&Ae+le>pe)break}this.textHeight=te,this.textWidth=ae}_shouldHandleEllipsis(Y){const te=+this.fontSize(),ae=this.lineHeight()*te,le=this.attrs.height,U=le!==f&&le!==void 0,W=this.padding(),ne=le-W*2;return!(this.wrap()!==M)||U&&Y+ae>ne}_tryToAddEllipsisToLastLine(){const Y=this.attrs.width,te=Y!==f&&Y!==void 0,ae=this.padding(),le=Y-ae*2,U=this.ellipsis(),W=this.textArr[this.textArr.length-1];!W||!U||(te&&(this._getTextWidth(W.text+B)<le||(W.text=W.text.slice(0,W.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(W.text+B))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const Y=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,te=this.hasShadow();return Y&&te?!0:super._useBufferCanvas()}};return ar.Text=Q,Q.prototype._fillFunc=j,Q.prototype._strokeFunc=H,Q.prototype.className=k,Q.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,m._registerNode)(Q),u.Factory.overWriteSetter(Q,"width",(0,b.getNumberOrAutoValidator)()),u.Factory.overWriteSetter(Q,"height",(0,b.getNumberOrAutoValidator)()),u.Factory.addGetterSetter(Q,"direction",y),u.Factory.addGetterSetter(Q,"fontFamily","Arial"),u.Factory.addGetterSetter(Q,"fontSize",12,(0,b.getNumberValidator)()),u.Factory.addGetterSetter(Q,"fontStyle",x),u.Factory.addGetterSetter(Q,"fontVariant",x),u.Factory.addGetterSetter(Q,"padding",0,(0,b.getNumberValidator)()),u.Factory.addGetterSetter(Q,"align",d),u.Factory.addGetterSetter(Q,"verticalAlign",A),u.Factory.addGetterSetter(Q,"lineHeight",1,(0,b.getNumberValidator)()),u.Factory.addGetterSetter(Q,"wrap",z),u.Factory.addGetterSetter(Q,"ellipsis",!1,(0,b.getBooleanValidator)()),u.Factory.addGetterSetter(Q,"letterSpacing",0,(0,b.getNumberValidator)()),u.Factory.addGetterSetter(Q,"text","",(0,b.getStringValidator)()),u.Factory.addGetterSetter(Q,"textDecoration",""),ar}var Jr={},Yu;function a0(){if(Yu)return Jr;Yu=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.TextPath=void 0;const s=Je(),u=be(),T=ht(),N=mo(),b=Hc(),m=Ne(),a=Re(),f="",g="normal";function y(w){w.fillText(this.partialText,0,0)}function _(w){w.strokeText(this.partialText,0,0)}let P=class extends T.Shape{constructor(p){super(p),this.dummyCanvas=s.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return N.Path.getPathLength(this.dataArray)}_getPointAtLength(p){if(!this.attrs.data)return null;const d=this.pathLength;return p-1>d?null:N.Path.getPointAtLengthOfDataArray(p,this.dataArray)}_readDataAttribute(){this.dataArray=N.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(p){p.setAttr("font",this._getContextFont()),p.setAttr("textBaseline",this.textBaseline()),p.setAttr("textAlign","left"),p.save();const d=this.textDecoration(),v=this.fill(),k=this.fontSize(),A=this.glyphInfo;d==="underline"&&p.beginPath();for(let c=0;c<A.length;c++){p.save();const o=A[c].p0;p.translate(o.x,o.y),p.rotate(A[c].rotation),this.partialText=A[c].text,p.fillStrokeShape(this),d==="underline"&&(c===0&&p.moveTo(0,k/2+1),p.lineTo(k,k/2+1)),p.restore()}d==="underline"&&(p.strokeStyle=v,p.lineWidth=k/20,p.stroke()),p.restore()}_hitFunc(p){p.beginPath();const d=this.glyphInfo;if(d.length>=1){const v=d[0].p0;p.moveTo(v.x,v.y)}for(let v=0;v<d.length;v++){const k=d[v].p1;p.lineTo(k.x,k.y)}p.setAttr("lineWidth",this.fontSize()),p.setAttr("strokeStyle",this.colorKey),p.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return s.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(p){return b.Text.prototype.setText.call(this,p)}_getContextFont(){return b.Text.prototype._getContextFont.call(this)}_getTextSize(p){const v=this.dummyCanvas.getContext("2d");v.save(),v.font=this._getContextFont();const k=v.measureText(p);return v.restore(),{width:k.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:p,height:d}=this._getTextSize(this.attrs.text);if(this.textWidth=p,this.textHeight=d,this.glyphInfo=[],!this.attrs.data)return null;const v=this.letterSpacing(),k=this.align(),A=this.kerningFunc(),c=Math.max(this.textWidth+((this.attrs.text||"").length-1)*v,0);let o=0;k==="center"&&(o=Math.max(0,this.pathLength/2-c/2)),k==="right"&&(o=Math.max(0,this.pathLength-c));const x=(0,b.stringToArray)(this.text());let R=o;for(let L=0;L<x.length;L++){const G=this._getPointAtLength(R);if(!G)return;let I=this._getTextSize(x[L]).width+v;if(x[L]===" "&&k==="justify"){const S=this.text().split(" ").length-1;I+=(this.pathLength-c)/S}const z=this._getPointAtLength(R+I);if(!z)return;const E=N.Path.getLineLength(G.x,G.y,z.x,z.y);let M=0;if(A)try{M=A(x[L-1],x[L])*this.fontSize()}catch{M=0}G.x+=M,z.x+=M,this.textWidth+=M;const B=N.Path.getPointOnLine(M+E/2,G.x,G.y,z.x,z.y),l=Math.atan2(z.y-G.y,z.x-G.x);this.glyphInfo.push({transposeX:B.x,transposeY:B.y,text:x[L],rotation:l,p0:G,p1:z}),R+=I}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const p=[];this.glyphInfo.forEach(function(R){p.push(R.p0.x),p.push(R.p0.y),p.push(R.p1.x),p.push(R.p1.y)});let d=p[0]||0,v=p[0]||0,k=p[1]||0,A=p[1]||0,c,o;for(let R=0;R<p.length/2;R++)c=p[R*2],o=p[R*2+1],d=Math.min(d,c),v=Math.max(v,c),k=Math.min(k,o),A=Math.max(A,o);const x=this.fontSize();return{x:d-x/2,y:k-x/2,width:v-d+x,height:A-k+x}}destroy(){return s.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Jr.TextPath=P,P.prototype._fillFunc=y,P.prototype._strokeFunc=_,P.prototype._fillFuncHit=y,P.prototype._strokeFuncHit=_,P.prototype.className="TextPath",P.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(P),u.Factory.addGetterSetter(P,"data"),u.Factory.addGetterSetter(P,"fontFamily","Arial"),u.Factory.addGetterSetter(P,"fontSize",12,(0,m.getNumberValidator)()),u.Factory.addGetterSetter(P,"fontStyle",g),u.Factory.addGetterSetter(P,"align","left"),u.Factory.addGetterSetter(P,"letterSpacing",0,(0,m.getNumberValidator)()),u.Factory.addGetterSetter(P,"textBaseline","middle"),u.Factory.addGetterSetter(P,"fontVariant",g),u.Factory.addGetterSetter(P,"text",f),u.Factory.addGetterSetter(P,"textDecoration",""),u.Factory.addGetterSetter(P,"kerningFunc",void 0),Jr}var $r={},Xu;function o0(){if(Xu)return $r;Xu=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.Transformer=void 0;const s=Je(),u=be(),T=et(),N=ht(),b=Vc(),m=go(),a=Re(),f=Ne(),g=Re(),y="tr-konva",_=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(z=>z+`.${y}`).join(" "),P="nodesRect",w=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],p={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},d="ontouchstart"in a.Konva._global;function v(z,E,M){if(z==="rotater")return M;E+=s.Util.degToRad(p[z]||0);const B=(s.Util.radToDeg(E)%360+360)%360;return s.Util._inRange(B,315+22.5,360)||s.Util._inRange(B,0,22.5)?"ns-resize":s.Util._inRange(B,45-22.5,45+22.5)?"nesw-resize":s.Util._inRange(B,90-22.5,90+22.5)?"ew-resize":s.Util._inRange(B,135-22.5,135+22.5)?"nwse-resize":s.Util._inRange(B,180-22.5,180+22.5)?"ns-resize":s.Util._inRange(B,225-22.5,225+22.5)?"nesw-resize":s.Util._inRange(B,270-22.5,270+22.5)?"ew-resize":s.Util._inRange(B,315-22.5,315+22.5)?"nwse-resize":(s.Util.error("Transformer has unknown angle for cursor detection: "+B),"pointer")}const k=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],A=1e8;function c(z){return{x:z.x+z.width/2*Math.cos(z.rotation)+z.height/2*Math.sin(-z.rotation),y:z.y+z.height/2*Math.cos(z.rotation)+z.width/2*Math.sin(z.rotation)}}function o(z,E,M){const B=M.x+(z.x-M.x)*Math.cos(E)-(z.y-M.y)*Math.sin(E),l=M.y+(z.x-M.x)*Math.sin(E)+(z.y-M.y)*Math.cos(E);return{...z,rotation:z.rotation+E,x:B,y:l}}function x(z,E){const M=c(z);return o(z,E,M)}function R(z,E,M){let B=E;for(let l=0;l<z.length;l++){const S=a.Konva.getAngle(z[l]),C=Math.abs(S-E)%(Math.PI*2);Math.min(C,Math.PI*2-C)<M&&(B=S)}return B}let L=0,G=class extends m.Group{constructor(E){super(E),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(_,this.update),this.getNode()&&this.update()}attachTo(E){return this.setNode(E),this}setNode(E){return s.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([E])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return y+this._id}setNodes(E=[]){this._nodes&&this._nodes.length&&this.detach();const M=E.filter(l=>l.isAncestorOf(this)?(s.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=E=M,E.length===1&&this.useSingleNodeRotation()?this.rotation(E[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(l=>{const S=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},C=l._attrsAffectingSize.map(D=>D+"Change."+this._getEventNamespace()).join(" ");l.on(C,S),l.on(w.map(D=>D+`.${this._getEventNamespace()}`).join(" "),S),l.on(`absoluteTransformChange.${this._getEventNamespace()}`,S),this._proxyDrag(l)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(E){let M;E.on(`dragstart.${this._getEventNamespace()}`,B=>{M=E.getAbsolutePosition(),!this.isDragging()&&E!==this.findOne(".back")&&this.startDrag(B,!1)}),E.on(`dragmove.${this._getEventNamespace()}`,B=>{if(!M)return;const l=E.getAbsolutePosition(),S=l.x-M.x,C=l.y-M.y;this.nodes().forEach(D=>{if(D===E||D.isDragging())return;const O=D.getAbsolutePosition();D.setAbsolutePosition({x:O.x+S,y:O.y+C}),D.startDrag(B)}),M=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(E=>{E.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(P),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(P,this.__getNodeRect)}__getNodeShape(E,M=this.rotation(),B){const l=E.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),S=E.getAbsoluteScale(B),C=E.getAbsolutePosition(B),D=l.x*S.x-E.offsetX()*S.x,O=l.y*S.y-E.offsetY()*S.y,j=(a.Konva.getAngle(E.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),H={x:C.x+D*Math.cos(j)+O*Math.sin(-j),y:C.y+O*Math.cos(j)+D*Math.sin(j),width:l.width*S.x,height:l.height*S.y,rotation:j};return o(H,-a.Konva.getAngle(M),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-A,y:-A,width:0,height:0,rotation:0};const M=[];this.nodes().map(j=>{const H=j.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),Z=[{x:H.x,y:H.y},{x:H.x+H.width,y:H.y},{x:H.x+H.width,y:H.y+H.height},{x:H.x,y:H.y+H.height}],Q=j.getAbsoluteTransform();Z.forEach(function($){const Y=Q.point($);M.push(Y)})});const B=new s.Transform;B.rotate(-a.Konva.getAngle(this.rotation()));let l=1/0,S=1/0,C=-1/0,D=-1/0;M.forEach(function(j){const H=B.point(j);l===void 0&&(l=C=H.x,S=D=H.y),l=Math.min(l,H.x),S=Math.min(S,H.y),C=Math.max(C,H.x),D=Math.max(D,H.y)}),B.invert();const O=B.point({x:l,y:S});return{x:O.x,y:O.y,width:C-l,height:D-S,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),k.forEach(E=>{this._createAnchor(E)}),this._createAnchor("rotater")}_createAnchor(E){const M=new b.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:E+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:d?10:"auto"}),B=this;M.on("mousedown touchstart",function(l){B._handleMouseDown(l)}),M.on("dragstart",l=>{M.stopDrag(),l.cancelBubble=!0}),M.on("dragend",l=>{l.cancelBubble=!0}),M.on("mouseenter",()=>{const l=a.Konva.getAngle(this.rotation()),S=this.rotateAnchorCursor(),C=v(E,l,S);M.getStage().content&&(M.getStage().content.style.cursor=C),this._cursorChange=!0}),M.on("mouseout",()=>{M.getStage().content&&(M.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(M)}_createBack(){const E=new N.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(M,B){const l=B.getParent(),S=l.padding();M.beginPath(),M.rect(-S,-S,B.width()+S*2,B.height()+S*2),M.moveTo(B.width()/2,-S),l.rotateEnabled()&&l.rotateLineVisible()&&M.lineTo(B.width()/2,-l.rotateAnchorOffset()*s.Util._sign(B.height())-S),M.fillStrokeShape(B)},hitFunc:(M,B)=>{if(!this.shouldOverdrawWholeArea())return;const l=this.padding();M.beginPath(),M.rect(-l,-l,B.width()+l*2,B.height()+l*2),M.fillStrokeShape(B)}});this.add(E),this._proxyDrag(E),E.on("dragstart",M=>{M.cancelBubble=!0}),E.on("dragmove",M=>{M.cancelBubble=!0}),E.on("dragend",M=>{M.cancelBubble=!0}),this.on("dragmove",M=>{this.update()})}_handleMouseDown(E){if(this._transforming)return;this._movingAnchorName=E.target.name().split(" ")[0];const M=this._getNodeRect(),B=M.width,l=M.height,S=Math.sqrt(Math.pow(B,2)+Math.pow(l,2));this.sin=Math.abs(l/S),this.cos=Math.abs(B/S),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const C=E.target.getAbsolutePosition(),D=E.target.getStage().getPointerPosition();this._anchorDragOffset={x:D.x-C.x,y:D.y-C.y},L++,this._fire("transformstart",{evt:E.evt,target:this.getNode()}),this._nodes.forEach(O=>{O._fire("transformstart",{evt:E.evt,target:O})})}_handleMouseMove(E){let M,B,l;const S=this.findOne("."+this._movingAnchorName),C=S.getStage();C.setPointersPositions(E);const D=C.getPointerPosition();let O={x:D.x-this._anchorDragOffset.x,y:D.y-this._anchorDragOffset.y};const j=S.getAbsolutePosition();this.anchorDragBoundFunc()&&(O=this.anchorDragBoundFunc()(j,O,E)),S.setAbsolutePosition(O);const H=S.getAbsolutePosition();if(j.x===H.x&&j.y===H.y)return;if(this._movingAnchorName==="rotater"){const re=this._getNodeRect();M=S.x()-re.width/2,B=-S.y()+re.height/2;let ie=Math.atan2(-B,M)+Math.PI/2;re.height<0&&(ie-=Math.PI);const pe=a.Konva.getAngle(this.rotation())+ie,Ae=a.Konva.getAngle(this.rotationSnapTolerance()),Qe=R(this.rotationSnaps(),pe,Ae)-re.rotation,Se=x(re,Qe);this._fitNodesInto(Se,E);return}const Z=this.shiftBehavior();let Q;Z==="inverted"?Q=this.keepRatio()&&!E.shiftKey:Z==="none"?Q=this.keepRatio():Q=this.keepRatio()||E.shiftKey;var le=this.centeredScaling()||E.altKey;if(this._movingAnchorName==="top-left"){if(Q){var $=le?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};l=Math.sqrt(Math.pow($.x-S.x(),2)+Math.pow($.y-S.y(),2));var Y=this.findOne(".top-left").x()>$.x?-1:1,te=this.findOne(".top-left").y()>$.y?-1:1;M=l*this.cos*Y,B=l*this.sin*te,this.findOne(".top-left").x($.x-M),this.findOne(".top-left").y($.y-B)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(S.y());else if(this._movingAnchorName==="top-right"){if(Q){var $=le?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};l=Math.sqrt(Math.pow(S.x()-$.x,2)+Math.pow($.y-S.y(),2));var Y=this.findOne(".top-right").x()<$.x?-1:1,te=this.findOne(".top-right").y()>$.y?-1:1;M=l*this.cos*Y,B=l*this.sin*te,this.findOne(".top-right").x($.x+M),this.findOne(".top-right").y($.y-B)}var ae=S.position();this.findOne(".top-left").y(ae.y),this.findOne(".bottom-right").x(ae.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(S.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(S.x());else if(this._movingAnchorName==="bottom-left"){if(Q){var $=le?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};l=Math.sqrt(Math.pow($.x-S.x(),2)+Math.pow(S.y()-$.y,2));var Y=$.x<S.x()?-1:1,te=S.y()<$.y?-1:1;M=l*this.cos*Y,B=l*this.sin*te,S.x($.x-M),S.y($.y+B)}ae=S.position(),this.findOne(".top-left").x(ae.x),this.findOne(".bottom-right").y(ae.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(S.y());else if(this._movingAnchorName==="bottom-right"){if(Q){var $=le?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};l=Math.sqrt(Math.pow(S.x()-$.x,2)+Math.pow(S.y()-$.y,2));var Y=this.findOne(".bottom-right").x()<$.x?-1:1,te=this.findOne(".bottom-right").y()<$.y?-1:1;M=l*this.cos*Y,B=l*this.sin*te,this.findOne(".bottom-right").x($.x+M),this.findOne(".bottom-right").y($.y+B)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var le=this.centeredScaling()||E.altKey;if(le){const re=this.findOne(".top-left"),ie=this.findOne(".bottom-right"),he=re.x(),pe=re.y(),Ae=this.getWidth()-ie.x(),Ce=this.getHeight()-ie.y();ie.move({x:-he,y:-pe}),re.move({x:Ae,y:Ce})}const U=this.findOne(".top-left").getAbsolutePosition();M=U.x,B=U.y;const W=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ne=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:M,y:B,width:W,height:ne,rotation:a.Konva.getAngle(this.rotation())},E)}_handleMouseUp(E){this._removeEvents(E)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(E){var M;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const B=this.getNode();L--,this._fire("transformend",{evt:E,target:B}),(M=this.getLayer())===null||M===void 0||M.batchDraw(),B&&this._nodes.forEach(l=>{var S;l._fire("transformend",{evt:E,target:l}),(S=l.getLayer())===null||S===void 0||S.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(E,M){const B=this._getNodeRect(),l=1;if(s.Util._inRange(E.width,-this.padding()*2-l,l)){this.update();return}if(s.Util._inRange(E.height,-this.padding()*2-l,l)){this.update();return}const S=new s.Transform;if(S.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&E.width<0&&this._movingAnchorName.indexOf("left")>=0){const Q=S.point({x:-this.padding()*2,y:0});E.x+=Q.x,E.y+=Q.y,E.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y}else if(this._movingAnchorName&&E.width<0&&this._movingAnchorName.indexOf("right")>=0){const Q=S.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,E.width+=this.padding()*2}if(this._movingAnchorName&&E.height<0&&this._movingAnchorName.indexOf("top")>=0){const Q=S.point({x:0,y:-this.padding()*2});E.x+=Q.x,E.y+=Q.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,E.height+=this.padding()*2}else if(this._movingAnchorName&&E.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const Q=S.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=Q.x,this._anchorDragOffset.y-=Q.y,E.height+=this.padding()*2}if(this.boundBoxFunc()){const Q=this.boundBoxFunc()(B,E);Q?E=Q:s.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const C=1e7,D=new s.Transform;D.translate(B.x,B.y),D.rotate(B.rotation),D.scale(B.width/C,B.height/C);const O=new s.Transform,j=E.width/C,H=E.height/C;this.flipEnabled()===!1?(O.translate(E.x,E.y),O.rotate(E.rotation),O.translate(E.width<0?E.width:0,E.height<0?E.height:0),O.scale(Math.abs(j),Math.abs(H))):(O.translate(E.x,E.y),O.rotate(E.rotation),O.scale(j,H));const Z=O.multiply(D.invert());this._nodes.forEach(Q=>{var $;const Y=Q.getParent().getAbsoluteTransform(),te=Q.getTransform().copy();te.translate(Q.offsetX(),Q.offsetY());const ae=new s.Transform;ae.multiply(Y.copy().invert()).multiply(Z).multiply(Y).multiply(te);const le=ae.decompose();Q.setAttrs(le),($=Q.getLayer())===null||$===void 0||$.batchDraw()}),this.rotation(s.Util._getRotation(E.rotation)),this._nodes.forEach(Q=>{this._fire("transform",{evt:M,target:Q}),Q._fire("transform",{evt:M,target:Q})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(E,M){this.findOne(E).setAttrs(M)}update(){var E;const M=this._getNodeRect();this.rotation(s.Util._getRotation(M.rotation));const B=M.width,l=M.height,S=this.enabledAnchors(),C=this.resizeEnabled(),D=this.padding(),O=this.anchorSize(),j=this.find("._anchor");j.forEach(Z=>{Z.setAttrs({width:O,height:O,offsetX:O/2,offsetY:O/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:O/2+D,offsetY:O/2+D,visible:C&&S.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:B/2,y:0,offsetY:O/2+D,visible:C&&S.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:B,y:0,offsetX:O/2-D,offsetY:O/2+D,visible:C&&S.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:l/2,offsetX:O/2+D,visible:C&&S.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:B,y:l/2,offsetX:O/2-D,visible:C&&S.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:l,offsetX:O/2+D,offsetY:O/2-D,visible:C&&S.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:B/2,y:l,offsetY:O/2-D,visible:C&&S.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:B,y:l,offsetX:O/2-D,offsetY:O/2-D,visible:C&&S.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:B/2,y:-this.rotateAnchorOffset()*s.Util._sign(l)-D,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:B,height:l,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const H=this.anchorStyleFunc();H&&j.forEach(Z=>{H(Z)}),(E=this.getLayer())===null||E===void 0||E.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const E=this.findOne("."+this._movingAnchorName);E&&E.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),m.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return T.Node.prototype.toObject.call(this)}clone(E){return T.Node.prototype.clone.call(this,E)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};$r.Transformer=G,G.isTransforming=()=>L>0;function I(z){return z instanceof Array||s.Util.warn("enabledAnchors value should be an array"),z instanceof Array&&z.forEach(function(E){k.indexOf(E)===-1&&s.Util.warn("Unknown anchor name: "+E+". Available names are: "+k.join(", "))}),z||[]}return G.prototype.className="Transformer",(0,g._registerNode)(G),u.Factory.addGetterSetter(G,"enabledAnchors",k,I),u.Factory.addGetterSetter(G,"flipEnabled",!0,(0,f.getBooleanValidator)()),u.Factory.addGetterSetter(G,"resizeEnabled",!0),u.Factory.addGetterSetter(G,"anchorSize",10,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(G,"rotateEnabled",!0),u.Factory.addGetterSetter(G,"rotateLineVisible",!0),u.Factory.addGetterSetter(G,"rotationSnaps",[]),u.Factory.addGetterSetter(G,"rotateAnchorOffset",50,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(G,"rotateAnchorCursor","crosshair"),u.Factory.addGetterSetter(G,"rotationSnapTolerance",5,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(G,"borderEnabled",!0),u.Factory.addGetterSetter(G,"anchorStroke","rgb(0, 161, 255)"),u.Factory.addGetterSetter(G,"anchorStrokeWidth",1,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(G,"anchorFill","white"),u.Factory.addGetterSetter(G,"anchorCornerRadius",0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(G,"borderStroke","rgb(0, 161, 255)"),u.Factory.addGetterSetter(G,"borderStrokeWidth",1,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(G,"borderDash"),u.Factory.addGetterSetter(G,"keepRatio",!0),u.Factory.addGetterSetter(G,"shiftBehavior","default"),u.Factory.addGetterSetter(G,"centeredScaling",!1),u.Factory.addGetterSetter(G,"ignoreStroke",!1),u.Factory.addGetterSetter(G,"padding",0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(G,"nodes"),u.Factory.addGetterSetter(G,"node"),u.Factory.addGetterSetter(G,"boundBoxFunc"),u.Factory.addGetterSetter(G,"anchorDragBoundFunc"),u.Factory.addGetterSetter(G,"anchorStyleFunc"),u.Factory.addGetterSetter(G,"shouldOverdrawWholeArea",!1),u.Factory.addGetterSetter(G,"useSingleNodeRotation",!0),u.Factory.backCompat(G,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),$r}var ei={},Qu;function l0(){if(Qu)return ei;Qu=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.Wedge=void 0;const s=be(),u=ht(),T=Re(),N=Ne(),b=Re();let m=class extends u.Shape{_sceneFunc(f){f.beginPath(),f.arc(0,0,this.radius(),0,T.Konva.getAngle(this.angle()),this.clockwise()),f.lineTo(0,0),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(f){this.radius(f/2)}setHeight(f){this.radius(f/2)}};return ei.Wedge=m,m.prototype.className="Wedge",m.prototype._centroid=!0,m.prototype._attrsAffectingSize=["radius"],(0,b._registerNode)(m),s.Factory.addGetterSetter(m,"radius",0,(0,N.getNumberValidator)()),s.Factory.addGetterSetter(m,"angle",0,(0,N.getNumberValidator)()),s.Factory.addGetterSetter(m,"clockwise",!1),s.Factory.backCompat(m,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),ei}var ti={},Zu;function u0(){if(Zu)return ti;Zu=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.Blur=void 0;const s=be(),u=et(),T=Ne();function N(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const b=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],m=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(g,y){const _=g.data,P=g.width,w=g.height;let p,d,v,k,A,c,o,x,R,L,G,I,z,E,M,B,l,S,C,D,O,j,H,Z;const Q=y+y+1,$=P-1,Y=w-1,te=y+1,ae=te*(te+1)/2,le=new N,U=b[y],W=m[y];let ne=null,re=le,ie=null,he=null;for(v=1;v<Q;v++)re=re.next=new N,v===te&&(ne=re);for(re.next=le,o=c=0,d=0;d<w;d++){for(B=l=S=C=x=R=L=G=0,I=te*(D=_[c]),z=te*(O=_[c+1]),E=te*(j=_[c+2]),M=te*(H=_[c+3]),x+=ae*D,R+=ae*O,L+=ae*j,G+=ae*H,re=le,v=0;v<te;v++)re.r=D,re.g=O,re.b=j,re.a=H,re=re.next;for(v=1;v<te;v++)k=c+(($<v?$:v)<<2),x+=(re.r=D=_[k])*(Z=te-v),R+=(re.g=O=_[k+1])*Z,L+=(re.b=j=_[k+2])*Z,G+=(re.a=H=_[k+3])*Z,B+=D,l+=O,S+=j,C+=H,re=re.next;for(ie=le,he=ne,p=0;p<P;p++)_[c+3]=H=G*U>>W,H!==0?(H=255/H,_[c]=(x*U>>W)*H,_[c+1]=(R*U>>W)*H,_[c+2]=(L*U>>W)*H):_[c]=_[c+1]=_[c+2]=0,x-=I,R-=z,L-=E,G-=M,I-=ie.r,z-=ie.g,E-=ie.b,M-=ie.a,k=o+((k=p+y+1)<$?k:$)<<2,B+=ie.r=_[k],l+=ie.g=_[k+1],S+=ie.b=_[k+2],C+=ie.a=_[k+3],x+=B,R+=l,L+=S,G+=C,ie=ie.next,I+=D=he.r,z+=O=he.g,E+=j=he.b,M+=H=he.a,B-=D,l-=O,S-=j,C-=H,he=he.next,c+=4;o+=P}for(p=0;p<P;p++){for(l=S=C=B=R=L=G=x=0,c=p<<2,I=te*(D=_[c]),z=te*(O=_[c+1]),E=te*(j=_[c+2]),M=te*(H=_[c+3]),x+=ae*D,R+=ae*O,L+=ae*j,G+=ae*H,re=le,v=0;v<te;v++)re.r=D,re.g=O,re.b=j,re.a=H,re=re.next;for(A=P,v=1;v<=y;v++)c=A+p<<2,x+=(re.r=D=_[c])*(Z=te-v),R+=(re.g=O=_[c+1])*Z,L+=(re.b=j=_[c+2])*Z,G+=(re.a=H=_[c+3])*Z,B+=D,l+=O,S+=j,C+=H,re=re.next,v<Y&&(A+=P);for(c=p,ie=le,he=ne,d=0;d<w;d++)k=c<<2,_[k+3]=H=G*U>>W,H>0?(H=255/H,_[k]=(x*U>>W)*H,_[k+1]=(R*U>>W)*H,_[k+2]=(L*U>>W)*H):_[k]=_[k+1]=_[k+2]=0,x-=I,R-=z,L-=E,G-=M,I-=ie.r,z-=ie.g,E-=ie.b,M-=ie.a,k=p+((k=d+te)<Y?k:Y)*P<<2,x+=B+=ie.r=_[k],R+=l+=ie.g=_[k+1],L+=S+=ie.b=_[k+2],G+=C+=ie.a=_[k+3],ie=ie.next,I+=D=he.r,z+=O=he.g,E+=j=he.b,M+=H=he.a,B-=D,l-=O,S-=j,C-=H,he=he.next,c+=P}}const f=function(y){const _=Math.round(this.blurRadius());_>0&&a(y,_)};return ti.Blur=f,s.Factory.addGetterSetter(u.Node,"blurRadius",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),ti}var ni={},Ju;function c0(){if(Ju)return ni;Ju=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.Brighten=void 0;const s=be(),u=et(),T=Ne(),N=function(b){const m=this.brightness()*255,a=b.data,f=a.length;for(let g=0;g<f;g+=4)a[g]+=m,a[g+1]+=m,a[g+2]+=m};return ni.Brighten=N,s.Factory.addGetterSetter(u.Node,"brightness",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),ni}var ri={},$u;function h0(){if($u)return ri;$u=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Contrast=void 0;const s=be(),u=et(),T=Ne(),N=function(b){const m=Math.pow((this.contrast()+100)/100,2),a=b.data,f=a.length;let g=150,y=150,_=150;for(let P=0;P<f;P+=4)g=a[P],y=a[P+1],_=a[P+2],g/=255,g-=.5,g*=m,g+=.5,g*=255,y/=255,y-=.5,y*=m,y+=.5,y*=255,_/=255,_-=.5,_*=m,_+=.5,_*=255,g=g<0?0:g>255?255:g,y=y<0?0:y>255?255:y,_=_<0?0:_>255?255:_,a[P]=g,a[P+1]=y,a[P+2]=_};return ri.Contrast=N,s.Factory.addGetterSetter(u.Node,"contrast",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),ri}var ii={},ec;function d0(){if(ec)return ii;ec=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Emboss=void 0;const s=be(),u=et(),T=Je(),N=Ne(),b=function(m){const a=this.embossStrength()*10,f=this.embossWhiteLevel()*255,g=this.embossDirection(),y=this.embossBlend(),_=m.data,P=m.width,w=m.height,p=P*4;let d=0,v=0,k=w;switch(g){case"top-left":d=-1,v=-1;break;case"top":d=-1,v=0;break;case"top-right":d=-1,v=1;break;case"right":d=0,v=1;break;case"bottom-right":d=1,v=1;break;case"bottom":d=1,v=0;break;case"bottom-left":d=1,v=-1;break;case"left":d=0,v=-1;break;default:T.Util.error("Unknown emboss direction: "+g)}do{const A=(k-1)*p;let c=d;k+c<1&&(c=0),k+c>w&&(c=0);const o=(k-1+c)*P*4;let x=P;do{const R=A+(x-1)*4;let L=v;x+L<1&&(L=0),x+L>P&&(L=0);const G=o+(x-1+L)*4,I=_[R]-_[G],z=_[R+1]-_[G+1],E=_[R+2]-_[G+2];let M=I;const B=M>0?M:-M,l=z>0?z:-z,S=E>0?E:-E;if(l>B&&(M=z),S>B&&(M=E),M*=a,y){const C=_[R]+M,D=_[R+1]+M,O=_[R+2]+M;_[R]=C>255?255:C<0?0:C,_[R+1]=D>255?255:D<0?0:D,_[R+2]=O>255?255:O<0?0:O}else{let C=f-M;C<0?C=0:C>255&&(C=255),_[R]=_[R+1]=_[R+2]=C}}while(--x)}while(--k)};return ii.Emboss=b,s.Factory.addGetterSetter(u.Node,"embossStrength",.5,(0,N.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(u.Node,"embossWhiteLevel",.5,(0,N.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(u.Node,"embossDirection","top-left",void 0,s.Factory.afterSetFilter),s.Factory.addGetterSetter(u.Node,"embossBlend",!1,void 0,s.Factory.afterSetFilter),ii}var si={},tc;function f0(){if(tc)return si;tc=1,Object.defineProperty(si,"__esModule",{value:!0}),si.Enhance=void 0;const s=be(),u=et(),T=Ne();function N(m,a,f,g,y){const _=f-a,P=y-g;if(_===0)return g+P/2;if(P===0)return g;let w=(m-a)/_;return w=P*w+g,w}const b=function(m){const a=m.data,f=a.length;let g=a[0],y=g,_,P=a[1],w=P,p,d=a[2],v=d,k;const A=this.enhance();if(A===0)return;for(let M=0;M<f;M+=4)_=a[M+0],_<g?g=_:_>y&&(y=_),p=a[M+1],p<P?P=p:p>w&&(w=p),k=a[M+2],k<d?d=k:k>v&&(v=k);y===g&&(y=255,g=0),w===P&&(w=255,P=0),v===d&&(v=255,d=0);let c,o,x,R,L,G,I,z,E;A>0?(o=y+A*(255-y),x=g-A*(g-0),L=w+A*(255-w),G=P-A*(P-0),z=v+A*(255-v),E=d-A*(d-0)):(c=(y+g)*.5,o=y+A*(y-c),x=g+A*(g-c),R=(w+P)*.5,L=w+A*(w-R),G=P+A*(P-R),I=(v+d)*.5,z=v+A*(v-I),E=d+A*(d-I));for(let M=0;M<f;M+=4)a[M+0]=N(a[M+0],g,y,x,o),a[M+1]=N(a[M+1],P,w,G,L),a[M+2]=N(a[M+2],d,v,E,z)};return si.Enhance=b,s.Factory.addGetterSetter(u.Node,"enhance",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),si}var ai={},nc;function g0(){if(nc)return ai;nc=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.Grayscale=void 0;const s=function(u){const T=u.data,N=T.length;for(let b=0;b<N;b+=4){const m=.34*T[b]+.5*T[b+1]+.16*T[b+2];T[b]=m,T[b+1]=m,T[b+2]=m}};return ai.Grayscale=s,ai}var oi={},rc;function p0(){if(rc)return oi;rc=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.HSL=void 0;const s=be(),u=et(),T=Ne();s.Factory.addGetterSetter(u.Node,"hue",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(u.Node,"saturation",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(u.Node,"luminance",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter);const N=function(b){const m=b.data,a=m.length,f=1,g=Math.pow(2,this.saturation()),y=Math.abs(this.hue()+360)%360,_=this.luminance()*127,P=f*g*Math.cos(y*Math.PI/180),w=f*g*Math.sin(y*Math.PI/180),p=.299*f+.701*P+.167*w,d=.587*f-.587*P+.33*w,v=.114*f-.114*P-.497*w,k=.299*f-.299*P-.328*w,A=.587*f+.413*P+.035*w,c=.114*f-.114*P+.293*w,o=.299*f-.3*P+1.25*w,x=.587*f-.586*P-1.05*w,R=.114*f+.886*P-.2*w;let L,G,I,z;for(let E=0;E<a;E+=4)L=m[E+0],G=m[E+1],I=m[E+2],z=m[E+3],m[E+0]=p*L+d*G+v*I+_,m[E+1]=k*L+A*G+c*I+_,m[E+2]=o*L+x*G+R*I+_,m[E+3]=z};return oi.HSL=N,oi}var li={},ic;function m0(){if(ic)return li;ic=1,Object.defineProperty(li,"__esModule",{value:!0}),li.HSV=void 0;const s=be(),u=et(),T=Ne(),N=function(b){const m=b.data,a=m.length,f=Math.pow(2,this.value()),g=Math.pow(2,this.saturation()),y=Math.abs(this.hue()+360)%360,_=f*g*Math.cos(y*Math.PI/180),P=f*g*Math.sin(y*Math.PI/180),w=.299*f+.701*_+.167*P,p=.587*f-.587*_+.33*P,d=.114*f-.114*_-.497*P,v=.299*f-.299*_-.328*P,k=.587*f+.413*_+.035*P,A=.114*f-.114*_+.293*P,c=.299*f-.3*_+1.25*P,o=.587*f-.586*_-1.05*P,x=.114*f+.886*_-.2*P;let R,L,G,I;for(let z=0;z<a;z+=4)R=m[z+0],L=m[z+1],G=m[z+2],I=m[z+3],m[z+0]=w*R+p*L+d*G,m[z+1]=v*R+k*L+A*G,m[z+2]=c*R+o*L+x*G,m[z+3]=I};return li.HSV=N,s.Factory.addGetterSetter(u.Node,"hue",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(u.Node,"saturation",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(u.Node,"value",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),li}var ui={},sc;function v0(){if(sc)return ui;sc=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.Invert=void 0;const s=function(u){const T=u.data,N=T.length;for(let b=0;b<N;b+=4)T[b]=255-T[b],T[b+1]=255-T[b+1],T[b+2]=255-T[b+2]};return ui.Invert=s,ui}var ci={},ac;function y0(){if(ac)return ci;ac=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Kaleidoscope=void 0;const s=be(),u=et(),T=Je(),N=Ne(),b=function(f,g,y){const _=f.data,P=g.data,w=f.width,p=f.height,d=y.polarCenterX||w/2,v=y.polarCenterY||p/2;let k=Math.sqrt(d*d+v*v),A=w-d,c=p-v;const o=Math.sqrt(A*A+c*c);k=o>k?o:k;const x=p,R=w,L=360/R*Math.PI/180;for(let G=0;G<R;G+=1){const I=Math.sin(G*L),z=Math.cos(G*L);for(let E=0;E<x;E+=1){A=Math.floor(d+k*E/x*z),c=Math.floor(v+k*E/x*I);let M=(c*w+A)*4;const B=_[M+0],l=_[M+1],S=_[M+2],C=_[M+3];M=(G+E*w)*4,P[M+0]=B,P[M+1]=l,P[M+2]=S,P[M+3]=C}}},m=function(f,g,y){const _=f.data,P=g.data,w=f.width,p=f.height,d=y.polarCenterX||w/2,v=y.polarCenterY||p/2;let k=Math.sqrt(d*d+v*v),A=w-d,c=p-v;const o=Math.sqrt(A*A+c*c);k=o>k?o:k;const x=p,R=w,L=0;let G,I;for(A=0;A<w;A+=1)for(c=0;c<p;c+=1){const z=A-d,E=c-v,M=Math.sqrt(z*z+E*E)*x/k;let B=(Math.atan2(E,z)*180/Math.PI+360+L)%360;B=B*R/360,G=Math.floor(B),I=Math.floor(M);let l=(I*w+G)*4;const S=_[l+0],C=_[l+1],D=_[l+2],O=_[l+3];l=(c*w+A)*4,P[l+0]=S,P[l+1]=C,P[l+2]=D,P[l+3]=O}},a=function(f){const g=f.width,y=f.height;let _,P,w,p,d,v,k,A,c,o,x=Math.round(this.kaleidoscopePower());const R=Math.round(this.kaleidoscopeAngle()),L=Math.floor(g*(R%360)/360);if(x<1)return;const G=T.Util.createCanvasElement();G.width=g,G.height=y;const I=G.getContext("2d").getImageData(0,0,g,y);T.Util.releaseCanvas(G),b(f,I,{polarCenterX:g/2,polarCenterY:y/2});let z=g/Math.pow(2,x);for(;z<=8;)z=z*2,x-=1;z=Math.ceil(z);let E=z,M=0,B=E,l=1;for(L+z>g&&(M=E,B=0,l=-1),P=0;P<y;P+=1)for(_=M;_!==B;_+=l)w=Math.round(_+L)%g,c=(g*P+w)*4,d=I.data[c+0],v=I.data[c+1],k=I.data[c+2],A=I.data[c+3],o=(g*P+_)*4,I.data[o+0]=d,I.data[o+1]=v,I.data[o+2]=k,I.data[o+3]=A;for(P=0;P<y;P+=1)for(E=Math.floor(z),p=0;p<x;p+=1){for(_=0;_<E+1;_+=1)c=(g*P+_)*4,d=I.data[c+0],v=I.data[c+1],k=I.data[c+2],A=I.data[c+3],o=(g*P+E*2-_-1)*4,I.data[o+0]=d,I.data[o+1]=v,I.data[o+2]=k,I.data[o+3]=A;E*=2}m(I,f,{polarRotation:0})};return ci.Kaleidoscope=a,s.Factory.addGetterSetter(u.Node,"kaleidoscopePower",2,(0,N.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(u.Node,"kaleidoscopeAngle",0,(0,N.getNumberValidator)(),s.Factory.afterSetFilter),ci}var hi={},oc;function _0(){if(oc)return hi;oc=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Mask=void 0;const s=be(),u=et(),T=Ne();function N(w,p,d){let v=(d*w.width+p)*4;const k=[];return k.push(w.data[v++],w.data[v++],w.data[v++],w.data[v++]),k}function b(w,p){return Math.sqrt(Math.pow(w[0]-p[0],2)+Math.pow(w[1]-p[1],2)+Math.pow(w[2]-p[2],2))}function m(w){const p=[0,0,0];for(let d=0;d<w.length;d++)p[0]+=w[d][0],p[1]+=w[d][1],p[2]+=w[d][2];return p[0]/=w.length,p[1]/=w.length,p[2]/=w.length,p}function a(w,p){const d=N(w,0,0),v=N(w,w.width-1,0),k=N(w,0,w.height-1),A=N(w,w.width-1,w.height-1),c=p||10;if(b(d,v)<c&&b(v,A)<c&&b(A,k)<c&&b(k,d)<c){const o=m([v,d,A,k]),x=[];for(let R=0;R<w.width*w.height;R++){const L=b(o,[w.data[R*4],w.data[R*4+1],w.data[R*4+2]]);x[R]=L<c?0:255}return x}}function f(w,p){for(let d=0;d<w.width*w.height;d++)w.data[4*d+3]=p[d]}function g(w,p,d){const v=[1,1,1,1,0,1,1,1,1],k=Math.round(Math.sqrt(v.length)),A=Math.floor(k/2),c=[];for(let o=0;o<d;o++)for(let x=0;x<p;x++){const R=o*p+x;let L=0;for(let G=0;G<k;G++)for(let I=0;I<k;I++){const z=o+G-A,E=x+I-A;if(z>=0&&z<d&&E>=0&&E<p){const M=z*p+E,B=v[G*k+I];L+=w[M]*B}}c[R]=L===255*8?255:0}return c}function y(w,p,d){const v=[1,1,1,1,1,1,1,1,1],k=Math.round(Math.sqrt(v.length)),A=Math.floor(k/2),c=[];for(let o=0;o<d;o++)for(let x=0;x<p;x++){const R=o*p+x;let L=0;for(let G=0;G<k;G++)for(let I=0;I<k;I++){const z=o+G-A,E=x+I-A;if(z>=0&&z<d&&E>=0&&E<p){const M=z*p+E,B=v[G*k+I];L+=w[M]*B}}c[R]=L>=255*4?255:0}return c}function _(w,p,d){const v=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],k=Math.round(Math.sqrt(v.length)),A=Math.floor(k/2),c=[];for(let o=0;o<d;o++)for(let x=0;x<p;x++){const R=o*p+x;let L=0;for(let G=0;G<k;G++)for(let I=0;I<k;I++){const z=o+G-A,E=x+I-A;if(z>=0&&z<d&&E>=0&&E<p){const M=z*p+E,B=v[G*k+I];L+=w[M]*B}}c[R]=L}return c}const P=function(w){const p=this.threshold();let d=a(w,p);return d&&(d=g(d,w.width,w.height),d=y(d,w.width,w.height),d=_(d,w.width,w.height),f(w,d)),w};return hi.Mask=P,s.Factory.addGetterSetter(u.Node,"threshold",0,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),hi}var di={},lc;function S0(){if(lc)return di;lc=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Noise=void 0;const s=be(),u=et(),T=Ne(),N=function(b){const m=this.noise()*255,a=b.data,f=a.length,g=m/2;for(let y=0;y<f;y+=4)a[y+0]+=g-2*g*Math.random(),a[y+1]+=g-2*g*Math.random(),a[y+2]+=g-2*g*Math.random()};return di.Noise=N,s.Factory.addGetterSetter(u.Node,"noise",.2,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),di}var fi={},uc;function C0(){if(uc)return fi;uc=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Pixelate=void 0;const s=be(),u=Je(),T=et(),N=Ne(),b=function(m){let a=Math.ceil(this.pixelSize()),f=m.width,g=m.height,y,_,P,w,p,d,v,k=Math.ceil(f/a),A=Math.ceil(g/a),c,o,x,R,L,G,I,z=m.data;if(a<=0){u.Util.error("pixelSize value can not be <= 0");return}for(L=0;L<k;L+=1)for(G=0;G<A;G+=1){for(w=0,p=0,d=0,v=0,c=L*a,o=c+a,x=G*a,R=x+a,I=0,y=c;y<o;y+=1)if(!(y>=f))for(_=x;_<R;_+=1)_>=g||(P=(f*_+y)*4,w+=z[P+0],p+=z[P+1],d+=z[P+2],v+=z[P+3],I+=1);for(w=w/I,p=p/I,d=d/I,v=v/I,y=c;y<o;y+=1)if(!(y>=f))for(_=x;_<R;_+=1)_>=g||(P=(f*_+y)*4,z[P+0]=w,z[P+1]=p,z[P+2]=d,z[P+3]=v)}};return fi.Pixelate=b,s.Factory.addGetterSetter(T.Node,"pixelSize",8,(0,N.getNumberValidator)(),s.Factory.afterSetFilter),fi}var gi={},cc;function x0(){if(cc)return gi;cc=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Posterize=void 0;const s=be(),u=et(),T=Ne(),N=function(b){const m=Math.round(this.levels()*254)+1,a=b.data,f=a.length,g=255/m;for(let y=0;y<f;y+=1)a[y]=Math.floor(a[y]/g)*g};return gi.Posterize=N,s.Factory.addGetterSetter(u.Node,"levels",.5,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),gi}var pi={},hc;function w0(){if(hc)return pi;hc=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.RGB=void 0;const s=be(),u=et(),T=Ne(),N=function(b){const m=b.data,a=m.length,f=this.red(),g=this.green(),y=this.blue();for(let _=0;_<a;_+=4){const P=(.34*m[_]+.5*m[_+1]+.16*m[_+2])/255;m[_]=P*f,m[_+1]=P*g,m[_+2]=P*y,m[_+3]=m[_+3]}};return pi.RGB=N,s.Factory.addGetterSetter(u.Node,"red",0,function(b){return this._filterUpToDate=!1,b>255?255:b<0?0:Math.round(b)}),s.Factory.addGetterSetter(u.Node,"green",0,function(b){return this._filterUpToDate=!1,b>255?255:b<0?0:Math.round(b)}),s.Factory.addGetterSetter(u.Node,"blue",0,T.RGBComponent,s.Factory.afterSetFilter),pi}var mi={},dc;function P0(){if(dc)return mi;dc=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.RGBA=void 0;const s=be(),u=et(),T=Ne(),N=function(b){const m=b.data,a=m.length,f=this.red(),g=this.green(),y=this.blue(),_=this.alpha();for(let P=0;P<a;P+=4){const w=1-_;m[P]=f*_+m[P]*w,m[P+1]=g*_+m[P+1]*w,m[P+2]=y*_+m[P+2]*w}};return mi.RGBA=N,s.Factory.addGetterSetter(u.Node,"red",0,function(b){return this._filterUpToDate=!1,b>255?255:b<0?0:Math.round(b)}),s.Factory.addGetterSetter(u.Node,"green",0,function(b){return this._filterUpToDate=!1,b>255?255:b<0?0:Math.round(b)}),s.Factory.addGetterSetter(u.Node,"blue",0,T.RGBComponent,s.Factory.afterSetFilter),s.Factory.addGetterSetter(u.Node,"alpha",1,function(b){return this._filterUpToDate=!1,b>1?1:b<0?0:b}),mi}var vi={},fc;function k0(){if(fc)return vi;fc=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Sepia=void 0;const s=function(u){const T=u.data,N=T.length;for(let b=0;b<N;b+=4){const m=T[b+0],a=T[b+1],f=T[b+2];T[b+0]=Math.min(255,m*.393+a*.769+f*.189),T[b+1]=Math.min(255,m*.349+a*.686+f*.168),T[b+2]=Math.min(255,m*.272+a*.534+f*.131)}};return vi.Sepia=s,vi}var yi={},gc;function E0(){if(gc)return yi;gc=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Solarize=void 0;const s=function(u){const T=u.data,N=u.width,b=u.height,m=N*4;let a=b;do{const f=(a-1)*m;let g=N;do{const y=f+(g-1)*4;let _=T[y],P=T[y+1],w=T[y+2];_>127&&(_=255-_),P>127&&(P=255-P),w>127&&(w=255-w),T[y]=_,T[y+1]=P,T[y+2]=w}while(--g)}while(--a)};return yi.Solarize=s,yi}var _i={},pc;function R0(){if(pc)return _i;pc=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Threshold=void 0;const s=be(),u=et(),T=Ne(),N=function(b){const m=this.threshold()*255,a=b.data,f=a.length;for(let g=0;g<f;g+=1)a[g]=a[g]<m?0:255};return _i.Threshold=N,s.Factory.addGetterSetter(u.Node,"threshold",.5,(0,T.getNumberValidator)(),s.Factory.afterSetFilter),_i}var mc;function T0(){if(mc)return Mr;mc=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.Konva=void 0;const s=uo(),u=Xd(),T=Zd(),N=Jd(),b=$d(),m=e0(),a=t0(),f=Uc(),g=mo(),y=Vc(),_=n0(),P=r0(),w=i0(),p=s0(),d=Hc(),v=a0(),k=o0(),A=l0(),c=u0(),o=c0(),x=h0(),R=d0(),L=f0(),G=g0(),I=p0(),z=m0(),E=v0(),M=y0(),B=_0(),l=S0(),S=C0(),C=x0(),D=w0(),O=P0(),j=k0(),H=E0(),Z=R0();return Mr.Konva=s.Konva.Util._assign(s.Konva,{Arc:u.Arc,Arrow:T.Arrow,Circle:N.Circle,Ellipse:b.Ellipse,Image:m.Image,Label:a.Label,Tag:a.Tag,Line:f.Line,Path:g.Path,Rect:y.Rect,RegularPolygon:_.RegularPolygon,Ring:P.Ring,Sprite:w.Sprite,Star:p.Star,Text:d.Text,TextPath:v.TextPath,Transformer:k.Transformer,Wedge:A.Wedge,Filters:{Blur:c.Blur,Brighten:o.Brighten,Contrast:x.Contrast,Emboss:R.Emboss,Enhance:L.Enhance,Grayscale:G.Grayscale,HSL:I.HSL,HSV:z.HSV,Invert:E.Invert,Kaleidoscope:M.Kaleidoscope,Mask:B.Mask,Noise:l.Noise,Pixelate:S.Pixelate,Posterize:C.Posterize,RGB:D.RGB,RGBA:O.RGBA,Sepia:j.Sepia,Solarize:H.Solarize,Threshold:Z.Threshold}}),Mr}var b0=ws.exports,vc;function N0(){if(vc)return ws.exports;vc=1,Object.defineProperty(b0,"__esModule",{value:!0});const s=T0();return ws.exports=s.Konva,ws.exports}N0();var Ss={exports:{}},yc;function A0(){return yc||(yc=1,function(s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.Konva=void 0;var T=uo();Object.defineProperty(u,"Konva",{enumerable:!0,get:function(){return T.Konva}});const N=uo();s.exports=N.Konva}(Ss,Ss.exports)),Ss.exports}var F0=A0();const Ci=ho(F0);var no={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ro,_c;function M0(){return _c||(_c=1,ro=function(u){var T={},N=Lc(),b=Ic(),m=Object.assign;function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),y=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),d=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),o=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),R=Symbol.iterator;function L(e){return e===null||typeof e!="object"?null:(e=R&&e[R]||e["@@iterator"],typeof e=="function"?e:null)}function G(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case y:return"Portal";case w:return"Profiler";case P:return"StrictMode";case k:return"Suspense";case A:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case d:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case v:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case c:return t=e.displayName||null,t!==null?t:G(e.type)||"Memo";case o:t=e._payload,e=e._init;try{return G(e(t))}catch{}}return null}function I(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function z(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function E(e){if(z(e)!==e)throw Error(a(188))}function M(e){var t=e.alternate;if(!t){if(t=z(e),t===null)throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var h=i.alternate;if(h===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===h.child){for(h=i.child;h;){if(h===n)return E(i),e;if(h===r)return E(i),t;h=h.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=h;else{for(var F=!1,V=i.child;V;){if(V===n){F=!0,n=i,r=h;break}if(V===r){F=!0,r=i,n=h;break}V=V.sibling}if(!F){for(V=h.child;V;){if(V===n){F=!0,n=h,r=i;break}if(V===r){F=!0,r=h,n=i;break}V=V.sibling}if(!F)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?e:t}function B(e){return e=M(e),e!==null?l(e):null}function l(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=l(e);if(t!==null)return t;e=e.sibling}return null}function S(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var t=S(e);if(t!==null)return t}e=e.sibling}return null}var C=Array.isArray,D=u.getPublicInstance,O=u.getRootHostContext,j=u.getChildHostContext,H=u.prepareForCommit,Z=u.resetAfterCommit,Q=u.createInstance,$=u.appendInitialChild,Y=u.finalizeInitialChildren,te=u.prepareUpdate,ae=u.shouldSetTextContent,le=u.createTextInstance,U=u.scheduleTimeout,W=u.cancelTimeout,ne=u.noTimeout,re=u.isPrimaryRenderer,ie=u.supportsMutation,he=u.supportsPersistence,pe=u.supportsHydration,Ae=u.getInstanceFromNode,Ce=u.preparePortalMount,Qe=u.getCurrentEventPriority,Se=u.detachDeletedInstance,Ge=u.supportsMicrotasks,bt=u.scheduleMicrotask,Ke=u.supportsTestSelectors,Ft=u.findFiberRoot,Oe=u.getBoundingRect,nt=u.getTextContent,ee=u.isHiddenSubtree,oe=u.matchAccessibilityRole,de=u.setFocusIfFocusable,Pe=u.setupIntersectionObserver,Ee=u.appendChild,me=u.appendChildToContainer,Fe=u.commitTextUpdate,Be=u.commitMount,Me=u.commitUpdate,Ve=u.insertBefore,rt=u.insertInContainerBefore,bn=u.removeChild,cr=u.removeChildFromContainer,Hn=u.resetTextContent,bs=u.hideInstance,hr=u.hideTextInstance,dr=u.unhideInstance,Ns=u.unhideTextInstance,Ze=u.clearContainer,it=u.cloneInstance,jn=u.createContainerChildSet,Nn=u.appendChildToContainerChildSet,Vt=u.finalizeContainerChildren,As=u.replaceContainerChildren,_o=u.cloneHiddenInstance,So=u.cloneHiddenTextInstance,Qc=u.canHydrateInstance,Zc=u.canHydrateTextInstance,Jc=u.canHydrateSuspenseInstance,Co=u.isSuspenseInstancePending,Fs=u.isSuspenseInstanceFallback,$c=u.getSuspenseInstanceFallbackErrorDetails,eh=u.registerSuspenseInstanceRetry,xi=u.getNextHydratableSibling,th=u.getFirstHydratableChild,nh=u.getFirstHydratableChildWithinContainer,rh=u.getFirstHydratableChildWithinSuspenseInstance,ih=u.hydrateInstance,sh=u.hydrateTextInstance,ah=u.hydrateSuspenseInstance,oh=u.getNextHydratableInstanceAfterSuspenseInstance,lh=u.commitHydratedContainer,uh=u.commitHydratedSuspenseInstance,ch=u.clearSuspenseBoundary,hh=u.clearSuspenseBoundaryFromContainer,dh=u.shouldDeleteUnhydratedTailInstances,fh=u.didNotMatchHydratedContainerTextInstance,gh=u.didNotMatchHydratedTextInstance,Ms;function fr(e){if(Ms===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ms=t&&t[1]||""}return`
`+Ms+e}var Ls=!1;function Is(e,t){if(!e||Ls)return"";Ls=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(se){var r=se}Reflect.construct(e,[],t)}else{try{t.call()}catch(se){r=se}e.call(t.prototype)}else{try{throw Error()}catch(se){r=se}e()}}catch(se){if(se&&r&&typeof se.stack=="string"){for(var i=se.stack.split(`
`),h=r.stack.split(`
`),F=i.length-1,V=h.length-1;1<=F&&0<=V&&i[F]!==h[V];)V--;for(;1<=F&&0<=V;F--,V--)if(i[F]!==h[V]){if(F!==1||V!==1)do if(F--,V--,0>V||i[F]!==h[V]){var X=`
`+i[F].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=F&&0<=V);break}}}finally{Ls=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?fr(e):""}var ph=Object.prototype.hasOwnProperty,Ds=[],qn=-1;function fn(e){return{current:e}}function He(e){0>qn||(e.current=Ds[qn],Ds[qn]=null,qn--)}function Ue(e,t){qn++,Ds[qn]=e.current,e.current=t}var gn={},gt=fn(gn),Ct=fn(!1),An=gn;function Wn(e,t){var n=e.type.contextTypes;if(!n)return gn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},h;for(h in n)i[h]=t[h];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function xt(e){return e=e.childContextTypes,e!=null}function wi(){He(Ct),He(gt)}function xo(e,t,n){if(gt.current!==gn)throw Error(a(168));Ue(gt,t),Ue(Ct,n)}function wo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(a(108,I(e)||"Unknown",i));return m({},n,r)}function Pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gn,An=gt.current,Ue(gt,e),Ue(Ct,Ct.current),!0}function Po(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=wo(e,t,An),r.__reactInternalMemoizedMergedChildContext=e,He(Ct),He(gt),Ue(gt,e)):He(Ct),Ue(Ct,n)}var Ht=Math.clz32?Math.clz32:yh,mh=Math.log,vh=Math.LN2;function yh(e){return e>>>=0,e===0?32:31-(mh(e)/vh|0)|0}var ki=64,Ei=4194304;function gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ri(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,h=e.pingedLanes,F=n&268435455;if(F!==0){var V=F&~i;V!==0?r=gr(V):(h&=F,h!==0&&(r=gr(h)))}else F=n&~i,F!==0?r=gr(F):h!==0&&(r=gr(h));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,h=t&-t,i>=h||i===16&&(h&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ht(t),i=1<<n,r|=e[n],t&=~i;return r}function _h(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,h=e.pendingLanes;0<h;){var F=31-Ht(h),V=1<<F,X=i[F];X===-1?(!(V&n)||V&r)&&(i[F]=_h(V,t)):X<=t&&(e.expiredLanes|=V),h&=~V}}function Os(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ko(){var e=ki;return ki<<=1,!(ki&4194240)&&(ki=64),e}function Gs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ht(t),e[t]=n}function Ch(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ht(n),h=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~h}}function zs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ht(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Le=0;function Eo(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Us=b.unstable_scheduleCallback,Ro=b.unstable_cancelCallback,xh=b.unstable_shouldYield,wh=b.unstable_requestPaint,ot=b.unstable_now,Bs=b.unstable_ImmediatePriority,Ph=b.unstable_UserBlockingPriority,Vs=b.unstable_NormalPriority,kh=b.unstable_IdlePriority,Ti=null,Xt=null;function Eh(e){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Ti,e,void 0,(e.current.flags&128)===128)}catch{}}function Rh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:Rh,rn=null,bi=!1,Hs=!1;function To(e){rn===null?rn=[e]:rn.push(e)}function Th(e){bi=!0,To(e)}function Qt(){if(!Hs&&rn!==null){Hs=!0;var e=0,t=Le;try{var n=rn;for(Le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rn=null,bi=!1}catch(i){throw rn!==null&&(rn=rn.slice(e+1)),Us(Bs,Qt),i}finally{Le=t,Hs=!1}}return null}var Kn=[],Yn=0,Ni=null,Ai=0,Mt=[],Lt=0,Fn=null,sn=1,an="";function Mn(e,t){Kn[Yn++]=Ai,Kn[Yn++]=Ni,Ni=e,Ai=t}function bo(e,t,n){Mt[Lt++]=sn,Mt[Lt++]=an,Mt[Lt++]=Fn,Fn=e;var r=sn;e=an;var i=32-Ht(r)-1;r&=~(1<<i),n+=1;var h=32-Ht(t)+i;if(30<h){var F=i-i%5;h=(r&(1<<F)-1).toString(32),r>>=F,i-=F,sn=1<<32-Ht(t)+i|n<<i|r,an=h+e}else sn=1<<h|n<<i|r,an=e}function js(e){e.return!==null&&(Mn(e,1),bo(e,1,0))}function qs(e){for(;e===Ni;)Ni=Kn[--Yn],Kn[Yn]=null,Ai=Kn[--Yn],Kn[Yn]=null;for(;e===Fn;)Fn=Mt[--Lt],Mt[Lt]=null,an=Mt[--Lt],Mt[Lt]=null,sn=Mt[--Lt],Mt[Lt]=null}var Nt=null,It=null,qe=!1,mr=!1,qt=null;function No(e,t){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ao(e,t){switch(e.tag){case 5:return t=Qc(t,e.type,e.pendingProps),t!==null?(e.stateNode=t,Nt=e,It=th(t),!0):!1;case 6:return t=Zc(t,e.pendingProps),t!==null?(e.stateNode=t,Nt=e,It=null,!0):!1;case 13:if(t=Jc(t),t!==null){var n=Fn!==null?{id:sn,overflow:an}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nt=e,It=null,!0}return!1;default:return!1}}function Ws(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ks(e){if(qe){var t=It;if(t){var n=t;if(!Ao(e,t)){if(Ws(e))throw Error(a(418));t=xi(n);var r=Nt;t&&Ao(e,t)?No(r,n):(e.flags=e.flags&-4097|2,qe=!1,Nt=e)}}else{if(Ws(e))throw Error(a(418));e.flags=e.flags&-4097|2,qe=!1,Nt=e}}}function Fo(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function Fi(e){if(!pe||e!==Nt)return!1;if(!qe)return Fo(e),qe=!0,!1;if(e.tag!==3&&(e.tag!==5||dh(e.type)&&!ae(e.type,e.memoizedProps))){var t=It;if(t){if(Ws(e))throw Mo(),Error(a(418));for(;t;)No(e,t),t=xi(t)}}if(Fo(e),e.tag===13){if(!pe)throw Error(a(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));It=oh(e)}else It=Nt?xi(e.stateNode):null;return!0}function Mo(){for(var e=It;e;)e=xi(e)}function Xn(){pe&&(It=Nt=null,mr=qe=!1)}function Ys(e){qt===null?qt=[e]:qt.push(e)}var bh=f.ReactCurrentBatchConfig;function Mi(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ph.call(t,i)||!jt(e[i],t[i]))return!1}return!0}function Nh(e){switch(e.tag){case 5:return fr(e.type);case 16:return fr("Lazy");case 13:return fr("Suspense");case 19:return fr("SuspenseList");case 0:case 2:case 15:return e=Is(e.type,!1),e;case 11:return e=Is(e.type.render,!1),e;case 1:return e=Is(e.type,!0),e;default:return""}}function vr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(F){var V=i.refs;F===null?delete V[h]:V[h]=F},t._stringRef=h,t)}if(typeof e!="string")throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Li(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lo(e){var t=e._init;return t(e._payload)}function Io(e){function t(K,q){if(e){var J=K.deletions;J===null?(K.deletions=[q],K.flags|=16):J.push(q)}}function n(K,q){if(!e)return null;for(;q!==null;)t(K,q),q=q.sibling;return null}function r(K,q){for(K=new Map;q!==null;)q.key!==null?K.set(q.key,q):K.set(q.index,q),q=q.sibling;return K}function i(K,q){return K=Cn(K,q),K.index=0,K.sibling=null,K}function h(K,q,J){return K.index=J,e?(J=K.alternate,J!==null?(J=J.index,J<q?(K.flags|=2,q):J):(K.flags|=2,q)):(K.flags|=1048576,q)}function F(K){return e&&K.alternate===null&&(K.flags|=2),K}function V(K,q,J,ce){return q===null||q.tag!==6?(q=Ha(J,K.mode,ce),q.return=K,q):(q=i(q,J),q.return=K,q)}function X(K,q,J,ce){var ve=J.type;return ve===_?ge(K,q,J.props.children,ce,J.key):q!==null&&(q.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===o&&Lo(ve)===q.type)?(ce=i(q,J.props),ce.ref=vr(K,q,J),ce.return=K,ce):(ce=hs(J.type,J.key,J.props,null,K.mode,ce),ce.ref=vr(K,q,J),ce.return=K,ce)}function se(K,q,J,ce){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?(q=ja(J,K.mode,ce),q.return=K,q):(q=i(q,J.children||[]),q.return=K,q)}function ge(K,q,J,ce,ve){return q===null||q.tag!==7?(q=Un(J,K.mode,ce,ve),q.return=K,q):(q=i(q,J),q.return=K,q)}function xe(K,q,J){if(typeof q=="string"&&q!==""||typeof q=="number")return q=Ha(""+q,K.mode,J),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case g:return J=hs(q.type,q.key,q.props,null,K.mode,J),J.ref=vr(K,null,q),J.return=K,J;case y:return q=ja(q,K.mode,J),q.return=K,q;case o:var ce=q._init;return xe(K,ce(q._payload),J)}if(C(q)||L(q))return q=Un(q,K.mode,J,null),q.return=K,q;Li(K,q)}return null}function ue(K,q,J,ce){var ve=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return ve!==null?null:V(K,q,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return J.key===ve?X(K,q,J,ce):null;case y:return J.key===ve?se(K,q,J,ce):null;case o:return ve=J._init,ue(K,q,ve(J._payload),ce)}if(C(J)||L(J))return ve!==null?null:ge(K,q,J,ce,null);Li(K,J)}return null}function je(K,q,J,ce,ve){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return K=K.get(J)||null,V(q,K,""+ce,ve);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case g:return K=K.get(ce.key===null?J:ce.key)||null,X(q,K,ce,ve);case y:return K=K.get(ce.key===null?J:ce.key)||null,se(q,K,ce,ve);case o:var ke=ce._init;return je(K,q,J,ke(ce._payload),ve)}if(C(ce)||L(ce))return K=K.get(J)||null,ge(q,K,ce,ve,null);Li(q,ce)}return null}function ze(K,q,J,ce){for(var ve=null,ke=null,we=q,Ie=q=0,ct=null;we!==null&&Ie<J.length;Ie++){we.index>Ie?(ct=we,we=null):ct=we.sibling;var De=ue(K,we,J[Ie],ce);if(De===null){we===null&&(we=ct);break}e&&we&&De.alternate===null&&t(K,we),q=h(De,q,Ie),ke===null?ve=De:ke.sibling=De,ke=De,we=ct}if(Ie===J.length)return n(K,we),qe&&Mn(K,Ie),ve;if(we===null){for(;Ie<J.length;Ie++)we=xe(K,J[Ie],ce),we!==null&&(q=h(we,q,Ie),ke===null?ve=we:ke.sibling=we,ke=we);return qe&&Mn(K,Ie),ve}for(we=r(K,we);Ie<J.length;Ie++)ct=je(we,K,Ie,J[Ie],ce),ct!==null&&(e&&ct.alternate!==null&&we.delete(ct.key===null?Ie:ct.key),q=h(ct,q,Ie),ke===null?ve=ct:ke.sibling=ct,ke=ct);return e&&we.forEach(function(xn){return t(K,xn)}),qe&&Mn(K,Ie),ve}function Et(K,q,J,ce){var ve=L(J);if(typeof ve!="function")throw Error(a(150));if(J=ve.call(J),J==null)throw Error(a(151));for(var ke=ve=null,we=q,Ie=q=0,ct=null,De=J.next();we!==null&&!De.done;Ie++,De=J.next()){we.index>Ie?(ct=we,we=null):ct=we.sibling;var xn=ue(K,we,De.value,ce);if(xn===null){we===null&&(we=ct);break}e&&we&&xn.alternate===null&&t(K,we),q=h(xn,q,Ie),ke===null?ve=xn:ke.sibling=xn,ke=xn,we=ct}if(De.done)return n(K,we),qe&&Mn(K,Ie),ve;if(we===null){for(;!De.done;Ie++,De=J.next())De=xe(K,De.value,ce),De!==null&&(q=h(De,q,Ie),ke===null?ve=De:ke.sibling=De,ke=De);return qe&&Mn(K,Ie),ve}for(we=r(K,we);!De.done;Ie++,De=J.next())De=je(we,K,Ie,De.value,ce),De!==null&&(e&&De.alternate!==null&&we.delete(De.key===null?Ie:De.key),q=h(De,q,Ie),ke===null?ve=De:ke.sibling=De,ke=De);return e&&we.forEach(function(ad){return t(K,ad)}),qe&&Mn(K,Ie),ve}function cn(K,q,J,ce){if(typeof J=="object"&&J!==null&&J.type===_&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case g:e:{for(var ve=J.key,ke=q;ke!==null;){if(ke.key===ve){if(ve=J.type,ve===_){if(ke.tag===7){n(K,ke.sibling),q=i(ke,J.props.children),q.return=K,K=q;break e}}else if(ke.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===o&&Lo(ve)===ke.type){n(K,ke.sibling),q=i(ke,J.props),q.ref=vr(K,ke,J),q.return=K,K=q;break e}n(K,ke);break}else t(K,ke);ke=ke.sibling}J.type===_?(q=Un(J.props.children,K.mode,ce,J.key),q.return=K,K=q):(ce=hs(J.type,J.key,J.props,null,K.mode,ce),ce.ref=vr(K,q,J),ce.return=K,K=ce)}return F(K);case y:e:{for(ke=J.key;q!==null;){if(q.key===ke)if(q.tag===4&&q.stateNode.containerInfo===J.containerInfo&&q.stateNode.implementation===J.implementation){n(K,q.sibling),q=i(q,J.children||[]),q.return=K,K=q;break e}else{n(K,q);break}else t(K,q);q=q.sibling}q=ja(J,K.mode,ce),q.return=K,K=q}return F(K);case o:return ke=J._init,cn(K,q,ke(J._payload),ce)}if(C(J))return ze(K,q,J,ce);if(L(J))return Et(K,q,J,ce);Li(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,q!==null&&q.tag===6?(n(K,q.sibling),q=i(q,J),q.return=K,K=q):(n(K,q),q=Ha(J,K.mode,ce),q.return=K,K=q),F(K)):n(K,q)}return cn}var Qn=Io(!0),Do=Io(!1),Ii=fn(null),Di=null,Zn=null,Xs=null;function Qs(){Xs=Zn=Di=null}function Oo(e,t,n){re?(Ue(Ii,t._currentValue),t._currentValue=n):(Ue(Ii,t._currentValue2),t._currentValue2=n)}function Zs(e){var t=Ii.current;He(Ii),re?e._currentValue=t:e._currentValue2=t}function Js(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Jn(e,t){Di=e,Xs=Zn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wt=!0),e.firstContext=null)}function Dt(e){var t=re?e._currentValue:e._currentValue2;if(Xs!==e)if(e={context:e,memoizedValue:t,next:null},Zn===null){if(Di===null)throw Error(a(308));Zn=e,Di.dependencies={lanes:0,firstContext:e}}else Zn=Zn.next=e;return t}var Ln=null;function $s(e){Ln===null?Ln=[e]:Ln.push(e)}function Go(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,$s(t)):(n.next=i.next,i.next=n),t.interleaved=n,Zt(e,r)}function Zt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var pn=!1;function ea(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Zt(e,n)}return i=r.interleaved,i===null?(t.next=t,$s(r)):(t.next=i.next,i.next=t),r.interleaved=t,Zt(e,n)}function Oi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zs(e,n)}}function Uo(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var F={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?i=h=F:h=h.next=F,n=n.next}while(n!==null);h===null?i=h=t:h=h.next=t}else i=h=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:h,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Gi(e,t,n,r){var i=e.updateQueue;pn=!1;var h=i.firstBaseUpdate,F=i.lastBaseUpdate,V=i.shared.pending;if(V!==null){i.shared.pending=null;var X=V,se=X.next;X.next=null,F===null?h=se:F.next=se,F=X;var ge=e.alternate;ge!==null&&(ge=ge.updateQueue,V=ge.lastBaseUpdate,V!==F&&(V===null?ge.firstBaseUpdate=se:V.next=se,ge.lastBaseUpdate=X))}if(h!==null){var xe=i.baseState;F=0,ge=se=X=null,V=h;do{var ue=V.lane,je=V.eventTime;if((r&ue)===ue){ge!==null&&(ge=ge.next={eventTime:je,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var ze=e,Et=V;switch(ue=t,je=n,Et.tag){case 1:if(ze=Et.payload,typeof ze=="function"){xe=ze.call(je,xe,ue);break e}xe=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Et.payload,ue=typeof ze=="function"?ze.call(je,xe,ue):ze,ue==null)break e;xe=m({},xe,ue);break e;case 2:pn=!0}}V.callback!==null&&V.lane!==0&&(e.flags|=64,ue=i.effects,ue===null?i.effects=[V]:ue.push(V))}else je={eventTime:je,lane:ue,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ge===null?(se=ge=je,X=xe):ge=ge.next=je,F|=ue;if(V=V.next,V===null){if(V=i.shared.pending,V===null)break;ue=V,V=ue.next,ue.next=null,i.lastBaseUpdate=ue,i.shared.pending=null}}while(!0);if(ge===null&&(X=xe),i.baseState=X,i.firstBaseUpdate=se,i.lastBaseUpdate=ge,t=i.shared.interleaved,t!==null){i=t;do F|=i.lane,i=i.next;while(i!==t)}else h===null&&(i.shared.lanes=0);Dn|=F,e.lanes=F,e.memoizedState=xe}}function Bo(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(a(191,i));i.call(r)}}}var yr={},Ot=fn(yr),_r=fn(yr),$n=fn(yr);function Jt(e){if(e===yr)throw Error(a(174));return e}function ta(e,t){Ue($n,t),Ue(_r,e),Ue(Ot,yr),e=O(t),He(Ot),Ue(Ot,e)}function er(){He(Ot),He(_r),He($n)}function Vo(e){var t=Jt($n.current),n=Jt(Ot.current);t=j(n,e.type,t),n!==t&&(Ue(_r,e),Ue(Ot,t))}function na(e){_r.current===e&&(He(Ot),He(_r))}var Ye=fn(0);function zi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Co(n)||Fs(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function ia(){for(var e=0;e<ra.length;e++){var t=ra[e];re?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}ra.length=0}var Ui=f.ReactCurrentDispatcher,sa=f.ReactCurrentBatchConfig,In=0,Xe=null,st=null,lt=null,Bi=!1,Sr=!1,Cr=0,Ah=0;function pt(){throw Error(a(321))}function aa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jt(e[n],t[n]))return!1;return!0}function oa(e,t,n,r,i,h){if(In=h,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ui.current=e===null||e.memoizedState===null?Ih:Dh,e=n(r,i),Sr){h=0;do{if(Sr=!1,Cr=0,25<=h)throw Error(a(301));h+=1,lt=st=null,t.updateQueue=null,Ui.current=Oh,e=n(r,i)}while(Sr)}if(Ui.current=ji,t=st!==null&&st.next!==null,In=0,lt=st=Xe=null,Bi=!1,t)throw Error(a(300));return e}function la(){var e=Cr!==0;return Cr=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Xe.memoizedState=lt=e:lt=lt.next=e,lt}function Gt(){if(st===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=lt===null?Xe.memoizedState:lt.next;if(t!==null)lt=t,st=e;else{if(e===null)throw Error(a(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},lt===null?Xe.memoizedState=lt=e:lt=lt.next=e}return lt}function xr(e,t){return typeof t=="function"?t(e):t}function ua(e){var t=Gt(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=st,i=r.baseQueue,h=n.pending;if(h!==null){if(i!==null){var F=i.next;i.next=h.next,h.next=F}r.baseQueue=i=h,n.pending=null}if(i!==null){h=i.next,r=r.baseState;var V=F=null,X=null,se=h;do{var ge=se.lane;if((In&ge)===ge)X!==null&&(X=X.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),r=se.hasEagerState?se.eagerState:e(r,se.action);else{var xe={lane:ge,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};X===null?(V=X=xe,F=r):X=X.next=xe,Xe.lanes|=ge,Dn|=ge}se=se.next}while(se!==null&&se!==h);X===null?F=r:X.next=V,jt(r,t.memoizedState)||(wt=!0),t.memoizedState=r,t.baseState=F,t.baseQueue=X,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do h=i.lane,Xe.lanes|=h,Dn|=h,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ca(e){var t=Gt(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,h=t.memoizedState;if(i!==null){n.pending=null;var F=i=i.next;do h=e(h,F.action),F=F.next;while(F!==i);jt(h,t.memoizedState)||(wt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,r]}function Ho(){}function jo(e,t){var n=Xe,r=Gt(),i=t(),h=!jt(r.memoizedState,i);if(h&&(r.memoizedState=i,wt=!0),r=r.queue,ha(Ko.bind(null,n,r,e),[e]),r.getSnapshot!==t||h||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,wr(9,Wo.bind(null,n,r,i,t),void 0,null),ut===null)throw Error(a(349));In&30||qo(n,t,i)}return i}function qo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Wo(e,t,n,r){t.value=n,t.getSnapshot=r,Yo(t)&&Xo(e)}function Ko(e,t,n){return n(function(){Yo(t)&&Xo(e)})}function Yo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jt(e,n)}catch{return!0}}function Xo(e){var t=Zt(e,1);t!==null&&zt(t,e,1,-1)}function Qo(e){var t=$t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:e},t.queue=e,e=e.dispatch=Lh.bind(null,Xe,e),[t.memoizedState,e]}function wr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Zo(){return Gt().memoizedState}function Vi(e,t,n,r){var i=$t();Xe.flags|=e,i.memoizedState=wr(1|t,n,void 0,r===void 0?null:r)}function Hi(e,t,n,r){var i=Gt();r=r===void 0?null:r;var h=void 0;if(st!==null){var F=st.memoizedState;if(h=F.destroy,r!==null&&aa(r,F.deps)){i.memoizedState=wr(t,n,h,r);return}}Xe.flags|=e,i.memoizedState=wr(1|t,n,h,r)}function Jo(e,t){return Vi(8390656,8,e,t)}function ha(e,t){return Hi(2048,8,e,t)}function $o(e,t){return Hi(4,2,e,t)}function el(e,t){return Hi(4,4,e,t)}function tl(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nl(e,t,n){return n=n!=null?n.concat([e]):null,Hi(4,4,tl.bind(null,t,e),n)}function da(){}function rl(e,t){var n=Gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function il(e,t){var n=Gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&aa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sl(e,t,n){return In&21?(jt(n,t)||(n=ko(),Xe.lanes|=n,Dn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=n)}function Fh(e,t){var n=Le;Le=n!==0&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{Le=n,sa.transition=r}}function al(){return Gt().memoizedState}function Mh(e,t,n){var r=_n(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ol(e))ll(t,n);else if(n=Go(e,t,n,r),n!==null){var i=yt();zt(n,e,r,i),ul(n,t,r)}}function Lh(e,t,n){var r=_n(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ol(e))ll(t,i);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var F=t.lastRenderedState,V=h(F,n);if(i.hasEagerState=!0,i.eagerState=V,jt(V,F)){var X=t.interleaved;X===null?(i.next=i,$s(t)):(i.next=X.next,X.next=i),t.interleaved=i;return}}catch{}finally{}n=Go(e,t,i,r),n!==null&&(i=yt(),zt(n,e,r,i),ul(n,t,r))}}function ol(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function ll(e,t){Sr=Bi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ul(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zs(e,n)}}var ji={readContext:Dt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},Ih={readContext:Dt,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:Dt,useEffect:Jo,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vi(4194308,4,tl.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vi(4,2,e,t)},useMemo:function(e,t){var n=$t();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$t();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Mh.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:Qo,useDebugValue:da,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=Qo(!1),t=e[0];return e=Fh.bind(null,e[1]),$t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,i=$t();if(qe){if(n===void 0)throw Error(a(407));n=n()}else{if(n=t(),ut===null)throw Error(a(349));In&30||qo(r,t,n)}i.memoizedState=n;var h={value:n,getSnapshot:t};return i.queue=h,Jo(Ko.bind(null,r,h,e),[e]),r.flags|=2048,wr(9,Wo.bind(null,r,h,n,t),void 0,null),n},useId:function(){var e=$t(),t=ut.identifierPrefix;if(qe){var n=an,r=sn;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Cr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Ah++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Dh={readContext:Dt,useCallback:rl,useContext:Dt,useEffect:ha,useImperativeHandle:nl,useInsertionEffect:$o,useLayoutEffect:el,useMemo:il,useReducer:ua,useRef:Zo,useState:function(){return ua(xr)},useDebugValue:da,useDeferredValue:function(e){var t=Gt();return sl(t,st.memoizedState,e)},useTransition:function(){var e=ua(xr)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Ho,useSyncExternalStore:jo,useId:al,unstable_isNewReconciler:!1},Oh={readContext:Dt,useCallback:rl,useContext:Dt,useEffect:ha,useImperativeHandle:nl,useInsertionEffect:$o,useLayoutEffect:el,useMemo:il,useReducer:ca,useRef:Zo,useState:function(){return ca(xr)},useDebugValue:da,useDeferredValue:function(e){var t=Gt();return st===null?t.memoizedState=e:sl(t,st.memoizedState,e)},useTransition:function(){var e=ca(xr)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Ho,useSyncExternalStore:jo,useId:al,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=m({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function fa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:m({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qi={isMounted:function(e){return(e=e._reactInternals)?z(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=yt(),i=_n(e),h=on(r,i);h.payload=t,n!=null&&(h.callback=n),t=mn(e,h,i),t!==null&&(zt(t,e,i,r),Oi(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=yt(),i=_n(e),h=on(r,i);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=mn(e,h,i),t!==null&&(zt(t,e,i,r),Oi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yt(),r=_n(e),i=on(n,r);i.tag=2,t!=null&&(i.callback=t),t=mn(e,i,r),t!==null&&(zt(t,e,r,n),Oi(t,e,r))}};function cl(e,t,n,r,i,h,F){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,h,F):t.prototype&&t.prototype.isPureReactComponent?!Mi(n,r)||!Mi(i,h):!0}function hl(e,t,n){var r=!1,i=gn,h=t.contextType;return typeof h=="object"&&h!==null?h=Dt(h):(i=xt(t)?An:gt.current,r=t.contextTypes,h=(r=r!=null)?Wn(e,i):gn),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qi,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=h),t}function dl(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qi.enqueueReplaceState(t,t.state,null)}function ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},ea(e);var h=t.contextType;typeof h=="object"&&h!==null?i.context=Dt(h):(h=xt(t)?An:gt.current,i.context=Wn(e,h)),i.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(fa(e,t,h,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&qi.enqueueReplaceState(i,i.state,null),Gi(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function tr(e,t){try{var n="",r=t;do n+=Nh(r),r=r.return;while(r);var i=n}catch(h){i=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:i,digest:null}}function pa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ma(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Gh=typeof WeakMap=="function"?WeakMap:Map;function fl(e,t,n){n=on(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ss||(ss=!0,Da=r),ma(e,t)},n}function gl(e,t,n){n=on(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ma(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){ma(e,t),typeof r!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var F=t.stack;this.componentDidCatch(t.value,{componentStack:F!==null?F:""})}),n}function pl(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Gh;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Jh.bind(null,e,t,n),t.then(e,e))}function ml(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vl(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=on(-1,1),t.tag=2,mn(n,t,1))),n.lanes|=1),e)}var zh=f.ReactCurrentOwner,wt=!1;function _t(e,t,n,r){t.child=e===null?Do(t,null,n,r):Qn(t,e.child,n,r)}function yl(e,t,n,r,i){n=n.render;var h=t.ref;return Jn(t,i),r=oa(e,t,n,r,h,i),n=la(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ln(e,t,i)):(qe&&n&&js(t),t.flags|=1,_t(e,t,r,i),t.child)}function _l(e,t,n,r,i){if(e===null){var h=n.type;return typeof h=="function"&&!Va(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,Sl(e,t,h,r,i)):(e=hs(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&i)){var F=h.memoizedProps;if(n=n.compare,n=n!==null?n:Mi,n(F,r)&&e.ref===t.ref)return ln(e,t,i)}return t.flags|=1,e=Cn(h,r),e.ref=t.ref,e.return=t,t.child=e}function Sl(e,t,n,r,i){if(e!==null){var h=e.memoizedProps;if(Mi(h,r)&&e.ref===t.ref)if(wt=!1,t.pendingProps=r=h,(e.lanes&i)!==0)e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,ln(e,t,i)}return va(e,t,n,r,i)}function Cl(e,t,n){var r=t.pendingProps,i=r.children,h=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(rr,At),At|=n;else{if(!(n&1073741824))return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(rr,At),At|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=h!==null?h.baseLanes:n,Ue(rr,At),At|=r}else h!==null?(r=h.baseLanes|n,t.memoizedState=null):r=n,Ue(rr,At),At|=r;return _t(e,t,i,n),t.child}function xl(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function va(e,t,n,r,i){var h=xt(n)?An:gt.current;return h=Wn(t,h),Jn(t,i),n=oa(e,t,n,r,h,i),r=la(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ln(e,t,i)):(qe&&r&&js(t),t.flags|=1,_t(e,t,n,i),t.child)}function wl(e,t,n,r,i){if(xt(n)){var h=!0;Pi(t)}else h=!1;if(Jn(t,i),t.stateNode===null)Ki(e,t),hl(t,n,r),ga(t,n,r,i),r=!0;else if(e===null){var F=t.stateNode,V=t.memoizedProps;F.props=V;var X=F.context,se=n.contextType;typeof se=="object"&&se!==null?se=Dt(se):(se=xt(n)?An:gt.current,se=Wn(t,se));var ge=n.getDerivedStateFromProps,xe=typeof ge=="function"||typeof F.getSnapshotBeforeUpdate=="function";xe||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(V!==r||X!==se)&&dl(t,F,r,se),pn=!1;var ue=t.memoizedState;F.state=ue,Gi(t,r,F,i),X=t.memoizedState,V!==r||ue!==X||Ct.current||pn?(typeof ge=="function"&&(fa(t,n,ge,r),X=t.memoizedState),(V=pn||cl(t,n,V,r,ue,X,se))?(xe||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(t.flags|=4194308)):(typeof F.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=X),F.props=r,F.state=X,F.context=se,r=V):(typeof F.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{F=t.stateNode,zo(e,t),V=t.memoizedProps,se=t.type===t.elementType?V:Wt(t.type,V),F.props=se,xe=t.pendingProps,ue=F.context,X=n.contextType,typeof X=="object"&&X!==null?X=Dt(X):(X=xt(n)?An:gt.current,X=Wn(t,X));var je=n.getDerivedStateFromProps;(ge=typeof je=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(V!==xe||ue!==X)&&dl(t,F,r,X),pn=!1,ue=t.memoizedState,F.state=ue,Gi(t,r,F,i);var ze=t.memoizedState;V!==xe||ue!==ze||Ct.current||pn?(typeof je=="function"&&(fa(t,n,je,r),ze=t.memoizedState),(se=pn||cl(t,n,se,r,ue,ze,X)||!1)?(ge||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(r,ze,X),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(r,ze,X)),typeof F.componentDidUpdate=="function"&&(t.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof F.componentDidUpdate!="function"||V===e.memoizedProps&&ue===e.memoizedState||(t.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&ue===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=ze),F.props=r,F.state=ze,F.context=X,r=se):(typeof F.componentDidUpdate!="function"||V===e.memoizedProps&&ue===e.memoizedState||(t.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||V===e.memoizedProps&&ue===e.memoizedState||(t.flags|=1024),r=!1)}return ya(e,t,n,r,h,i)}function ya(e,t,n,r,i,h){xl(e,t);var F=(t.flags&128)!==0;if(!r&&!F)return i&&Po(t,n,!1),ln(e,t,h);r=t.stateNode,zh.current=t;var V=F&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&F?(t.child=Qn(t,e.child,null,h),t.child=Qn(t,null,V,h)):_t(e,t,V,h),t.memoizedState=r.state,i&&Po(t,n,!0),t.child}function Pl(e){var t=e.stateNode;t.pendingContext?xo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xo(e,t.context,!1),ta(e,t.containerInfo)}function kl(e,t,n,r,i){return Xn(),Ys(i),t.flags|=256,_t(e,t,n,r),t.child}var _a={dehydrated:null,treeContext:null,retryLane:0};function Sa(e){return{baseLanes:e,cachePool:null,transitions:null}}function El(e,t,n){var r=t.pendingProps,i=Ye.current,h=!1,F=(t.flags&128)!==0,V;if((V=F)||(V=e!==null&&e.memoizedState===null?!1:(i&2)!==0),V?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ue(Ye,i&1),e===null)return Ks(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?Fs(e)?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(F=r.children,e=r.fallback,h?(r=t.mode,h=t.child,F={mode:"hidden",children:F},!(r&1)&&h!==null?(h.childLanes=0,h.pendingProps=F):h=ds(F,r,0,null),e=Un(e,r,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Sa(n),t.memoizedState=_a,e):Ca(t,F));if(i=e.memoizedState,i!==null&&(V=i.dehydrated,V!==null))return Uh(e,t,F,r,V,i,n);if(h){h=r.fallback,F=t.mode,i=e.child,V=i.sibling;var X={mode:"hidden",children:r.children};return!(F&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=X,t.deletions=null):(r=Cn(i,X),r.subtreeFlags=i.subtreeFlags&14680064),V!==null?h=Cn(V,h):(h=Un(h,F,n,null),h.flags|=2),h.return=t,r.return=t,r.sibling=h,t.child=r,r=h,h=t.child,F=e.child.memoizedState,F=F===null?Sa(n):{baseLanes:F.baseLanes|n,cachePool:null,transitions:F.transitions},h.memoizedState=F,h.childLanes=e.childLanes&~n,t.memoizedState=_a,r}return h=e.child,e=h.sibling,r=Cn(h,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ca(e,t){return t=ds({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wi(e,t,n,r){return r!==null&&Ys(r),Qn(t,e.child,null,n),e=Ca(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Uh(e,t,n,r,i,h,F){if(n)return t.flags&256?(t.flags&=-257,r=pa(Error(a(422))),Wi(e,t,F,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=r.fallback,i=t.mode,r=ds({mode:"visible",children:r.children},i,0,null),h=Un(h,i,F,null),h.flags|=2,r.return=t,h.return=t,r.sibling=h,t.child=r,t.mode&1&&Qn(t,e.child,null,F),t.child.memoizedState=Sa(F),t.memoizedState=_a,h);if(!(t.mode&1))return Wi(e,t,F,null);if(Fs(i))return r=$c(i).digest,h=Error(a(419)),r=pa(h,r,void 0),Wi(e,t,F,r);if(n=(F&e.childLanes)!==0,wt||n){if(r=ut,r!==null){switch(F&-F){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|F)?0:i,i!==0&&i!==h.retryLane&&(h.retryLane=i,Zt(e,i),zt(r,e,i,-1))}return Ba(),r=pa(Error(a(421))),Wi(e,t,F,r)}return Co(i)?(t.flags|=128,t.child=e.child,t=$h.bind(null,e),eh(i,t),null):(e=h.treeContext,pe&&(It=rh(i),Nt=t,qe=!0,qt=null,mr=!1,e!==null&&(Mt[Lt++]=sn,Mt[Lt++]=an,Mt[Lt++]=Fn,sn=e.id,an=e.overflow,Fn=t)),t=Ca(t,r.children),t.flags|=4096,t)}function Rl(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Js(e.return,t,n)}function xa(e,t,n,r,i){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=r,h.tail=n,h.tailMode=i)}function Tl(e,t,n){var r=t.pendingProps,i=r.revealOrder,h=r.tail;if(_t(e,t,r.children,n),r=Ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rl(e,n,t);else if(e.tag===19)Rl(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ue(Ye,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&zi(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),xa(t,!1,i,n,h);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&zi(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}xa(t,!0,n,null,h);break;case"together":xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ki(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ln(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Dn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,n=Cn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Cn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Bh(e,t,n){switch(t.tag){case 3:Pl(t),Xn();break;case 5:Vo(t);break;case 1:xt(t.type)&&Pi(t);break;case 4:ta(t,t.stateNode.containerInfo);break;case 10:Oo(t,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Ue(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?El(e,t,n):(Ue(Ye,Ye.current&1),e=ln(e,t,n),e!==null?e.sibling:null);Ue(Ye,Ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Tl(e,t,n);t.flags|=128}var i=t.memoizedState;if(i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ue(Ye,Ye.current),r)break;return null;case 22:case 23:return t.lanes=0,Cl(e,t,n)}return ln(e,t,n)}function en(e){e.flags|=4}function bl(e,t){if(e!==null&&e.child===t.child)return!0;if(t.flags&16)return!1;for(e=t.child;e!==null;){if(e.flags&12854||e.subtreeFlags&12854)return!1;e=e.sibling}return!0}var Pr,kr,Yi,Xi;if(ie)Pr=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)$(e,n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},kr=function(){},Yi=function(e,t,n,r,i){if(e=e.memoizedProps,e!==r){var h=t.stateNode,F=Jt(Ot.current);n=te(h,n,e,r,i,F),(t.updateQueue=n)&&en(t)}},Xi=function(e,t,n,r){n!==r&&en(t)};else if(he){Pr=function(e,t,n,r){for(var i=t.child;i!==null;){if(i.tag===5){var h=i.stateNode;n&&r&&(h=_o(h,i.type,i.memoizedProps,i)),$(e,h)}else if(i.tag===6)h=i.stateNode,n&&r&&(h=So(h,i.memoizedProps,i)),$(e,h);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)h=i.child,h!==null&&(h.return=i),Pr(e,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Nl=function(e,t,n,r){for(var i=t.child;i!==null;){if(i.tag===5){var h=i.stateNode;n&&r&&(h=_o(h,i.type,i.memoizedProps,i)),Nn(e,h)}else if(i.tag===6)h=i.stateNode,n&&r&&(h=So(h,i.memoizedProps,i)),Nn(e,h);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)h=i.child,h!==null&&(h.return=i),Nl(e,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};kr=function(e,t){var n=t.stateNode;if(!bl(e,t)){e=n.containerInfo;var r=jn(e);Nl(r,t,!1,!1),n.pendingChildren=r,en(t),Vt(e,r)}},Yi=function(e,t,n,r,i){var h=e.stateNode,F=e.memoizedProps;if((e=bl(e,t))&&F===r)t.stateNode=h;else{var V=t.stateNode,X=Jt(Ot.current),se=null;F!==r&&(se=te(V,n,F,r,i,X)),e&&se===null?t.stateNode=h:(h=it(h,se,n,F,r,t,e,V),Y(h,n,r,i,X)&&en(t),t.stateNode=h,e?en(t):Pr(h,t,!1,!1))}},Xi=function(e,t,n,r){n!==r?(e=Jt($n.current),n=Jt(Ot.current),t.stateNode=le(r,e,n,t),en(t)):t.stateNode=e.stateNode}}else kr=function(){},Yi=function(){},Xi=function(){};function Er(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Vh(e,t,n){var r=t.pendingProps;switch(qs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return xt(t.type)&&wi(),mt(t),null;case 3:return n=t.stateNode,er(),He(Ct),He(gt),ia(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Fi(t)?en(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(za(qt),qt=null))),kr(e,t),mt(t),null;case 5:na(t),n=Jt($n.current);var i=t.type;if(e!==null&&t.stateNode!=null)Yi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(a(166));return mt(t),null}if(e=Jt(Ot.current),Fi(t)){if(!pe)throw Error(a(175));e=ih(t.stateNode,t.type,t.memoizedProps,n,e,t,!mr),t.updateQueue=e,e!==null&&en(t)}else{var h=Q(i,r,n,e,t);Pr(h,t,!1,!1),t.stateNode=h,Y(h,i,r,n,e)&&en(t)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mt(t),null;case 6:if(e&&t.stateNode!=null)Xi(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(a(166));if(e=Jt($n.current),n=Jt(Ot.current),Fi(t)){if(!pe)throw Error(a(176));if(e=t.stateNode,n=t.memoizedProps,(r=sh(e,n,t,!mr))&&(i=Nt,i!==null))switch(i.tag){case 3:fh(i.stateNode.containerInfo,e,n,(i.mode&1)!==0);break;case 5:gh(i.type,i.memoizedProps,i.stateNode,e,n,(i.mode&1)!==0)}r&&en(t)}else t.stateNode=le(r,e,n,t)}return mt(t),null;case 13:if(He(Ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&It!==null&&t.mode&1&&!(t.flags&128))Mo(),Xn(),t.flags|=98560,i=!1;else if(i=Fi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(a(318));if(!pe)throw Error(a(344));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(a(317));ah(i,t)}else Xn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mt(t),i=!1}else qt!==null&&(za(qt),qt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(n=r!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?at===0&&(at=3):Ba())),t.updateQueue!==null&&(t.flags|=4),mt(t),null);case 4:return er(),kr(e,t),e===null&&Ce(t.stateNode.containerInfo),mt(t),null;case 10:return Zs(t.type._context),mt(t),null;case 17:return xt(t.type)&&wi(),mt(t),null;case 19:if(He(Ye),i=t.memoizedState,i===null)return mt(t),null;if(r=(t.flags&128)!==0,h=i.rendering,h===null)if(r)Er(i,!1);else{if(at!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=zi(e),h!==null){for(t.flags|=128,Er(i,!1),e=h.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,n=t.child;n!==null;)r=n,i=e,r.flags&=14680066,h=r.alternate,h===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=h.childLanes,r.lanes=h.lanes,r.child=h.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=h.memoizedProps,r.memoizedState=h.memoizedState,r.updateQueue=h.updateQueue,r.type=h.type,i=h.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n=n.sibling;return Ue(Ye,Ye.current&1|2),t.child}e=e.sibling}i.tail!==null&&ot()>Ia&&(t.flags|=128,r=!0,Er(i,!1),t.lanes=4194304)}else{if(!r)if(e=zi(h),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Er(i,!0),i.tail===null&&i.tailMode==="hidden"&&!h.alternate&&!qe)return mt(t),null}else 2*ot()-i.renderingStartTime>Ia&&n!==1073741824&&(t.flags|=128,r=!0,Er(i,!1),t.lanes=4194304);i.isBackwards?(h.sibling=t.child,t.child=h):(e=i.last,e!==null?e.sibling=h:t.child=h,i.last=h)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ot(),t.sibling=null,e=Ye.current,Ue(Ye,r?e&1|2:e&1),t):(mt(t),null);case 22:case 23:return Ua(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?At&1073741824&&(mt(t),ie&&t.subtreeFlags&6&&(t.flags|=8192)):mt(t),null;case 24:return null;case 25:return null}throw Error(a(156,t.tag))}function Hh(e,t){switch(qs(t),t.tag){case 1:return xt(t.type)&&wi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return er(),He(Ct),He(gt),ia(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return na(t),null;case 13:if(He(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));Xn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(Ye),null;case 4:return er(),null;case 10:return Zs(t.type._context),null;case 22:case 23:return Ua(),null;case 24:return null;default:return null}}var Qi=!1,vt=!1,jh=typeof WeakSet=="function"?WeakSet:Set,fe=null;function nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function wa(e,t,n){try{n()}catch(r){We(e,t,r)}}var Al=!1;function qh(e,t){for(H(e.containerInfo),fe=t;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var n=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var r=n.memoizedProps,i=n.memoizedState,h=e.stateNode,F=h.getSnapshotBeforeUpdate(e.elementType===e.type?r:Wt(e.type,r),i);h.__reactInternalSnapshotBeforeUpdate=F}break;case 3:ie&&Ze(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(V){We(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return n=Al,Al=!1,n}function Rr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var h=i.destroy;i.destroy=void 0,h!==void 0&&wa(t,n,h)}i=i.next}while(i!==r)}}function Zi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Pa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=D(n);break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fl(e){var t=e.alternate;t!==null&&(e.alternate=null,Fl(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Se(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ml(e){return e.tag===5||e.tag===3||e.tag===4}function Ll(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ka(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?rt(n,e,t):me(n,e);else if(r!==4&&(e=e.child,e!==null))for(ka(e,t,n),e=e.sibling;e!==null;)ka(e,t,n),e=e.sibling}function Ea(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?Ve(n,e,t):Ee(n,e);else if(r!==4&&(e=e.child,e!==null))for(Ea(e,t,n),e=e.sibling;e!==null;)Ea(e,t,n),e=e.sibling}var dt=null,Kt=!1;function tn(e,t,n){for(n=n.child;n!==null;)Ra(e,t,n),n=n.sibling}function Ra(e,t,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Ti,n)}catch{}switch(n.tag){case 5:vt||nr(n,t);case 6:if(ie){var r=dt,i=Kt;dt=null,tn(e,t,n),dt=r,Kt=i,dt!==null&&(Kt?cr(dt,n.stateNode):bn(dt,n.stateNode))}else tn(e,t,n);break;case 18:ie&&dt!==null&&(Kt?hh(dt,n.stateNode):ch(dt,n.stateNode));break;case 4:ie?(r=dt,i=Kt,dt=n.stateNode.containerInfo,Kt=!0,tn(e,t,n),dt=r,Kt=i):(he&&(r=n.stateNode.containerInfo,i=jn(r),As(r,i)),tn(e,t,n));break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var h=i,F=h.destroy;h=h.tag,F!==void 0&&(h&2||h&4)&&wa(n,t,F),i=i.next}while(i!==r)}tn(e,t,n);break;case 1:if(!vt&&(nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(V){We(n,t,V)}tn(e,t,n);break;case 21:tn(e,t,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,tn(e,t,n),vt=r):tn(e,t,n);break;default:tn(e,t,n)}}function Il(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jh),t.forEach(function(r){var i=ed.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var h=e,F=t;if(ie){var V=F;e:for(;V!==null;){switch(V.tag){case 5:dt=V.stateNode,Kt=!1;break e;case 3:dt=V.stateNode.containerInfo,Kt=!0;break e;case 4:dt=V.stateNode.containerInfo,Kt=!0;break e}V=V.return}if(dt===null)throw Error(a(160));Ra(h,F,i),dt=null,Kt=!1}else Ra(h,F,i);var X=i.alternate;X!==null&&(X.return=null),i.return=null}catch(se){We(i,t,se)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dl(t,e),t=t.sibling}function Dl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),nn(e),r&4){try{Rr(3,e,e.return),Zi(3,e)}catch(ue){We(e,e.return,ue)}try{Rr(5,e,e.return)}catch(ue){We(e,e.return,ue)}}break;case 1:Yt(t,e),nn(e),r&512&&n!==null&&nr(n,n.return);break;case 5:if(Yt(t,e),nn(e),r&512&&n!==null&&nr(n,n.return),ie){if(e.flags&32){var i=e.stateNode;try{Hn(i)}catch(ue){We(e,e.return,ue)}}if(r&4&&(i=e.stateNode,i!=null)){var h=e.memoizedProps;if(n=n!==null?n.memoizedProps:h,r=e.type,t=e.updateQueue,e.updateQueue=null,t!==null)try{Me(i,t,r,n,h,e)}catch(ue){We(e,e.return,ue)}}}break;case 6:if(Yt(t,e),nn(e),r&4&&ie){if(e.stateNode===null)throw Error(a(162));i=e.stateNode,h=e.memoizedProps,n=n!==null?n.memoizedProps:h;try{Fe(i,n,h)}catch(ue){We(e,e.return,ue)}}break;case 3:if(Yt(t,e),nn(e),r&4){if(ie&&pe&&n!==null&&n.memoizedState.isDehydrated)try{lh(t.containerInfo)}catch(ue){We(e,e.return,ue)}if(he){i=t.containerInfo,h=t.pendingChildren;try{As(i,h)}catch(ue){We(e,e.return,ue)}}}break;case 4:if(Yt(t,e),nn(e),r&4&&he){h=e.stateNode,i=h.containerInfo,h=h.pendingChildren;try{As(i,h)}catch(ue){We(e,e.return,ue)}}break;case 13:Yt(t,e),nn(e),i=e.child,i.flags&8192&&(h=i.memoizedState!==null,i.stateNode.isHidden=h,!h||i.alternate!==null&&i.alternate.memoizedState!==null||(La=ot())),r&4&&Il(e);break;case 22:var F=n!==null&&n.memoizedState!==null;if(e.mode&1?(vt=(n=vt)||F,Yt(t,e),vt=n):Yt(t,e),nn(e),r&8192){if(n=e.memoizedState!==null,(e.stateNode.isHidden=n)&&!F&&e.mode&1)for(fe=e,r=e.child;r!==null;){for(t=fe=r;fe!==null;){F=fe;var V=F.child;switch(F.tag){case 0:case 11:case 14:case 15:Rr(4,F,F.return);break;case 1:nr(F,F.return);var X=F.stateNode;if(typeof X.componentWillUnmount=="function"){var se=F,ge=F.return;try{var xe=se;X.props=xe.memoizedProps,X.state=xe.memoizedState,X.componentWillUnmount()}catch(ue){We(se,ge,ue)}}break;case 5:nr(F,F.return);break;case 22:if(F.memoizedState!==null){zl(t);continue}}V!==null?(V.return=F,fe=V):zl(t)}r=r.sibling}if(ie){e:if(r=null,ie)for(t=e;;){if(t.tag===5){if(r===null){r=t;try{i=t.stateNode,n?bs(i):dr(t.stateNode,t.memoizedProps)}catch(ue){We(e,e.return,ue)}}}else if(t.tag===6){if(r===null)try{h=t.stateNode,n?hr(h):Ns(h,t.memoizedProps)}catch(ue){We(e,e.return,ue)}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}}}break;case 19:Yt(t,e),nn(e),r&4&&Il(e);break;case 21:break;default:Yt(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{if(ie){e:{for(var n=e.return;n!==null;){if(Ml(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hn(i),r.flags&=-33);var h=Ll(e);Ea(e,h,i);break;case 3:case 4:var F=r.stateNode.containerInfo,V=Ll(e);ka(e,V,F);break;default:throw Error(a(161))}}}catch(X){We(e,e.return,X)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wh(e,t,n){fe=e,Ol(e)}function Ol(e,t,n){for(var r=(e.mode&1)!==0;fe!==null;){var i=fe,h=i.child;if(i.tag===22&&r){var F=i.memoizedState!==null||Qi;if(!F){var V=i.alternate,X=V!==null&&V.memoizedState!==null||vt;V=Qi;var se=vt;if(Qi=F,(vt=X)&&!se)for(fe=i;fe!==null;)F=fe,X=F.child,F.tag===22&&F.memoizedState!==null?Ul(i):X!==null?(X.return=F,fe=X):Ul(i);for(;h!==null;)fe=h,Ol(h),h=h.sibling;fe=i,Qi=V,vt=se}Gl(e)}else i.subtreeFlags&8772&&h!==null?(h.return=i,fe=h):Gl(e)}}function Gl(e){for(;fe!==null;){var t=fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vt||Zi(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Bo(t,h,r);break;case 3:var F=t.updateQueue;if(F!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=D(t.child.stateNode);break;case 1:n=t.child.stateNode}Bo(t,F,n)}break;case 5:var V=t.stateNode;n===null&&t.flags&4&&Be(V,t.type,t.memoizedProps,t);break;case 6:break;case 4:break;case 12:break;case 13:if(pe&&t.memoizedState===null){var X=t.alternate;if(X!==null){var se=X.memoizedState;if(se!==null){var ge=se.dehydrated;ge!==null&&uh(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}vt||t.flags&512&&Pa(t)}catch(xe){We(t,t.return,xe)}}if(t===e){fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function zl(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fe=n;break}fe=t.return}}function Ul(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zi(4,t)}catch(X){We(t,n,X)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(X){We(t,i,X)}}var h=t.return;try{Pa(t)}catch(X){We(t,h,X)}break;case 5:var F=t.return;try{Pa(t)}catch(X){We(t,F,X)}}}catch(X){We(t,t.return,X)}if(t===e){fe=null;break}var V=t.sibling;if(V!==null){V.return=t.return,fe=V;break}fe=t.return}}var Ji=0,$i=1,es=2,ts=3,ns=4;if(typeof Symbol=="function"&&Symbol.for){var Tr=Symbol.for;Ji=Tr("selector.component"),$i=Tr("selector.has_pseudo_class"),es=Tr("selector.role"),ts=Tr("selector.test_id"),ns=Tr("selector.text")}function Ta(e){var t=Ae(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(a(364));return t}if(e=Ft(e),e===null)throw Error(a(362));return e.stateNode.current}function ba(e,t){switch(t.$$typeof){case Ji:if(e.type===t.value)return!0;break;case $i:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],h=t[i];if(r.tag!==5||!ee(r)){for(;h!=null&&ba(r,h);)i++,h=t[i];if(i===t.length){t=!0;break e}else for(r=r.child;r!==null;)e.push(r,i),r=r.sibling}}t=!1}return t;case es:if(e.tag===5&&oe(e.stateNode,t.value))return!0;break;case ns:if((e.tag===5||e.tag===6)&&(e=nt(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case ts:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Na(e){switch(e.$$typeof){case Ji:return"<"+(G(e.value)||"Unknown")+">";case $i:return":has("+(Na(e)||"")+")";case es:return'[role="'+e.value+'"]';case ns:return'"'+e.value+'"';case ts:return'[data-testname="'+e.value+'"]';default:throw Error(a(365))}}function Bl(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],h=e[r++],F=t[h];if(i.tag!==5||!ee(i)){for(;F!=null&&ba(i,F);)h++,F=t[h];if(h===t.length)n.push(i);else for(i=i.child;i!==null;)e.push(i,h),i=i.sibling}}return n}function Aa(e,t){if(!Ke)throw Error(a(363));e=Ta(e),e=Bl(e,t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(r.tag===5)ee(r)||t.push(r.stateNode);else for(r=r.child;r!==null;)e.push(r),r=r.sibling}return t}var Kh=Math.ceil,rs=f.ReactCurrentDispatcher,Fa=f.ReactCurrentOwner,$e=f.ReactCurrentBatchConfig,Te=0,ut=null,tt=null,ft=0,At=0,rr=fn(0),at=0,br=null,Dn=0,is=0,Ma=0,Nr=null,Pt=null,La=0,Ia=1/0,un=null;function ir(){Ia=ot()+500}var ss=!1,Da=null,vn=null,as=!1,yn=null,os=0,Ar=0,Oa=null,ls=-1,us=0;function yt(){return Te&6?ot():ls!==-1?ls:ls=ot()}function _n(e){return e.mode&1?Te&2&&ft!==0?ft&-ft:bh.transition!==null?(us===0&&(us=ko()),us):(e=Le,e!==0?e:Qe()):1}function zt(e,t,n,r){if(50<Ar)throw Ar=0,Oa=null,Error(a(185));pr(e,n,r),(!(Te&2)||e!==ut)&&(e===ut&&(!(Te&2)&&(is|=n),at===4&&Sn(e,ft)),kt(e,r),n===1&&Te===0&&!(t.mode&1)&&(ir(),bi&&Qt()))}function kt(e,t){var n=e.callbackNode;Sh(e,t);var r=Ri(e,e===ut?ft:0);if(r===0)n!==null&&Ro(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ro(n),t===1)e.tag===0?Th(Hl.bind(null,e)):To(Hl.bind(null,e)),Ge?bt(function(){!(Te&6)&&Qt()}):Us(Bs,Qt),n=null;else{switch(Eo(r)){case 1:n=Bs;break;case 4:n=Ph;break;case 16:n=Vs;break;case 536870912:n=kh;break;default:n=Vs}n=Jl(n,Vl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Vl(e,t){if(ls=-1,us=0,Te&6)throw Error(a(327));var n=e.callbackNode;if(zn()&&e.callbackNode!==n)return null;var r=Ri(e,e===ut?ft:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=cs(e,r);else{t=r;var i=Te;Te|=2;var h=Wl();(ut!==e||ft!==t)&&(un=null,ir(),On(e,t));do try{Qh();break}catch(V){ql(e,V)}while(!0);Qs(),rs.current=h,Te=i,tt!==null?t=0:(ut=null,ft=0,t=at)}if(t!==0){if(t===2&&(i=Os(e),i!==0&&(r=i,t=Ga(e,i))),t===1)throw n=br,On(e,0),Sn(e,r),kt(e,ot()),n;if(t===6)Sn(e,r);else{if(i=e.current.alternate,!(r&30)&&!Yh(i)&&(t=cs(e,r),t===2&&(h=Os(e),h!==0&&(r=h,t=Ga(e,h))),t===1))throw n=br,On(e,0),Sn(e,r),kt(e,ot()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:Gn(e,Pt,un);break;case 3:if(Sn(e,r),(r&130023424)===r&&(t=La+500-ot(),10<t)){if(Ri(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){yt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=U(Gn.bind(null,e,Pt,un),t);break}Gn(e,Pt,un);break;case 4:if(Sn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var F=31-Ht(r);h=1<<F,F=t[F],F>i&&(i=F),r&=~h}if(r=i,r=ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kh(r/1960))-r,10<r){e.timeoutHandle=U(Gn.bind(null,e,Pt,un),r);break}Gn(e,Pt,un);break;case 5:Gn(e,Pt,un);break;default:throw Error(a(329))}}}return kt(e,ot()),e.callbackNode===n?Vl.bind(null,e):null}function Ga(e,t){var n=Nr;return e.current.memoizedState.isDehydrated&&(On(e,t).flags|=256),e=cs(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&za(t)),e}function za(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function Yh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],h=i.getSnapshot;i=i.value;try{if(!jt(h(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sn(e,t){for(t&=~Ma,t&=~is,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function Hl(e){if(Te&6)throw Error(a(327));zn();var t=Ri(e,0);if(!(t&1))return kt(e,ot()),null;var n=cs(e,t);if(e.tag!==0&&n===2){var r=Os(e);r!==0&&(t=r,n=Ga(e,r))}if(n===1)throw n=br,On(e,0),Sn(e,t),kt(e,ot()),n;if(n===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gn(e,Pt,un),kt(e,ot()),null}function jl(e){yn!==null&&yn.tag===0&&!(Te&6)&&zn();var t=Te;Te|=1;var n=$e.transition,r=Le;try{if($e.transition=null,Le=1,e)return e()}finally{Le=r,$e.transition=n,Te=t,!(Te&6)&&Qt()}}function Ua(){At=rr.current,He(rr)}function On(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==ne&&(e.timeoutHandle=ne,W(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(qs(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wi();break;case 3:er(),He(Ct),He(gt),ia();break;case 5:na(r);break;case 4:er();break;case 13:He(Ye);break;case 19:He(Ye);break;case 10:Zs(r.type._context);break;case 22:case 23:Ua()}n=n.return}if(ut=e,tt=e=Cn(e.current,null),ft=At=t,at=0,br=null,Ma=is=Dn=0,Pt=Nr=null,Ln!==null){for(t=0;t<Ln.length;t++)if(n=Ln[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,h=n.pending;if(h!==null){var F=h.next;h.next=i,r.next=F}n.pending=r}Ln=null}return e}function ql(e,t){do{var n=tt;try{if(Qs(),Ui.current=ji,Bi){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bi=!1}if(In=0,lt=st=Xe=null,Sr=!1,Cr=0,Fa.current=null,n===null||n.return===null){at=1,br=t,tt=null;break}e:{var h=e,F=n.return,V=n,X=t;if(t=ft,V.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var se=X,ge=V,xe=ge.tag;if(!(ge.mode&1)&&(xe===0||xe===11||xe===15)){var ue=ge.alternate;ue?(ge.updateQueue=ue.updateQueue,ge.memoizedState=ue.memoizedState,ge.lanes=ue.lanes):(ge.updateQueue=null,ge.memoizedState=null)}var je=ml(F);if(je!==null){je.flags&=-257,vl(je,F,V,h,t),je.mode&1&&pl(h,se,t),t=je,X=se;var ze=t.updateQueue;if(ze===null){var Et=new Set;Et.add(X),t.updateQueue=Et}else ze.add(X);break e}else{if(!(t&1)){pl(h,se,t),Ba();break e}X=Error(a(426))}}else if(qe&&V.mode&1){var cn=ml(F);if(cn!==null){!(cn.flags&65536)&&(cn.flags|=256),vl(cn,F,V,h,t),Ys(tr(X,V));break e}}h=X=tr(X,V),at!==4&&(at=2),Nr===null?Nr=[h]:Nr.push(h),h=F;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var K=fl(h,X,t);Uo(h,K);break e;case 1:V=X;var q=h.type,J=h.stateNode;if(!(h.flags&128)&&(typeof q.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(vn===null||!vn.has(J)))){h.flags|=65536,t&=-t,h.lanes|=t;var ce=gl(h,V,t);Uo(h,ce);break e}}h=h.return}while(h!==null)}Yl(n)}catch(ve){t=ve,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function Wl(){var e=rs.current;return rs.current=ji,e===null?ji:e}function Ba(){(at===0||at===3||at===2)&&(at=4),ut===null||!(Dn&268435455)&&!(is&268435455)||Sn(ut,ft)}function cs(e,t){var n=Te;Te|=2;var r=Wl();(ut!==e||ft!==t)&&(un=null,On(e,t));do try{Xh();break}catch(i){ql(e,i)}while(!0);if(Qs(),Te=n,rs.current=r,tt!==null)throw Error(a(261));return ut=null,ft=0,at}function Xh(){for(;tt!==null;)Kl(tt)}function Qh(){for(;tt!==null&&!xh();)Kl(tt)}function Kl(e){var t=Zl(e.alternate,e,At);e.memoizedProps=e.pendingProps,t===null?Yl(e):tt=t,Fa.current=null}function Yl(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Hh(n,t),n!==null){n.flags&=32767,tt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,tt=null;return}}else if(n=Vh(n,t,At),n!==null){tt=n;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);at===0&&(at=5)}function Gn(e,t,n){var r=Le,i=$e.transition;try{$e.transition=null,Le=1,Zh(e,t,n,r)}finally{$e.transition=i,Le=r}return null}function Zh(e,t,n,r){do zn();while(yn!==null);if(Te&6)throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(Ch(e,h),e===ut&&(tt=ut=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||as||(as=!0,Jl(Vs,function(){return zn(),null})),h=(n.flags&15990)!==0,n.subtreeFlags&15990||h){h=$e.transition,$e.transition=null;var F=Le;Le=1;var V=Te;Te|=4,Fa.current=null,qh(e,n),Dl(n,e),Z(e.containerInfo),e.current=n,Wh(n),wh(),Te=V,Le=F,$e.transition=h}else e.current=n;if(as&&(as=!1,yn=e,os=i),h=e.pendingLanes,h===0&&(vn=null),Eh(n.stateNode),kt(e,ot()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ss)throw ss=!1,e=Da,Da=null,e;return os&1&&e.tag!==0&&zn(),h=e.pendingLanes,h&1?e===Oa?Ar++:(Ar=0,Oa=e):Ar=0,Qt(),null}function zn(){if(yn!==null){var e=Eo(os),t=$e.transition,n=Le;try{if($e.transition=null,Le=16>e?16:e,yn===null)var r=!1;else{if(e=yn,yn=null,os=0,Te&6)throw Error(a(331));var i=Te;for(Te|=4,fe=e.current;fe!==null;){var h=fe,F=h.child;if(fe.flags&16){var V=h.deletions;if(V!==null){for(var X=0;X<V.length;X++){var se=V[X];for(fe=se;fe!==null;){var ge=fe;switch(ge.tag){case 0:case 11:case 15:Rr(8,ge,h)}var xe=ge.child;if(xe!==null)xe.return=ge,fe=xe;else for(;fe!==null;){ge=fe;var ue=ge.sibling,je=ge.return;if(Fl(ge),ge===se){fe=null;break}if(ue!==null){ue.return=je,fe=ue;break}fe=je}}}var ze=h.alternate;if(ze!==null){var Et=ze.child;if(Et!==null){ze.child=null;do{var cn=Et.sibling;Et.sibling=null,Et=cn}while(Et!==null)}}fe=h}}if(h.subtreeFlags&2064&&F!==null)F.return=h,fe=F;else e:for(;fe!==null;){if(h=fe,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Rr(9,h,h.return)}var K=h.sibling;if(K!==null){K.return=h.return,fe=K;break e}fe=h.return}}var q=e.current;for(fe=q;fe!==null;){F=fe;var J=F.child;if(F.subtreeFlags&2064&&J!==null)J.return=F,fe=J;else e:for(F=q;fe!==null;){if(V=fe,V.flags&2048)try{switch(V.tag){case 0:case 11:case 15:Zi(9,V)}}catch(ve){We(V,V.return,ve)}if(V===F){fe=null;break e}var ce=V.sibling;if(ce!==null){ce.return=V.return,fe=ce;break e}fe=V.return}}if(Te=i,Qt(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Ti,e)}catch{}r=!0}return r}finally{Le=n,$e.transition=t}}return!1}function Xl(e,t,n){t=tr(n,t),t=fl(e,t,1),e=mn(e,t,1),t=yt(),e!==null&&(pr(e,1,t),kt(e,t))}function We(e,t,n){if(e.tag===3)Xl(e,e,n);else for(;t!==null;){if(t.tag===3){Xl(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vn===null||!vn.has(r))){e=tr(n,e),e=gl(t,e,1),t=mn(t,e,1),e=yt(),t!==null&&(pr(t,1,e),kt(t,e));break}}t=t.return}}function Jh(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=yt(),e.pingedLanes|=e.suspendedLanes&n,ut===e&&(ft&n)===n&&(at===4||at===3&&(ft&130023424)===ft&&500>ot()-La?On(e,0):Ma|=n),kt(e,t)}function Ql(e,t){t===0&&(e.mode&1?(t=Ei,Ei<<=1,!(Ei&130023424)&&(Ei=4194304)):t=1);var n=yt();e=Zt(e,t),e!==null&&(pr(e,t,n),kt(e,n))}function $h(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ql(e,n)}function ed(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}r!==null&&r.delete(t),Ql(e,n)}var Zl;Zl=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ct.current)wt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return wt=!1,Bh(e,t,n);wt=!!(e.flags&131072)}else wt=!1,qe&&t.flags&1048576&&bo(t,Ai,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ki(e,t),e=t.pendingProps;var i=Wn(t,gt.current);Jn(t,n),i=oa(null,t,r,e,i,n);var h=la();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(r)?(h=!0,Pi(t)):h=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ea(t),i.updater=qi,t.stateNode=i,i._reactInternals=t,ga(t,r,e,n),t=ya(null,t,r,!0,h,n)):(t.tag=0,qe&&h&&js(t),_t(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ki(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=nd(r),e=Wt(r,e),i){case 0:t=va(null,t,r,e,n);break e;case 1:t=wl(null,t,r,e,n);break e;case 11:t=yl(null,t,r,e,n);break e;case 14:t=_l(null,t,r,Wt(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),va(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),wl(e,t,r,i,n);case 3:e:{if(Pl(t),e===null)throw Error(a(387));r=t.pendingProps,h=t.memoizedState,i=h.element,zo(e,t),Gi(t,r,null,n);var F=t.memoizedState;if(r=F.element,pe&&h.isDehydrated)if(h={element:r,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){i=tr(Error(a(423)),t),t=kl(e,t,r,n,i);break e}else if(r!==i){i=tr(Error(a(424)),t),t=kl(e,t,r,n,i);break e}else for(pe&&(It=nh(t.stateNode.containerInfo),Nt=t,qe=!0,qt=null,mr=!1),n=Do(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xn(),r===i){t=ln(e,t,n);break e}_t(e,t,r,n)}t=t.child}return t;case 5:return Vo(t),e===null&&Ks(t),r=t.type,i=t.pendingProps,h=e!==null?e.memoizedProps:null,F=i.children,ae(r,i)?F=null:h!==null&&ae(r,h)&&(t.flags|=32),xl(e,t),_t(e,t,F,n),t.child;case 6:return e===null&&Ks(t),null;case 13:return El(e,t,n);case 4:return ta(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Qn(t,null,r,n):_t(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),yl(e,t,r,i,n);case 7:return _t(e,t,t.pendingProps,n),t.child;case 8:return _t(e,t,t.pendingProps.children,n),t.child;case 12:return _t(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,h=t.memoizedProps,F=i.value,Oo(t,r,F),h!==null)if(jt(h.value,F)){if(h.children===i.children&&!Ct.current){t=ln(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var V=h.dependencies;if(V!==null){F=h.child;for(var X=V.firstContext;X!==null;){if(X.context===r){if(h.tag===1){X=on(-1,n&-n),X.tag=2;var se=h.updateQueue;if(se!==null){se=se.shared;var ge=se.pending;ge===null?X.next=X:(X.next=ge.next,ge.next=X),se.pending=X}}h.lanes|=n,X=h.alternate,X!==null&&(X.lanes|=n),Js(h.return,n,t),V.lanes|=n;break}X=X.next}}else if(h.tag===10)F=h.type===t.type?null:h.child;else if(h.tag===18){if(F=h.return,F===null)throw Error(a(341));F.lanes|=n,V=F.alternate,V!==null&&(V.lanes|=n),Js(F,n,t),F=h.sibling}else F=h.child;if(F!==null)F.return=h;else for(F=h;F!==null;){if(F===t){F=null;break}if(h=F.sibling,h!==null){h.return=F.return,F=h;break}F=F.return}h=F}_t(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Jn(t,n),i=Dt(i),r=r(i),t.flags|=1,_t(e,t,r,n),t.child;case 14:return r=t.type,i=Wt(r,t.pendingProps),i=Wt(r.type,i),_l(e,t,r,i,n);case 15:return Sl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),Ki(e,t),t.tag=1,xt(r)?(e=!0,Pi(t)):e=!1,Jn(t,n),hl(t,r,i),ga(t,r,i,n),ya(null,t,r,!0,e,n);case 19:return Tl(e,t,n);case 22:return Cl(e,t,n)}throw Error(a(156,t.tag))};function Jl(e,t){return Us(e,t)}function td(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,n,r){return new td(e,t,n,r)}function Va(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nd(e){if(typeof e=="function")return Va(e)?1:0;if(e!=null){if(e=e.$$typeof,e===v)return 11;if(e===c)return 14}return 2}function Cn(e,t){var n=e.alternate;return n===null?(n=Ut(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function hs(e,t,n,r,i,h){var F=2;if(r=e,typeof e=="function")Va(e)&&(F=1);else if(typeof e=="string")F=5;else e:switch(e){case _:return Un(n.children,i,h,t);case P:F=8,i|=8;break;case w:return e=Ut(12,n,t,i|2),e.elementType=w,e.lanes=h,e;case k:return e=Ut(13,n,t,i),e.elementType=k,e.lanes=h,e;case A:return e=Ut(19,n,t,i),e.elementType=A,e.lanes=h,e;case x:return ds(n,i,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case p:F=10;break e;case d:F=9;break e;case v:F=11;break e;case c:F=14;break e;case o:F=16,r=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return t=Ut(F,n,t,i),t.elementType=e,t.type=r,t.lanes=h,t}function Un(e,t,n,r){return e=Ut(7,e,r,t),e.lanes=n,e}function ds(e,t,n,r){return e=Ut(22,e,r,t),e.elementType=x,e.lanes=n,e.stateNode={isHidden:!1},e}function Ha(e,t,n){return e=Ut(6,e,null,t),e.lanes=n,e}function ja(e,t,n){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rd(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ne,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gs(0),this.expirationTimes=Gs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gs(0),this.identifierPrefix=r,this.onRecoverableError=i,pe&&(this.mutableSourceEagerHydrationData=null)}function $l(e,t,n,r,i,h,F,V,X){return e=new rd(e,t,n,V,X),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Ut(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ea(h),e}function eu(e){if(!e)return gn;e=e._reactInternals;e:{if(z(e)!==e||e.tag!==1)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(a(171))}if(e.tag===1){var n=e.type;if(xt(n))return wo(e,n,t)}return t}function tu(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=B(t),e===null?null:e.stateNode}function nu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fs(e,t){nu(e,t),(e=e.alternate)&&nu(e,t)}function id(e){return e=B(e),e===null?null:e.stateNode}function sd(){return null}return T.attemptContinuousHydration=function(e){if(e.tag===13){var t=Zt(e,134217728);if(t!==null){var n=yt();zt(t,e,134217728,n)}fs(e,134217728)}},T.attemptDiscreteHydration=function(e){if(e.tag===13){var t=Zt(e,1);if(t!==null){var n=yt();zt(t,e,1,n)}fs(e,1)}},T.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=_n(e),n=Zt(e,t);if(n!==null){var r=yt();zt(n,e,t,r)}fs(e,t)}},T.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gr(t.pendingLanes);n!==0&&(zs(t,n|1),kt(t,ot()),!(Te&6)&&(ir(),Qt()))}break;case 13:jl(function(){var r=Zt(e,1);if(r!==null){var i=yt();zt(r,e,1,i)}}),fs(e,1)}},T.batchedUpdates=function(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(ir(),bi&&Qt())}},T.createComponentSelector=function(e){return{$$typeof:Ji,value:e}},T.createContainer=function(e,t,n,r,i,h,F){return $l(e,t,!1,null,n,r,i,h,F)},T.createHasPseudoClassSelector=function(e){return{$$typeof:$i,value:e}},T.createHydrationContainer=function(e,t,n,r,i,h,F,V,X){return e=$l(n,r,!0,e,i,h,F,V,X),e.context=eu(null),n=e.current,r=yt(),i=_n(n),h=on(r,i),h.callback=t??null,mn(n,h,i),e.current.lanes=i,pr(e,i,r),kt(e,r),e},T.createPortal=function(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:y,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}},T.createRoleSelector=function(e){return{$$typeof:es,value:e}},T.createTestNameSelector=function(e){return{$$typeof:ts,value:e}},T.createTextSelector=function(e){return{$$typeof:ns,value:e}},T.deferredUpdates=function(e){var t=Le,n=$e.transition;try{return $e.transition=null,Le=16,e()}finally{Le=t,$e.transition=n}},T.discreteUpdates=function(e,t,n,r,i){var h=Le,F=$e.transition;try{return $e.transition=null,Le=1,e(t,n,r,i)}finally{Le=h,$e.transition=F,Te===0&&ir()}},T.findAllNodes=Aa,T.findBoundingRects=function(e,t){if(!Ke)throw Error(a(363));t=Aa(e,t),e=[];for(var n=0;n<t.length;n++)e.push(Oe(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var r=n.x,i=r+n.width,h=n.y,F=h+n.height,V=t-1;0<=V;V--)if(t!==V){var X=e[V],se=X.x,ge=se+X.width,xe=X.y,ue=xe+X.height;if(r>=se&&h>=xe&&i<=ge&&F<=ue){e.splice(t,1);break}else if(r!==se||n.width!==X.width||ue<h||xe>F){if(!(h!==xe||n.height!==X.height||ge<r||se>i)){se>r&&(X.width+=se-r,X.x=r),ge<i&&(X.width=i-se),e.splice(t,1);break}}else{xe>h&&(X.height+=xe-h,X.y=h),ue<F&&(X.height=F-xe),e.splice(t,1);break}}}return e},T.findHostInstance=tu,T.findHostInstanceWithNoPortals=function(e){return e=M(e),e=e!==null?S(e):null,e===null?null:e.stateNode},T.findHostInstanceWithWarning=function(e){return tu(e)},T.flushControlled=function(e){var t=Te;Te|=1;var n=$e.transition,r=Le;try{$e.transition=null,Le=1,e()}finally{Le=r,$e.transition=n,Te=t,Te===0&&(ir(),Qt())}},T.flushPassiveEffects=zn,T.flushSync=jl,T.focusWithin=function(e,t){if(!Ke)throw Error(a(363));for(e=Ta(e),t=Bl(e,t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!ee(n)){if(n.tag===5&&de(n.stateNode))return!0;for(n=n.child;n!==null;)t.push(n),n=n.sibling}}return!1},T.getCurrentUpdatePriority=function(){return Le},T.getFindAllNodesFailureDescription=function(e,t){if(!Ke)throw Error(a(363));var n=0,r=[];e=[Ta(e),0];for(var i=0;i<e.length;){var h=e[i++],F=e[i++],V=t[F];if((h.tag!==5||!ee(h))&&(ba(h,V)&&(r.push(Na(V)),F++,F>n&&(n=F)),F<t.length))for(h=h.child;h!==null;)e.push(h,F),h=h.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Na(t[n]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},T.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return D(e.child.stateNode);default:return e.child.stateNode}},T.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:id,findFiberByHostInstance:e.findFiberByHostInstance||sd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Ti=t.inject(e),Xt=t}catch{}e=!!t.checkDCE}}return e},T.isAlreadyRendering=function(){return!1},T.observeVisibleRects=function(e,t,n,r){if(!Ke)throw Error(a(363));e=Aa(e,t);var i=Pe(e,n,r).disconnect;return{disconnect:function(){i()}}},T.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},T.runWithPriority=function(e,t){var n=Le;try{return Le=e,t()}finally{Le=n}},T.shouldError=function(){return null},T.shouldSuspend=function(){return!1},T.updateContainer=function(e,t,n,r){var i=t.current,h=yt(),F=_n(i);return n=eu(n),t.context===null?t.context=n:t.pendingContext=n,t=on(h,F),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mn(i,t,F),e!==null&&(zt(e,i,F,h),Oi(e,i,F)),F},T}),ro}var Sc;function L0(){return Sc||(Sc=1,no.exports=M0()),no.exports}var I0=L0();const D0=ho(I0);var io={exports:{}},En={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cc;function O0(){return Cc||(Cc=1,En.ConcurrentRoot=1,En.ContinuousEventPriority=4,En.DefaultEventPriority=16,En.DiscreteEventPriority=1,En.IdleEventPriority=536870912,En.LegacyRoot=0),En}var xc;function G0(){return xc||(xc=1,io.exports=O0()),io.exports}var jc=G0(),z0=Re();const wc={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Pc=!1,kc=!1;const vo=".react-konva-event",U0=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,B0=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,V0={};function Ts(s,u,T=V0){if(!Pc&&"zIndex"in u&&(console.warn(B0),Pc=!0),!kc&&u.draggable){var N=u.x!==void 0||u.y!==void 0,b=u.onDragEnd||u.onDragMove;N&&!b&&(console.warn(U0),kc=!0)}for(var m in T)if(!wc[m]){var a=m.slice(0,2)==="on",f=T[m]!==u[m];if(a&&f){var g=m.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),s.off(g,T[m])}var y=!u.hasOwnProperty(m);y&&s.setAttr(m,void 0)}var _=u._useStrictMode,P={},w=!1;const p={};for(var m in u)if(!wc[m]){var a=m.slice(0,2)==="on",d=T[m]!==u[m];if(a&&d){var g=m.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),u[m]&&(p[g]=u[m])}!a&&(u[m]!==T[m]||_&&u[m]!==s.getAttr(m))&&(w=!0,P[m]=u[m])}w&&(s.setAttrs(P),Tn(s));for(var g in p)s.on(g+vo,p[g])}function Tn(s){if(!z0.Konva.autoDrawEnabled){var u=s.getLayer()||s.getStage();u&&u.batchDraw()}}var so=Ic();const qc={},H0={};Ci.Node.prototype._applyProps=Ts;function j0(s,u){if(typeof u=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${u}`);return}s.add(u),Tn(s)}function q0(s,u,T){let N=Ci[s];N||(console.error(`Konva has no node with the type ${s}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${s}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),N=Ci.Group);const b={},m={};for(var a in u){var f=a.slice(0,2)==="on";f?m[a]=u[a]:b[a]=u[a]}const g=new N(b);return Ts(g,m),g}function W0(s,u,T){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${s}"`)}function K0(s,u,T){return!1}function Y0(s){return s}function X0(){return null}function Q0(){return null}function Z0(s,u,T,N){return H0}function J0(){}function $0(s){}function e1(s,u){return!1}function t1(){return qc}function n1(){return qc}const r1=setTimeout,i1=clearTimeout,s1=-1;function a1(s,u){return!1}const o1=!1,l1=!0,u1=!0;function c1(s,u){u.parent===s?u.moveToTop():s.add(u),Tn(s)}function h1(s,u){u.parent===s?u.moveToTop():s.add(u),Tn(s)}function Wc(s,u,T){u._remove(),s.add(u),u.setZIndex(T.getZIndex()),Tn(s)}function d1(s,u,T){Wc(s,u,T)}function f1(s,u){u.destroy(),u.off(vo),Tn(s)}function g1(s,u){u.destroy(),u.off(vo),Tn(s)}function p1(s,u,T){console.error(`Text components are not yet supported in ReactKonva. You text is: "${T}"`)}function m1(s,u,T){}function v1(s,u,T,N,b){Ts(s,b,N)}function y1(s){s.hide(),Tn(s)}function _1(s){}function S1(s,u){(u.visible==null||u.visible)&&s.show()}function C1(s,u){}function x1(s){}function w1(){}const P1=()=>jc.DefaultEventPriority,k1=Object.freeze(Object.defineProperty({__proto__:null,appendChild:c1,appendChildToContainer:h1,appendInitialChild:j0,cancelTimeout:i1,clearContainer:x1,commitMount:m1,commitTextUpdate:p1,commitUpdate:v1,createInstance:q0,createTextInstance:W0,detachDeletedInstance:w1,finalizeInitialChildren:K0,getChildHostContext:n1,getCurrentEventPriority:P1,getPublicInstance:Y0,getRootHostContext:t1,hideInstance:y1,hideTextInstance:_1,idlePriority:so.unstable_IdlePriority,insertBefore:Wc,insertInContainerBefore:d1,isPrimaryRenderer:o1,noTimeout:s1,now:so.unstable_now,prepareForCommit:X0,preparePortalMount:Q0,prepareUpdate:Z0,removeChild:f1,removeChildFromContainer:g1,resetAfterCommit:J0,resetTextContent:$0,run:so.unstable_runWithPriority,scheduleTimeout:r1,shouldDeprioritizeSubtree:e1,shouldSetTextContent:a1,supportsMutation:u1,unhideInstance:S1,unhideTextInstance:C1,warnsIfNotActing:l1},Symbol.toStringTag,{value:"Module"}));var E1=Object.defineProperty,R1=Object.defineProperties,T1=Object.getOwnPropertyDescriptors,Ec=Object.getOwnPropertySymbols,b1=Object.prototype.hasOwnProperty,N1=Object.prototype.propertyIsEnumerable,Rc=(s,u,T)=>u in s?E1(s,u,{enumerable:!0,configurable:!0,writable:!0,value:T}):s[u]=T,Tc=(s,u)=>{for(var T in u||(u={}))b1.call(u,T)&&Rc(s,T,u[T]);if(Ec)for(var T of Ec(u))N1.call(u,T)&&Rc(s,T,u[T]);return s},A1=(s,u)=>R1(s,T1(u)),bc,Nc;typeof window<"u"&&((bc=window.document)!=null&&bc.createElement||((Nc=window.navigator)==null?void 0:Nc.product)==="ReactNative")?ye.useLayoutEffect:ye.useEffect;function Kc(s,u,T){if(!s)return;if(T(s)===!0)return s;let N=s.child;for(;N;){const b=Kc(N,u,T);if(b)return b;N=N.sibling}}function Yc(s){try{return Object.defineProperties(s,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return s}}const Ac=console.error;console.error=function(){const s=[...arguments].join("");if(s!=null&&s.startsWith("Warning:")&&s.includes("useContext")){console.error=Ac;return}return Ac.apply(this,arguments)};const yo=Yc(ye.createContext(null));class Xc extends ye.Component{render(){return ye.createElement(yo.Provider,{value:this._reactInternals},this.props.children)}}function F1(){const s=ye.useContext(yo);if(s===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const u=ye.useId();return ye.useMemo(()=>{for(const N of[s,s==null?void 0:s.alternate]){if(!N)continue;const b=Kc(N,!1,m=>{let a=m.memoizedState;for(;a;){if(a.memoizedState===u)return!0;a=a.next}});if(b)return b}},[s,u])}function M1(){const s=F1(),[u]=ye.useState(()=>new Map);u.clear();let T=s;for(;T;){if(T.type&&typeof T.type=="object"){const b=T.type._context===void 0&&T.type.Provider===T.type?T.type:T.type._context;b&&b!==yo&&!u.has(b)&&u.set(b,ye.useContext(Yc(b)))}T=T.return}return u}function L1(){const s=M1();return ye.useMemo(()=>Array.from(s.keys()).reduce((u,T)=>N=>ye.createElement(u,null,ye.createElement(T.Provider,A1(Tc({},N),{value:s.get(T)}))),u=>ye.createElement(Xc,Tc({},u))),[s])}function I1(s){const u=St.useRef({});return St.useLayoutEffect(()=>{u.current=s}),St.useLayoutEffect(()=>()=>{u.current={}},[]),u.current}const D1=s=>{const u=St.useRef(),T=St.useRef(),N=St.useRef(),b=I1(s),m=L1(),a=f=>{const{forwardedRef:g}=s;g&&(typeof g=="function"?g(f):g.current=f)};return St.useLayoutEffect(()=>(T.current=new Ci.Stage({width:s.width,height:s.height,container:u.current}),a(T.current),N.current=Si.createContainer(T.current,jc.LegacyRoot,!1,null),Si.updateContainer(St.createElement(m,{},s.children),N.current),()=>{Ci.isBrowser&&(a(null),Si.updateContainer(null,N.current,null),T.current.destroy())}),[]),St.useLayoutEffect(()=>{a(T.current),Ts(T.current,s,b),Si.updateContainer(St.createElement(m,{},s.children),N.current,null)}),St.createElement("div",{ref:u,id:s.id,accessKey:s.accessKey,className:s.className,role:s.role,style:s.style,tabIndex:s.tabIndex,title:s.title})},hf="Layer",df="Line",Si=D0(k1);Si.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:St.version,rendererPackageName:"react-konva"});const ff=St.forwardRef((s,u)=>St.createElement(Xc,{},St.createElement(D1,{...s,forwardedRef:u})));var ao,Fc;function O1(){if(Fc)return ao;Fc=1;var s=Lc();return ao=function(T,N,b){const m=s.useRef("loading"),a=s.useRef(),[f,g]=s.useState(0),y=s.useRef(),_=s.useRef(),P=s.useRef();return(y.current!==T||_.current!==N||P.current!==b)&&(m.current="loading",a.current=void 0,y.current=T,_.current=N,P.current=b),s.useLayoutEffect(function(){if(!T)return;var w=document.createElement("img");function p(){m.current="loaded",a.current=w,g(Math.random())}function d(){m.current="failed",a.current=void 0,g(Math.random())}return w.addEventListener("load",p),w.addEventListener("error",d),N&&(w.crossOrigin=N),b&&(w.referrerPolicy=b),w.src=T,function(){w.removeEventListener("load",p),w.removeEventListener("error",d)}},[T,N,b]),[a.current,m.current]},ao}var G1=O1();const z1=ho(G1);oo();const U1={POINTER:"pointer",BRUSH:"brush",HIGHLIGHTER:"highlighter"},B1=({bookId:s,initialPage:u=1,onPageChange:T,readOnly:N=!1,studentId:b=null,showSaveButton:m=!1})=>{const[a,f]=ye.useState(u),[g,y]=ye.useState(0),[_,P]=ye.useState({}),[w,p]=ye.useState(100),[d,v]=ye.useState(!0),[k,A]=ye.useState(null),[c,o]=ye.useState(null);ye.useState(null),ye.useState(U1.POINTER);const[x,R]=ye.useState([]);ye.useState(!1);const[L,G]=ye.useState({width:800,height:1e3}),I=ye.useRef(null);ye.useRef(null);const z=ye.useRef(null),{activeSession:E,saveDrawing:M,updateStudentProgress:B}=yd(),[l]=z1(c);ye.useEffect(()=>{s&&S()},[s]),ye.useEffect(()=>{u!==a&&f(u)},[u]),ye.useEffect(()=>{(async()=>{try{const H=_[a];o(H),T&&T(a),E&&b&&await B(b,a)}catch(H){console.error(H),A("Failed to load page")}})()},[a,_]),ye.useEffect(()=>{const j=()=>{if(I.current&&l){const H=I.current,Z=H.offsetWidth-40,Q=H.offsetHeight-40,$=l.height/l.width;let Y=Z,te=Y*$;te>Q&&(te=Q,Y=te/$),G({width:Y*(w/100),height:te*(w/100)})}};return l&&(j(),window.addEventListener("resize",j)),()=>window.removeEventListener("resize",j)},[l,w]),ye.useEffect(()=>{(async()=>{var H;if(E&&b)try{const Z=doc(db,"classes",E.classId,"sessions",E.id),Q=await getDoc(Z);if(Q.exists()){const Y=(H=Q.data().studentProgress[b])==null?void 0:H.drawings[a];R(Y||[])}}catch(Z){console.error("Error loading drawings:",Z)}})()},[a,E,b]);const S=async()=>{try{v(!0),A(null);const j=s.toLowerCase().replace(/iqra book (\d+)/i,"iqra-$1").replace(/\s+/g,"-"),H=oo(),Z=lu(H,`iqra-books/${j}/pages`),$=(await pd(Z)).items.sort((ae,le)=>{var ne,re;const U=parseInt(((ne=ae.name.match(/page_(\d+)/i))==null?void 0:ne[1])||"0"),W=parseInt(((re=le.name.match(/page_(\d+)/i))==null?void 0:re[1])||"0");return U-W});if($.length===0)throw new Error(`No pages found in book: ${j}`);y($.length);const Y=new Set([a-1,a,a+1].filter(ae=>ae>0&&ae<=$.length)),te={};if(await Promise.all([...Y].map(async ae=>{const le=$.find(U=>{var ne;return parseInt(((ne=U.name.match(/page_(\d+)/i))==null?void 0:ne[1])||"0")===ae});if(le)try{const U=await uu(le);te[ae]=U}catch(U){console.error(`Error loading page ${ae}:`,U)}})),Object.keys(te).length===0)throw new Error("Failed to load any pages");P(te)}catch(j){console.error("Error loading book:",j),A(j.message||"Failed to load book")}finally{v(!1)}},C=async j=>{if(!_[j]&&j>0&&j<=g)try{const H=s.toLowerCase().replace(/iqra book (\d+)/i,"iqra-$1").replace(/\s+/g,"-"),Z=oo(),Q=lu(Z,`iqra-books/${H}/pages/page_${j}.png`),$=await uu(Q);P(Y=>({...Y,[j]:$}))}catch(H){console.error(`Error loading page ${j}:`,H)}},D=j=>{j>=1&&j<=g&&(f(j),C(j),T==null||T(j))},O=j=>{p(H=>Math.min(Math.max(50,H+j),200))};return d?_e.jsx(Pn,{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",children:_e.jsx(md,{})}):k?_e.jsx(Pn,{p:2,children:_e.jsx(vd,{elevation:2,sx:{p:2,bgcolor:"error.light",color:"error.contrastText"},children:k})}):_e.jsxs(Pn,{ref:I,display:"flex",flexDirection:"column",height:"100%",sx:{backgroundColor:"#f5f5f5"},children:[_e.jsxs(Pn,{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,sx:{backgroundColor:"#fff",borderBottom:1,borderColor:"divider"},children:[_e.jsxs(Pn,{display:"flex",alignItems:"center",children:[_e.jsx(gs,{title:"Previous Page",children:_e.jsx("span",{children:_e.jsx(ps,{onClick:()=>D(a-1),disabled:a<=1,children:_e.jsx(Vd,{})})})}),_e.jsxs(cu,{sx:{mx:2},children:["Page ",a," of ",g]}),_e.jsx(gs,{title:"Next Page",children:_e.jsx("span",{children:_e.jsx(ps,{onClick:()=>D(a+1),disabled:a>=g,children:_e.jsx(Hd,{})})})})]}),_e.jsxs(Pn,{display:"flex",alignItems:"center",children:[_e.jsx(gs,{title:"Zoom Out",children:_e.jsx("span",{children:_e.jsx(ps,{onClick:()=>O(-10),disabled:w<=50,children:_e.jsx(qd,{})})})}),_e.jsxs(cu,{sx:{mx:1},children:[w,"%"]}),_e.jsx(gs,{title:"Zoom In",children:_e.jsx("span",{children:_e.jsx(ps,{onClick:()=>O(10),disabled:w>=200,children:_e.jsx(jd,{})})})})]})]}),_e.jsx(Pn,{flex:1,overflow:"auto",display:"flex",justifyContent:"center",alignItems:"flex-start",p:2,children:_[a]&&_e.jsx("img",{ref:z,src:_[a],alt:`Page ${a}`,style:{maxWidth:"100%",transform:`scale(${w/100})`,transformOrigin:"top center",transition:"transform 0.2s"}})}),_e.jsx(Pn,{px:2,py:1,children:_e.jsx(Bd,{value:a,min:1,max:g,onChange:(j,H)=>D(H),valueLabelDisplay:"auto",valueLabelFormat:j=>`Page ${j}`})})]})},gf=Object.freeze(Object.defineProperty({__proto__:null,default:B1},Symbol.toStringTag,{value:"Module"}));export{B1 as I,hf as L,Vd as N,Bd as S,ff as a,df as b,Hd as c,gf as d};
