import{r,a4 as P,e as A,j as e,f as i,P as F,T as g,J as l,D as G,L as W}from"./index-NbX1JcnA.js";import{C as L}from"./Container-Xllwi1gj.js";import{m as D}from"./proxy-D2rYx3pK.js";import{A as E}from"./Alert-CmfgxPu4.js";import{T as u}from"./TextField-BvzYVYPy.js";import{F as R,I as T,S as B}from"./Select-DoWYHUS9.js";import{B as f}from"./Button-BugPEW2g.js";import{G as Y}from"./Google-L7PHq6xT.js";import{L as k}from"./Link-ByJX8nbe.js";import"./useThemeProps-DPqPURvD.js";import"./Close-BMBH_CLD.js";import"./isMuiElement-CyZXsiQS.js";const X=()=>{const[m,v]=r.useState(""),[d,j]=r.useState(""),[h,w]=r.useState(""),[o,b]=r.useState("student"),[p,a]=r.useState(""),[x,n]=r.useState(!1),s=P(),{signup:y,loginWithGoogle:S}=A(),I=async t=>{if(t.preventDefault(),d!==h)return a("Passwords do not match");try{a(""),n(!0);const c=await y(m,d,o);c.success?o==="teacher"?(alert("Your teacher account has been created and is pending approval. You will be notified once approved."),s("/login",{replace:!0})):s("/dashboard",{replace:!0}):a(c.error||"Failed to create an account")}catch{a("Failed to create an account")}finally{n(!1)}},C=async()=>{try{a(""),n(!0);const t=await S(o);t.success?o==="teacher"?(alert("Your teacher account has been created and is pending approval. You will be notified once approved."),s("/login",{replace:!0})):s("/dashboard",{replace:!0}):a(t.error||"Failed to sign up with Google")}catch{a("Failed to sign up with Google")}finally{n(!1)}};return e.jsx(L,{component:"main",maxWidth:"xs",children:e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(i,{sx:{mt:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsxs(F,{elevation:3,sx:{p:4,width:"100%",borderRadius:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(g,{component:"h1",variant:"h4",gutterBottom:!0,children:"Sign up for IQRA"}),p&&e.jsx(E,{severity:"error",sx:{width:"100%",mb:2},children:p}),e.jsxs(i,{component:"form",onSubmit:I,sx:{mt:1,width:"100%"},children:[e.jsx(u,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:m,onChange:t=>v(t.target.value)}),e.jsx(u,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:d,onChange:t=>j(t.target.value)}),e.jsx(u,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",value:h,onChange:t=>w(t.target.value)}),e.jsxs(R,{fullWidth:!0,margin:"normal",children:[e.jsx(T,{id:"role-label",children:"I want to join as"}),e.jsxs(B,{labelId:"role-label",id:"role",value:o,label:"I want to join as",onChange:t=>b(t.target.value),children:[e.jsx(l,{value:"student",children:"Student"}),e.jsx(l,{value:"teacher",children:"Teacher"}),e.jsx(l,{value:"parent",children:"Parent"}),e.jsx(l,{value:"guest",children:"Guest"})]})]}),e.jsx(f,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:x,children:"Sign Up"}),e.jsx(i,{sx:{width:"100%",textAlign:"center",my:2},children:e.jsx(G,{children:e.jsx(g,{color:"textSecondary",variant:"body2",children:"or"})})}),e.jsx(f,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Y,{}),onClick:C,disabled:x,children:"Sign up with Google"}),e.jsx(i,{sx:{mt:2,textAlign:"center"},children:e.jsx(k,{component:W,to:"/login",variant:"body2",underline:"hover",children:"Already have an account? Sign In"})})]})]})})})})};export{X as default};
